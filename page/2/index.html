<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 5.2.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"helongquan.github.io","root":"/","scheme":"Gemini","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}}};
  </script>

  <meta name="description" content="日记">
<meta property="og:type" content="website">
<meta property="og:title" content="鸢尾花序">
<meta property="og:url" content="https://helongquan.github.io/page/2/index.html">
<meta property="og:site_name" content="鸢尾花序">
<meta property="og:description" content="日记">
<meta property="og:locale" content="en_US">
<meta property="article:author" content="泉哥">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="https://helongquan.github.io/page/2/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : true,
    isPost : false,
    lang   : 'en'
  };
</script>

  <title>鸢尾花序</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">鸢尾花序</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>Home</a>

  </li>
        <li class="menu-item menu-item-about">

    <a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>About</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>Tags</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>Categories</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>Archives</a>

  </li>
        <li class="menu-item menu-item-schedule">

    <a href="/schedule/" rel="section"><i class="fa fa-calendar fa-fw"></i>Schedule</a>

  </li>
        <li class="menu-item menu-item-sitemap">

    <a href="/sitemap.xml" rel="section"><i class="fa fa-sitemap fa-fw"></i>Sitemap</a>

  </li>
  </ul>
</nav>




</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content index posts-expand">
            
      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://helongquan.github.io/2019/07/29/%E5%BC%80%E5%8F%91shopify%E4%B8%BB%E9%A2%98%E8%AF%A6%E7%BB%86%E6%95%99%E7%A8%8B%E5%92%8C%E5%A1%AB%E5%9D%91%E8%AE%B0%E5%BD%95/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="泉哥">
      <meta itemprop="description" content="日记">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="鸢尾花序">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2019/07/29/%E5%BC%80%E5%8F%91shopify%E4%B8%BB%E9%A2%98%E8%AF%A6%E7%BB%86%E6%95%99%E7%A8%8B%E5%92%8C%E5%A1%AB%E5%9D%91%E8%AE%B0%E5%BD%95/" class="post-title-link" itemprop="url">开发shopify主题详细教程和填坑记录</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2019-07-29 11:06:18" itemprop="dateCreated datePublished" datetime="2019-07-29T11:06:18+08:00">2019-07-29</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2020-10-11 11:58:05" itemprop="dateModified" datetime="2020-10-11T11:58:05+08:00">2020-10-11</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/shopify/" itemprop="url" rel="index"><span itemprop="name">shopify</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>本文分享下笔者业余时间折腾的shopify的一些记录，感兴趣的可以阅读以下，希望可以从中找到一些有用的东西。</p>
<h4 id="先根据自己的操作系统选择合适的开发工具"><a href="#先根据自己的操作系统选择合适的开发工具" class="headerlink" title="先根据自己的操作系统选择合适的开发工具"></a>先根据自己的操作系统选择合适的开发工具</h4><p>可以参考这篇文章：<a target="_blank" rel="noopener" href="https://help.shopify.com/en/themes/development/getting-started/choosing-an-editor">https://help.shopify.com/en/themes/development/getting-started/choosing-an-editor</a></p>
<p>笔者选择：</p>
<ul>
<li><a target="_blank" rel="noopener" href="https://help.shopify.com/en/themes/development/getting-started/choosing-an-editor#shopify-theme-kit">Shopify Theme Kit</a>（这个是在开发者自己本地电脑上开发）</li>
<li><a target="_blank" rel="noopener" href="https://help.shopify.com/en/themes/development/getting-started/choosing-an-editor#shopify-online-code-editor">Shopify online code editor</a>（这是直接在shopify后台主题定制那里的编辑器）</li>
</ul>
<h4 id="安装开发者工具"><a href="#安装开发者工具" class="headerlink" title="安装开发者工具"></a>安装开发者工具</h4><p>在线的方式就不需要安装开发者工具了，现在我们说下本地电脑开发者工具的安装。</p>
<p>参考这篇文章：</p>
<p><a target="_blank" rel="noopener" href="https://shopify.github.io/themekit/">https://shopify.github.io/themekit/</a></p>
<p>笔者的是用的window电脑，所以这里当然选择Windows Chocolatey Installation</p>
<p>根据教程：</p>
<h3 id="Windows-Chocolatey-Installation"><a href="#Windows-Chocolatey-Installation" class="headerlink" title="Windows Chocolatey Installation"></a>Windows Chocolatey Installation</h3><p>If you have <a target="_blank" rel="noopener" href="https://chocolatey.org/">chocolatey</a> installed you can install themekit by running the following commands.</p>
<pre><code>choco install themekit</code></pre>
<p>就是说要想安装themekit就要先安装Chocolatey，所以我们先知道在windows上如何安装Chocolatey的，参考这篇教程：</p>
<p><a target="_blank" rel="noopener" href="https://jingyan.baidu.com/article/63acb44a1c8e8461fcc17eaf.html">https://jingyan.baidu.com/article/63acb44a1c8e8461fcc17eaf.html</a>，网上大把教程。</p>
<p>如果您的电脑是win10 ，点击win10桌面的开始菜单，输入cmd，右键选中命令提示符，选择<strong>以管理员身份运行</strong>，会弹出cmd窗口，然后输入如下命令：</p>
<pre><code>@&quot;%SystemRoot%\System32\WindowsPowerShell\v1.0\powershell.exe&quot; -NoProfile -InputFormat None -ExecutionPolicy Bypass -Command &quot;iex ((New-Object System.Net.WebClient).DownloadString(&#39;https://chocolatey.org/install.ps1&#39;))&quot; &amp;&amp; SET &quot;PATH=%PATH%;%ALLUSERSPROFILE%\chocolatey\bin&quot;</code></pre>
<p>会逐步执行，等完成后，再输入如下命令：</p>
<pre><code>choco</code></pre>
<p>如果显示chocolatey版本号，说明安装成功。</p>
<p>这个安装成功后就可以安装themekit了，运行上面的那个命令：</p>
<pre><code>choco install themekit</code></pre>
<p>安装成功后，如需查看更多，可以参考这篇文章：<a target="_blank" rel="noopener" href="https://blog.csdn.net/8665048/article/details/95936394">https://blog.csdn.net/8665048/article/details/95936394</a></p>
<p>安装完毕之后，我们接着往下看。</p>
<h2 id="2、获取API访问权限"><a href="#2、获取API访问权限" class="headerlink" title="2、获取API访问权限"></a>2、获取API访问权限</h2><p>到开发者店铺后台，还没申请开发店铺后台的，可以参考从零开始开发Shopify主题：（1）注册开发者店铺，链接如下：</p>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/8665048/article/details/95920895">https://blog.csdn.net/8665048/article/details/95920895</a></p>
<p>在这个教程中，首先，你需要了解的是你无法在本地进行调试Shopify主题。因此，需要先去<a target="_blank" rel="noopener" href="https://www.shopify.com/partners">Shopify Partners</a>去注册一个账号，注册完登录进去后，点击右侧商店，创建一个开发商店，如下图。</p>
<p><img src="https://i.imgur.com/caNreHP.png"></p>
<p>然后填写开发商店的名称和登录密码，因为我们是开发模板使用，所以目的选测试应用或模板</p>
<p><img src="https://i.imgur.com/d1AomaK.png"></p>
<p>点击完成后，就进入了我们开发商店的后台：</p>
<p><img src="https://i.imgur.com/SXCg2Op.png"></p>
<p>至此，我们的开发账号就搞定了！</p>
<h2 id="Shopify开发者店铺后台"><a href="#Shopify开发者店铺后台" class="headerlink" title="Shopify开发者店铺后台"></a>Shopify开发者店铺后台</h2><p>后台地址为上面你注册的名字地址，比如：<a target="_blank" rel="noopener" href="https://yourstore.shopify.com/admin%EF%BC%8C%E5%90%8E%E9%9D%A2%E7%9A%84%E5%BC%80%E5%8F%91%E5%B7%A5%E4%BD%9C%E9%83%BD%E5%B0%86%E5%9C%A8%E8%BF%99%E9%87%8C%E8%BF%9B%E8%A1%8C%E3%80%82">https://yourstore.shopify.com/admin，后面的开发工作都将在这里进行。</a></p>
<h2 id="Shopify准系统入门主题"><a href="#Shopify准系统入门主题" class="headerlink" title="Shopify准系统入门主题"></a>Shopify准系统入门主题</h2><p>Shopify为我们提供了一个用于开发的<a target="_blank" rel="noopener" href="https://github.com/Shopify/skeleton-theme">skeleton-theme</a>，从GitHub上可以Clone下来，文件结构如下：</p>
<p><img src="https://i.imgur.com/g2wNrsl.png"></p>
<p>先不管这些文件都是干什么的，但是我们先要知道里面的大多数文件都是以.liquid结尾的，Liquid是Shopify自己的模板语言，关于Liquid语言的详细信息，可以查看这里-》<a target="_blank" rel="noopener" href="https://shopify.github.io/liquid/">https://shopify.github.io/liquid/</a></p>
<p>让我们打开src/layout/theme.liquid文件，可以看到里面的模板代码，这里我用的IDE是WebStorm，默认没有语法高亮的，需要安装一个插件Twig，然后配置一下，Editor-&gt;File Types-&gt;Twig ，添加一下*.liquid就行了，如下图：</p>
<p><img src="https://i.imgur.com/epJtsts.png"></p>
<p>如果我们想要上传模板，需要把我们刚才clone下来代码打包成zip文件，然后上传到shopify开发店铺的后台，注意这个模板无法直接使用，但是可以用这种方法修改已存在的模板，比如从模板商店下载的模板进行自定义。前面说过，Shopify的模板开发无法完全在本地开发测试，所以后面的课程会再介绍联线调试。</p>
<hr>
<p>完成这个以后，我们在回到前面的那个链接中：<a target="_blank" rel="noopener" href="https://blog.csdn.net/8665048/article/details/95936394">https://blog.csdn.net/8665048/article/details/95936394</a></p>
<p>完成如下的环节：</p>
<p>进入应用，创建一个专有应用，如下图：</p>
<p><img src="https://i.imgur.com/XAe4pZj.png"></p>
<p>填写专有应用名称，邮箱地址，并打开模板的读写权限：</p>
<p><img src="https://i.imgur.com/vqGXyTJ.png"></p>
<p>保存后，就可以得到API密钥和密码。</p>
<h2 id="3、创建一个新主题"><a href="#3、创建一个新主题" class="headerlink" title="3、创建一个新主题"></a>3、创建一个新主题</h2><p>在本地终端输入如下命令：</p>
<pre><code>theme new --password=[your-password] --store=[your-store.myshopify.com] --name=[theme name]</code></pre>
<p>回车后它会帮我们做以下事情：</p>
<ul>
<li>在本地生成基本主题模板框架</li>
<li>在Shopify开发网店上创建一个新主题</li>
<li>把本地的模板文件上传到Shopify开发网店</li>
<li>使用新主题的配置文件或者更新本地原来已经存在的配置文件</li>
</ul>
<h2 id="4、联机调试主题"><a href="#4、联机调试主题" class="headerlink" title="4、联机调试主题"></a>4、联机调试主题</h2><p>在刚才我们在本地生成的主题目录下面，输入如下命令：</p>
<pre><code>theme watch</code></pre>
<p>接着，在终端就可以看到监听启动了，这个时候我们再用编辑器，比如：WebStorm编辑我们刚才主题文件，就可以实时同步到我们的Shopify开发网店了。搞定！</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://helongquan.github.io/2019/07/23/wordpress%E7%9A%84enfold%E4%B8%BB%E9%A2%98%E9%80%9A%E8%BF%87javascript%E5%AF%B9tab%E6%A8%A1%E5%9D%97%E5%8A%A8%E6%80%81%E5%B5%8C%E5%85%A5%E4%BB%A5%E5%AE%9E%E7%8E%B0%E4%BE%A7%E8%BE%B9%E6%A0%8F%E7%9A%84%E5%B8%83%E5%B1%80%E6%96%B9%E6%A1%88%E6%97%A5%E8%AE%B0/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="泉哥">
      <meta itemprop="description" content="日记">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="鸢尾花序">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2019/07/23/wordpress%E7%9A%84enfold%E4%B8%BB%E9%A2%98%E9%80%9A%E8%BF%87javascript%E5%AF%B9tab%E6%A8%A1%E5%9D%97%E5%8A%A8%E6%80%81%E5%B5%8C%E5%85%A5%E4%BB%A5%E5%AE%9E%E7%8E%B0%E4%BE%A7%E8%BE%B9%E6%A0%8F%E7%9A%84%E5%B8%83%E5%B1%80%E6%96%B9%E6%A1%88%E6%97%A5%E8%AE%B0/" class="post-title-link" itemprop="url">wordpress的enfold主题通过javascript对tab模块动态嵌入以实现侧边栏的布局方案日记</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2019-07-23 11:47:03" itemprop="dateCreated datePublished" datetime="2019-07-23T11:47:03+08:00">2019-07-23</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2020-10-11 11:58:03" itemprop="dateModified" datetime="2020-10-11T11:58:03+08:00">2020-10-11</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/javascript/" itemprop="url" rel="index"><span itemprop="name">javascript</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>本文仅仅作为一个日记，纯属偷懒。本文以wordpress的enfold主题作为测试。</p>
<p>有个客户需求，大概说希望有个侧边栏，然后点击左边马上在右边显示出来，而不是像个链接那样点击后进入到一个新的页面去，其实想要实现这个其实方法很多种，比如可以通过jquery的方式，通过点击显示隐藏的方式来实现等等，当然也可以通过框架，甚至是插件。</p>
<p>本着以最小的代价做一件事，笔者这里就采用js的方式然后配合以wordpress的enfold主题本身的特性，这样用户以后添加东西方便，也易于维护，用户只需要关心侧边栏内容的添加即可，而不需要深入到代码模式下编辑一个内容。</p>
<p>打开后台新建一个页面，然后在enfold主题的高级编辑器中添加Colorsection，其实这个不是必要的，主要是笔者方便进行个性化处理，有了colorsection区块的话就可以添加一个ID，那么就可以做局部样式处理了。</p>
<p>然后，在Content Element选项卡那里选择Tabs这个组件，</p>
<p><img src="https://i.imgur.com/tKCJ2TA.png"></p>
<p>然后把这个拖入colorsection这个区块中。</p>
<p>然后添加Tabs这个组件，在Tab Position这个地方选择Display Tabs on the left（选择卡文本在左边），这样就可以上线类似侧边栏的效果了。然后剩下的保持默认，接着在Add/Edit Tabs那里随便添加几个内容。</p>
<p><img src="https://i.imgur.com/65K8Uga.png"></p>
<p>然后就可以看到添加后的效果，刷新前台：</p>
<p><img src="https://i.imgur.com/sNPeR7H.png"></p>
<p>选项卡文本在左边以侧边栏的形式显示出来，选项卡内容在右边区域显示出来。</p>
<p>然后，基本就实现了这个效果，为了接近客户需求：</p>
<blockquote>
<p>客户想要在某几个位置添加一个标题，而tab这形式是每一项都是并列的，也就是同胞关系。如何动态嵌入标题呢，而且是在指定的位置嵌入标题，因为将来可能这个标题会更改。</p>
</blockquote>
<p>目前就是全是选项卡文本，没有标题，现在我们要嵌入标题dom进去。为了保持良好的结构，这里采用javascript的方式进行原生编码。</p>
<p>完整的js代码如下：</p>
<pre><code>&lt;script&gt;
   // 等页面加载完毕后执行此段代码
    window.onload = function()&#123;
        // 获取tab的选项卡的dom
        var tabs = document.querySelectorAll(&quot;.tab_titles&gt;.tab&quot;);
        // 执行循环遍历
        for (var tab_items in tabs) &#123;
          // 动态创建一个dom，为了保持结构跟tab标签一样的样式，建议直接通过浏览器开发者工具获取同胞中的一个的dom
            var titles = document.createElement(&quot;div&quot;);
            // 根据开发者工具定位，为这个dom添加class为tab即可保持先创建的这个dom样式跟原有的tab良好的兼容，以及为了自定义样式，笔者还添加了一个自己的class，命名为jake_tab，这里顺便说下，为一个标签添加多个class，方法如下面那行代码。
            titles.classList.add(&quot;tab&quot;,&quot;jake_tab&quot;);
            // 然后就可以通过switch来进行判断，如果如何某个条件，执行某段代码。
            switch (tabs[tab_items].innerText) &#123;
                // 如下就是如果某个tab的文本为SMT PCB Assembly，那么就在它的外部前面插入PCBA ASSEMBLY TYPES
                case &quot;SMT PCB Assembly&quot;:
                    titles.innerHTML = &#39;&lt;h3 class=&quot;jake_tab_titles&quot;&gt;PCBA ASSEMBLY TYPES&lt;/h3&gt;&#39;;
                    tabs[tab_items].before(titles);
                    break;
                // 如下就是如果某个tab的文本为Full Turnkey PCB Assembly，那么就在它的外部前面插入ASSEMBLY WE DO
                case &quot;Full Turnkey PCB Assembly&quot;:
                    titles.innerHTML = &#39;&lt;h3 class=&quot;jake_tab_titles&quot;&gt;ASSEMBLY WE DO&lt;/h3&gt;&#39;;
                    tabs[tab_items].before(titles);
                    break;
                // 如下就是如果某个tab的文本为PCB Layout &amp; design，那么就在它的外部前面插入First PCBA Services
                case &quot;PCB Layout &amp; design&quot;:
                    titles.innerHTML = &#39;&lt;h3 class=&quot;jake_tab_titles&quot;&gt;First PCBA Services&lt;/h3&gt;&#39;;
                    tabs[tab_items].before(titles);
                    break;
                default:
                    break;
            &#125;
        &#125;
    &#125;

&lt;/script&gt;</code></pre>
<p>把这个代码放在页面中也可以，也可以放在网站的公共头部或者公共底部。</p>
<p>事实上，这个就完成了动态嵌入到tab里面符合某些条件的dom的目的，也就是嵌入标题的目的。</p>
<p>剩下的就是通过css美化了。</p>
<p>完整的css代码如下：</p>
<pre><code>&lt;style&gt;
    h3.jake_tab_titles&#123;
        font-weight: 700 !important;
        color: #fff !important;
        font-size: 15px;
        cursor: default !important;
        margin-bottom: 0px !important;
    &#125;
    .jake_tab&#123;
        padding-top:20px !important;
        padding-bottom:20px !important;
        background:#0a8dff !important;
    &#125;
&lt;/style&gt;</code></pre>
<p>当然，这是笔者简单的美化，仅仅代表笔者自己的审美，大家完全可以自行的通过css进行优化，处理下自适应以及别的东西，<strong>最重要的是要知道javascript的那段代码的实现原理和思路</strong>，思路很重要。</p>
<p>最后的效果也粘贴下吧：</p>
<p><img src="https://i.imgur.com/M9gxwOd.png"></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://helongquan.github.io/2019/07/19/Linux%E5%AE%89%E8%A3%85RStudio-Server%E4%BB%A5%E5%8F%8A%E4%B8%AD%E9%80%94%E7%9A%84%E5%90%84%E7%A7%8D%E9%97%AE%E9%A2%98%E8%AE%B0%E5%BD%95/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="泉哥">
      <meta itemprop="description" content="日记">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="鸢尾花序">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2019/07/19/Linux%E5%AE%89%E8%A3%85RStudio-Server%E4%BB%A5%E5%8F%8A%E4%B8%AD%E9%80%94%E7%9A%84%E5%90%84%E7%A7%8D%E9%97%AE%E9%A2%98%E8%AE%B0%E5%BD%95/" class="post-title-link" itemprop="url">Linux安装RStudio Server以及中途的各种问题记录</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2019-07-19 16:40:44" itemprop="dateCreated datePublished" datetime="2019-07-19T16:40:44+08:00">2019-07-19</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2020-10-11 11:57:58" itemprop="dateModified" datetime="2020-10-11T11:57:58+08:00">2020-10-11</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/r/" itemprop="url" rel="index"><span itemprop="name">r</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>首先，打开并查阅**<a target="_blank" rel="noopener" href="https://www.rstudio.com/products/rstudio/download-server/">RStudio Server</a>**的官方文档，查阅软件安装的相关说明。根据安装文档的说明，按照以下步骤进行安装：</p>
<pre><code># 安装R，已完成
# 安装 gdebi-core gdebi-core
sudo apt-get install gdebi-core
# 下载RStudio Server安装包
wget https://download2.rstudio.org/rstudio-server-1.1.383-amd64.deb
# 安装RStudio Server
sudo gdebi rstudio-server-1.1.383-amd64.deb
# 查看服务器的地址
ifconfig
# 使用网页登录 RStudio Server
服务器地址:8787</code></pre>
<p>笔者的ip为：192.168.10.176</p>
<p>所以，我们在浏览器输入：<a target="_blank" rel="noopener" href="http://192.168.10.176:8787/">http://192.168.10.176:8787</a></p>
<p>这个时候就需要输入账号密码。</p>
<p>这里把我困惑了足足几分钟，我不明白这个账号密码是什么的账号密码，后来查了资料才发现这个是电脑的账号密码，因为笔者是在本地电脑（Ubuntu操作系统）进行的实验，IP自然是本地的IP了，而<strong>这个账号密码就是笔者打开电脑需要输入密码的那个管理员账号密码</strong>。</p>
<p>如果是云服务器，可能是需要输入账号密码的，如果需要的话，说明你为云服务器设置了访问的账号密码，如果没有设置默认应该是直接就访问的，作为linux操作系统，通常都会要求为电脑设置一个账号密码。</p>
<p>然后，就可以在ubuntu的电脑上看到跟在window上安装的Rstudio的软件一样的界面了。</p>
<p>剩下的就是我们找个R的入门教程，一个一个实践，把不懂的问题一个一个的记录起来，然后逐个解决。</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://helongquan.github.io/2019/07/17/%E5%AE%9E%E9%AA%8C%E7%BD%AE%E7%89%A9%E6%9E%B6%E8%A3%85%E7%BD%AE%E8%B4%AD%E7%BD%AE%E5%92%8C%E5%AE%89%E8%A3%85%E6%97%A5%E8%AE%B0/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="泉哥">
      <meta itemprop="description" content="日记">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="鸢尾花序">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2019/07/17/%E5%AE%9E%E9%AA%8C%E7%BD%AE%E7%89%A9%E6%9E%B6%E8%A3%85%E7%BD%AE%E8%B4%AD%E7%BD%AE%E5%92%8C%E5%AE%89%E8%A3%85%E6%97%A5%E8%AE%B0/" class="post-title-link" itemprop="url">实验置物架装置购置和安装日记</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2019-07-17 17:35:03" itemprop="dateCreated datePublished" datetime="2019-07-17T17:35:03+08:00">2019-07-17</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2020-10-11 11:58:05" itemprop="dateModified" datetime="2020-10-11T11:58:05+08:00">2020-10-11</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E4%B8%9A%E4%BD%99%E7%88%B1%E5%A5%BD/" itemprop="url" rel="index"><span itemprop="name">业余爱好</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>为了能够更好的管理实验项目和实验对象的陈列，我们准备购置一个置物架，置物架的购置选择的是铁架，更牢固，铁架层数可以自定义的添加，层数的高度可以自由的调整。</p>
<p>目前的置物架尺寸标准：</p>
<p>总层数：6层</p>
<table>
<thead>
<tr>
<th align="left">层数</th>
<th align="left">内容</th>
<th align="left">备注</th>
</tr>
</thead>
<tbody><tr>
<td align="left">第一层</td>
<td align="left">实验项目辅助设备，以及原材料，放置重量叫重的物品</td>
<td align="left">第一层接近地面最近，容易潮湿，因此作为辅助设备的存放比较合适</td>
</tr>
<tr>
<td align="left">第二层</td>
<td align="left">项目对象内容物</td>
<td align="left">第二层离地面较高，阴凉干燥，存放实验物品较合适</td>
</tr>
<tr>
<td align="left">第三层</td>
<td align="left">项目对象内容物</td>
<td align="left">第三层离地面较高，阴凉干燥，存放实验物品较合适</td>
</tr>
<tr>
<td align="left">第四层</td>
<td align="left">项目对象内容物</td>
<td align="left">第四层离地面较高，阴凉干燥，存放实验物品较合适</td>
</tr>
<tr>
<td align="left">第五层</td>
<td align="left">项目对象内容物</td>
<td align="left">第四层离地面较高，阴凉干燥，存放实验物品较合适</td>
</tr>
<tr>
<td align="left">第六层</td>
<td align="left">项目辅助设备，以及原料</td>
<td align="left">第六层离地面最高，重量较轻，减少重心高度</td>
</tr>
</tbody></table>
<blockquote>
<p>注意：为了减少灰尘和蝇妏的影响，这里采用一个类似窗帘的东西作为阻挡。</p>
</blockquote>
<p>置物架的规格（单位：cm）：</p>
<ul>
<li>宽度：30cm</li>
<li>长度：80cm</li>
<li>高度：180cm</li>
</ul>
<p>收纳箱一个，作为隔绝外部内容物的干扰，保存实验中易受潮的物品。</p>
<h2 id="安装方式"><a href="#安装方式" class="headerlink" title="安装方式"></a>安装方式</h2><p>这个置物架安装的话，需要很多螺丝，建议准备十字螺丝刀，较大号的；如果有小型的可调节的扳手最好了，老虎钳有会更好，方便用来处理被扭坏死的螺丝。</p>
<p>该装置用于放置培养皿等。</p>
<p>该日记会持续更新，敬请关注。</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://helongquan.github.io/2019/07/15/magento2%E9%87%8D%E5%86%99%E6%A8%A1%E5%9D%97%E4%B9%8B%E9%87%8D%E5%86%99%E8%81%94%E7%B3%BB%E8%A1%A8%E5%8D%95%E7%9A%84%E5%AD%97%E6%AE%B5%E4%BF%A1%E6%81%AF-%E6%B7%BB%E5%8A%A0%E5%AD%97%E6%AE%B5%EF%BC%8C%E4%BF%AE%E6%94%B9%E5%AD%97%E6%AE%B5/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="泉哥">
      <meta itemprop="description" content="日记">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="鸢尾花序">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2019/07/15/magento2%E9%87%8D%E5%86%99%E6%A8%A1%E5%9D%97%E4%B9%8B%E9%87%8D%E5%86%99%E8%81%94%E7%B3%BB%E8%A1%A8%E5%8D%95%E7%9A%84%E5%AD%97%E6%AE%B5%E4%BF%A1%E6%81%AF-%E6%B7%BB%E5%8A%A0%E5%AD%97%E6%AE%B5%EF%BC%8C%E4%BF%AE%E6%94%B9%E5%AD%97%E6%AE%B5/" class="post-title-link" itemprop="url">magento2重写模块之重写联系表单的字段信息(添加字段，修改字段)</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2019-07-15 17:48:56" itemprop="dateCreated datePublished" datetime="2019-07-15T17:48:56+08:00">2019-07-15</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2020-10-11 11:57:59" itemprop="dateModified" datetime="2020-10-11T11:57:59+08:00">2020-10-11</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/magento2/" itemprop="url" rel="index"><span itemprop="name">magento2</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>没有联系表单，对于商城网站而言是不完整的。这通常是客户可以轻松删除/询问商店相关查询的唯一方法。因此，联系表单是在线商店成功的重要因素之一。</p>
<p>在本教程中，我将讨论如何在Magento 2联系表单中轻松添加自定义字段。出于本教程的目的，我将在联系人表单中添加一个Subject字段。不过，您可以使用本教程将自己的字段添加到商店的联系表单中。</p>
<p>为了遵循Magento的最佳开发实践，我将创建一个模块来重写核心文件。如果您不熟悉Magento 2自定义模块的创建过程，请参阅这篇优秀的指南:<a target="_blank" rel="noopener" href="https://magenticians.com/create-module-in-magento-2/">如何在Magento 2中创建自定义模块</a>。</p>
<p><strong>创建模块</strong></p>
<p>先来的magento2根目录，然后进入app/code，然后新建一个商家目录(vendor)，这里比如为<strong>Nocti</strong>，然后新建一个模块名：<strong>Modulecontact</strong>。</p>
<p>配置模块，在app/code/Nocti/Modulecontact/etc中创建module.xml，module.xml代码如下:</p>
<pre><code>&lt;?xml version=&quot;1.0&quot;?&gt;
&lt;config xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xsi:noNamespaceSchemaLocation=&quot;urn:magento:framework:Module/etc/module.xsd&quot;&gt;
&lt;module name=&quot;Nocti_Modulecontact&quot; setup_version=&quot;1.0.1&quot;&gt;
&lt;/module&gt;
&lt;/config&gt;</code></pre>
<p>注册模块，在app/code/Nocti/Modulecontact/中创建registration.php，粘贴如下代码到这个文件中。</p>
<pre><code>&lt;?php

\Magento\Framework\Component\ComponentRegistrar::register(
\Magento\Framework\Component\ComponentRegistrar::MODULE,
&#39;Nocti_Modulecontact&#39;,
__DIR__
);</code></pre>
<h2 id="重写并在Magento-2联系表单中添加自定义字段"><a href="#重写并在Magento-2联系表单中添加自定义字段" class="headerlink" title="重写并在Magento 2联系表单中添加自定义字段"></a>重写并在Magento 2联系表单中添加自定义字段</h2><p>从<strong>vendor/magento/module-contact/view/frontend/templates</strong>中复制form.phtml文件到<strong>app/code/Nocti/Modulecontact/view/frontend/templates</strong>目录中。</p>
<p>现在，要向联系表单添加一个名为<strong>Subject</strong>的新字段，打开拷贝过来的表单文件（<strong>form.phtml</strong>），并添加以下代码:</p>
<pre><code>&lt;div class=&quot;field subject&quot;&gt;
    &lt;label class=&quot;label&quot; for=&quot;subject&quot;&gt;&lt;span&gt;&lt;?php /* @escapeNotVerified */ echo __(&#39;Subject&#39;) ?&gt;&lt;/span&gt;&lt;/label&gt;
    &lt;div class=&quot;control&quot;&gt;
        &lt;input name=&quot;subject&quot; id=&quot;subject&quot; title=&quot;&lt;?php /* @escapeNotVerified */ echo __(&#39;Subject&#39;) ?&gt;&quot; value=&quot;&quot; class=&quot;input-text&quot; type=&quot;text&quot; data-validate=&quot;&#123;required:true&#125;&quot;/&gt;
    &lt;/div&gt;
&lt;/div&gt;</code></pre>
<p>最后你的这个form.phtml文件应该类似如下：</p>
<pre><code>&lt;?php
/**
 * Copyright © Magento, Inc. All rights reserved.
 * See COPYING.txt for license details.
 */

// @codingStandardsIgnoreFile

?&gt;
&lt;form class=&quot;form contact&quot;
      action=&quot;&lt;?php /* @escapeNotVerified */ echo $block-&gt;getFormAction(); ?&gt;&quot;
      id=&quot;contact-form&quot;
      method=&quot;post&quot;
      data-hasrequired=&quot;&lt;?php /* @escapeNotVerified */ echo __(&#39;* Required Fields&#39;) ?&gt;&quot;
      data-mage-init=&#39;&#123;&quot;validation&quot;:&#123;&#125;&#125;&#39;&gt;
    &lt;fieldset class=&quot;fieldset&quot;&gt;
        &lt;legend class=&quot;legend&quot;&gt;&lt;span&gt;&lt;?php /* @escapeNotVerified */ echo __(&#39;Write Us&#39;) ?&gt;&lt;/span&gt;&lt;/legend&gt;&lt;br /&gt;
        &lt;div class=&quot;field note no-label&quot;&gt;&lt;?php /* @escapeNotVerified */ echo __(&#39;Jot us a note and we’ll get back to you as quickly as possible.&#39;) ?&gt;&lt;/div&gt;
        &lt;div class=&quot;field name required&quot;&gt;
            &lt;label class=&quot;label&quot; for=&quot;name&quot;&gt;&lt;span&gt;&lt;?php /* @escapeNotVerified */ echo __(&#39;Name&#39;) ?&gt;&lt;/span&gt;&lt;/label&gt;
            &lt;div class=&quot;control&quot;&gt;
                &lt;input name=&quot;name&quot; id=&quot;name&quot; title=&quot;&lt;?php /* @escapeNotVerified */ echo __(&#39;Name&#39;) ?&gt;&quot; value=&quot;&lt;?php echo $block-&gt;escapeHtml($this-&gt;helper(&#39;Magento\Contact\Helper\Data&#39;)-&gt;getPostValue(&#39;name&#39;) ?: $this-&gt;helper(&#39;Magento\Contact\Helper\Data&#39;)-&gt;getUserName()) ?&gt;&quot; class=&quot;input-text&quot; type=&quot;text&quot; data-validate=&quot;&#123;required:true&#125;&quot;/&gt;
            &lt;/div&gt;
        &lt;/div&gt;
        &lt;div class=&quot;field email required&quot;&gt;
            &lt;label class=&quot;label&quot; for=&quot;email&quot;&gt;&lt;span&gt;&lt;?php /* @escapeNotVerified */ echo __(&#39;Email&#39;) ?&gt;&lt;/span&gt;&lt;/label&gt;
            &lt;div class=&quot;control&quot;&gt;
                &lt;input name=&quot;email&quot; id=&quot;email&quot; title=&quot;&lt;?php /* @escapeNotVerified */ echo __(&#39;Email&#39;) ?&gt;&quot; value=&quot;&lt;?php echo $block-&gt;escapeHtml($this-&gt;helper(&#39;Magento\Contact\Helper\Data&#39;)-&gt;getPostValue(&#39;email&#39;) ?: $this-&gt;helper(&#39;Magento\Contact\Helper\Data&#39;)-&gt;getUserEmail()) ?&gt;&quot; class=&quot;input-text&quot; type=&quot;email&quot; data-validate=&quot;&#123;required:true, &#39;validate-email&#39;:true&#125;&quot;/&gt;
            &lt;/div&gt;
        &lt;/div&gt;
        &lt;div class=&quot;field telephone&quot;&gt;
            &lt;label class=&quot;label&quot; for=&quot;telephone&quot;&gt;&lt;span&gt;&lt;?php /* @escapeNotVerified */ echo __(&#39;Phone Number&#39;) ?&gt;&lt;/span&gt;&lt;/label&gt;
            &lt;div class=&quot;control&quot;&gt;
                &lt;input name=&quot;telephone&quot; id=&quot;telephone&quot; title=&quot;&lt;?php /* @escapeNotVerified */ echo __(&#39;Phone Number&#39;) ?&gt;&quot; value=&quot;&lt;?php echo $block-&gt;escapeHtml($this-&gt;helper(&#39;Magento\Contact\Helper\Data&#39;)-&gt;getPostValue(&#39;telephone&#39;)) ?&gt;&quot; class=&quot;input-text&quot; type=&quot;text&quot; /&gt;
            &lt;/div&gt;
        &lt;/div&gt;

        // 刚刚添加的新的字段 开始
        &lt;div class=&quot;field subject&quot;&gt;
            &lt;label class=&quot;label&quot; for=&quot;subject&quot;&gt;&lt;span&gt;&lt;?php /* @escapeNotVerified */ echo __(&#39;Subject&#39;) ?&gt;&lt;/span&gt;&lt;/label&gt;
            &lt;div class=&quot;control&quot;&gt;
                &lt;input name=&quot;subject&quot; id=&quot;subject&quot; title=&quot;&lt;?php /* @escapeNotVerified */ echo __(&#39;Subject&#39;) ?&gt;&quot; value=&quot;&quot; class=&quot;input-text&quot; type=&quot;text&quot; data-validate=&quot;&#123;required:true&#125;&quot;/&gt;
            &lt;/div&gt;
        &lt;/div&gt;
        // 刚刚添加的新的字段 结束

        &lt;div class=&quot;field file required&quot;&gt;
            &lt;label class=&quot;label&quot; for=&quot;file&quot;&gt;&lt;span&gt;&lt;?php /* @escapeNotVerified */ echo __(&#39;File&#39;) ?&gt;&lt;/span&gt;&lt;/label&gt;
            &lt;div class=&quot;control&quot;&gt;
                &lt;input name=&quot;file&quot; id=&quot;file&quot; title=&quot;&lt;?php echo __(&#39;File&#39;) ?&gt;&quot; value=&quot;&quot; class=&quot;input-text&quot; type=&quot;file&quot; data-validate=&quot;&#123;required:true&#125;&quot;/&gt;
            &lt;/div&gt;
        &lt;/div&gt;
        &lt;div class=&quot;field comment required&quot;&gt;
            &lt;label class=&quot;label&quot; for=&quot;comment&quot;&gt;&lt;span&gt;&lt;?php /* @escapeNotVerified */ echo __(&#39;What’s on your mind?&#39;) ?&gt;&lt;/span&gt;&lt;/label&gt;
            &lt;div class=&quot;control&quot;&gt;
                &lt;textarea name=&quot;comment&quot; id=&quot;comment&quot; title=&quot;&lt;?php /* @escapeNotVerified */ echo __(&#39;What’s on your mind?&#39;) ?&gt;&quot; class=&quot;input-text&quot; cols=&quot;5&quot; rows=&quot;3&quot; data-validate=&quot;&#123;required:true&#125;&quot;&gt;&lt;?php echo $block-&gt;escapeHtml($this-&gt;helper(&#39;Magento\Contact\Helper\Data&#39;)-&gt;getPostValue(&#39;comment&#39;)) ?&gt;&lt;/textarea&gt;
            &lt;/div&gt;
        &lt;/div&gt;
        &lt;?php echo $block-&gt;getChildHtml(&#39;form.additional.info&#39;); ?&gt;
    &lt;/fieldset&gt;
    &lt;div class=&quot;actions-toolbar&quot;&gt;
        &lt;div class=&quot;primary&quot;&gt;
            &lt;input type=&quot;hidden&quot; name=&quot;hideit&quot; id=&quot;hideit&quot; value=&quot;&quot; /&gt;
            &lt;button type=&quot;submit&quot; title=&quot;&lt;?php /* @escapeNotVerified */ echo __(&#39;Submit&#39;) ?&gt;&quot; class=&quot;action submit primary&quot;&gt;
                &lt;span&gt;&lt;?php /* @escapeNotVerified */ echo __(&#39;Submit&#39;) ?&gt;&lt;/span&gt;
            &lt;/button&gt;
        &lt;/div&gt;
    &lt;/div&gt;
&lt;/form&gt;</code></pre>
<p>接下来，在<strong>app/code/Nocti/Modulecontact/view/frontend/layout</strong>中创建<strong>contact_index_index.xml</strong>文件，并粘贴下面代码以重写原始表单文件form.phtml的代码。</p>
<pre><code>&lt;?xml version=&quot;1.0&quot;?&gt;
&lt;page xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; layout=&quot;1column&quot; xsi:noNamespaceSchemaLocation=&quot;urn:magento:framework:View/Layout/etc/page_configuration.xsd&quot;&gt;    
   &lt;body&gt;     
      &lt;referenceBlock name=&quot;contactForm&quot; remove=&quot;true&quot;/&gt;   
       &lt;referenceContainer name=&quot;content&quot;&gt;
           &lt;block class=&quot;Magento\Contact\Block\ContactForm&quot; name=&quot;customContactForm&quot; template=&quot;Nocti_Modulecontact::form.phtml&quot; /&gt;
       &lt;/referenceContainer&gt;
   &lt;/body&gt;
&lt;/page&gt;</code></pre>
<p>最后文件的目录结构应该如下：</p>
<pre><code>app/code/Nocti/Modulecontact/etc/module.xml
app/code/Nocti/Modulecontact/registration.php
app/code/Nocti/Modulecontact/view/frontend/layout/contact_index_index.xml
app/code/Nocti/Modulecontact/view/frontend/templates/form.phtml</code></pre>
<p>直观点就是这样的（目录树结构）</p>
<pre><code>├── etc
│   └── module.xml
├── registration.php
└── view
    └── frontend
        ├── layout
        │   └── contact_index_index.xml
        └── templates
            └── form.phtml</code></pre>
<p>然后，可以登录到magento2所在的服务器中，来到magento2网站的根目录下，然后运行如下命令：</p>
<pre><code>php bin/magento setup:upgrade
php bin/magento setup:di:compile
php bin/magento setup:static-content:deploy
php bin/magento cache:clean
php bin/magento cache:flush</code></pre>
<p>然后，添加新的Magento 2电子邮件模板</p>
<p>打开店铺管理面板，进入<strong>MARKETING</strong>→<strong>Email Templates</strong>:</p>
<p><img src="https://i.imgur.com/KZiuFeW.png"></p>
<p>点击 Add New Template 按钮，现在进入Load default template部分，从template下拉菜单中选择Contact Form，点击Load template按钮:</p>
<p><img src="https://i.imgur.com/4KxhCPu.png"></p>
<p>输入您选择的模板名称。我使用我自己定义的表单名称:<strong>nocti custom contact form 1</strong></p>
<p><img src="https://i.imgur.com/6sYpdlI.png"></p>
<p>现在，为了能够收到从刚才新建的那个form.phtml表单中新添加的自定义字段（subject）的值，我们来到到<strong>Template Content</strong>字段那里，并在其中添加以下代码:</p>
<pre><code>&#123;&#123;trans "Subject: %subject" subject=$data.subject&#125;&#125;</code></pre>
<p><img src="https://i.imgur.com/RhX8X46.png"></p>
<p>原先已经有了一些字段，只需要拷贝其中的一条，然后把信息改成subject即可。当然不同的主题或者不同的版本有所不同，最好的办法就是复制已有的字段，然后把内容改成自己自定义的字段即可。</p>
<p>比如已有的可能有这么一些：</p>
<pre><code>&#123;&#123;trans "Name: %name" name=$data.name&#125;&#125;
&#123;&#123;trans "Email: %email" email=$data.email&#125;&#125;
&#123;&#123;trans "Phone Number: %telephone" telephone=$data.telephone&#125;&#125;

&#123;&#123;trans "Comment: %comment" comment=$data.comment&#125;&#125;</code></pre>
<p>最后，点击页面顶部的 Save Template.</p>
<h2 id="更改Magento-2电子邮件模板"><a href="#更改Magento-2电子邮件模板" class="headerlink" title="更改Magento 2电子邮件模板"></a>更改Magento 2电子邮件模板</h2><p>现在导航到<strong>STORES</strong>→<strong>Configuration</strong>，点击<strong>General</strong>选项卡下的<strong>Contacts</strong>:</p>
<p><img src="https://i.imgur.com/Jx5iGaX.png"></p>
<p>进入电子邮件选项部分，从电子邮件模板下拉选项中选择刚才新建的自定义联系表单模板:<strong>nocti custom contact form 1</strong></p>
<p><img src="https://i.imgur.com/vAyJ74G.png"></p>
<p>然后，点击页面顶部的 Save Config 按钮，保存。</p>
<p>要查看新修改后的表单，请在网站前台访问联系表单所在的页面，您将看到新添加的字段（subject）:</p>
<p><img src="https://i.imgur.com/yYSyHk4.png"></p>
<p>根据这个方法，我们可以根据自己的需要自定义的添加其他的字段，比如当选，多选，下拉等等。</p>
<blockquote>
<p>值得一起探讨的地方：笔者尝试着添加一个能够让用户在网站前台上传文件的字段，也就是<code>type=&quot;file&quot;</code>的字段，可是在电邮中没有收到这个字段上传的文件，这个可能需要另外做一些修改与设置，这个笔者将会在下一次更新中处理这个问题。</p>
</blockquote>
<p>当然，如果你财力雄厚，可以直接购买插件，笔者已经寻觅到了一个相对来说便宜的插件：<a target="_blank" rel="noopener" href="https://www.magesolution.com/advanced-form-for-magento-2.html">ADVANCED FORM FOR MAGENTO 2</a>，这个可以节省我们折腾的时间，安装好了就能用。</p>
<p>本文到此结束，后续会持续更新，敬请关注。</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://helongquan.github.io/2019/07/15/javascript%E5%9C%A8wordpress%E7%9A%84enfold%E4%B8%BB%E9%A2%98%E4%B8%8A%E7%94%A8%E4%BA%8E%E5%9B%BA%E5%AE%9A%E9%A1%B6%E9%83%A8%E6%A0%8F%E4%BF%A1%E6%81%AF%E7%9A%84%E8%BF%90%E7%94%A8%E8%AF%A6%E8%A7%A3/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="泉哥">
      <meta itemprop="description" content="日记">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="鸢尾花序">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2019/07/15/javascript%E5%9C%A8wordpress%E7%9A%84enfold%E4%B8%BB%E9%A2%98%E4%B8%8A%E7%94%A8%E4%BA%8E%E5%9B%BA%E5%AE%9A%E9%A1%B6%E9%83%A8%E6%A0%8F%E4%BF%A1%E6%81%AF%E7%9A%84%E8%BF%90%E7%94%A8%E8%AF%A6%E8%A7%A3/" class="post-title-link" itemprop="url">javascript在wordpress的enfold主题上用于固定顶部栏信息的运用详解</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2019-07-15 11:17:51" itemprop="dateCreated datePublished" datetime="2019-07-15T11:17:51+08:00">2019-07-15</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2020-10-11 11:57:57" itemprop="dateModified" datetime="2020-10-11T11:57:57+08:00">2020-10-11</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/javascript/" itemprop="url" rel="index"><span itemprop="name">javascript</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>本文主要讲解下javascript在解决wordpress的enfold主题上的一些小问题的应用，以便更加深刻地认识到javascript在解决web前端问题上的优势和便利性。</p>
<blockquote>
<p>问题：当鼠标滚动的时候，菜单栏虽然固定了，可是菜单栏上方的顶部栏没有固定显示在顶部，而是随着鼠标滚动而离开了视口，显得不是很方便地查看顶部的信息。</p>
</blockquote>
<p><img src="https://i.imgur.com/1tSxRxp.png"></p>
<p>顶部就是图例的最上方的黑色背景区域，我希望他跟菜单一起始终固定在窗口的最上方。</p>
<p>用过enfold主题的用户会知道这个菜单栏的固定是可以在后台设置的。</p>
<p>后台—enfold—Header—Header behavior，然后在这个tab下勾选Sticky Header这个复选框即可。</p>
<p><img src="https://i.imgur.com/XX7o1oi.png"></p>
<p>这样就解决了菜单栏固定的问题。</p>
<p>接下来就是把顶部的那个地方也跟着菜单栏这块一起固定。方法有两个：</p>
<blockquote>
<p>1.通过javascript的方法直接对这个地方写个固定的代码，监控鼠标滚动事件，当滚动条里窗口的距离不是零的时候就固定顶部栏。</p>
<p>2.通过javascript的dom操作，对顶部栏的内容进行动态的插入，当菜单栏固定的时候，把顶部的dom插入到菜单所在的区域，然后隐藏顶部栏的内容，否之则反。</p>
</blockquote>
<p>今天，我就来说说这第二个方法。</p>
<p><strong>javascript完整代码如下</strong>：</p>
<pre><code>&lt;script&gt;
window.onload=function()&#123;
    // 新建一个节点
    var new_dom = document.createElement(&quot;div&quot;);
    new_dom.setAttribute(&quot;id&quot;,&quot;new-head-meta&quot;);

    // 如果想为该节点分配多个class，写法如下
    // new_dom.classList.add(&quot;container&quot;,&quot;new_message&quot;,&quot;mydom&quot;);

    var header_info = document.querySelector(&quot;.phone-info&quot;);
    // 克隆顶部栏的dom保存到另外一个变量（newNode）中
    var newNode=header_info.cloneNode(true);
    // 把克隆的新节点插入到新建的节点中，当然这个不是必须的，您可以直接把克隆的这个dom插入到菜单栏dom节点中，笔者这里只是为了让克隆的节点外面再包一层div
    new_dom.insertBefore(newNode,new_dom.firstChild);

    // 获取菜单栏的dom节点
    var header_main = document.getElementById(&quot;header_main&quot;);
    // 把新创建的dom节点插入到菜单栏内部的最前面
    header_main.insertBefore(new_dom,header_main.firstChild);
&#125;
&lt;/script&gt;</code></pre>
<p>把这个js代码添加在公共头部或者公共底部即可。</p>
<p>剩下的就是css的处理了，由于滚动和在最顶部enfold的菜单栏的dom的class会动态的变化，所以笔者找到菜单固定后新生成的class（<code>header-scrolled</code>），这样就好办了，基本逻辑就是这样的：当滚动条在最上面的时候，头部不固定，那么顶部显示；当滚动条向下滚动的时候，菜单区动态添加了class，此时获取从顶部栏克隆来的dom，然后隐藏顶部栏的内容，并且插入克隆来的dom到菜单区域，并且显示出来，然后通过css把样式调整成跟顶部栏的样式一模一样。</p>
<p><strong>完整的css代码如下</strong>：</p>
<pre><code>#new-head-meta&#123;
    height: auto !important;
    overflow: hidden;
    background: #000;
&#125;
#new-head-meta .phone-info&#123;
   display:none;
   text-align:right;
   width:100%;
&#125;
#new-head-meta .phone-info a&#123;
   color:#fff !important;
&#125;
.header-scrolled #new-head-meta .phone-info&#123;
    display: block !important;
    width: 100%;
    margin: 0px auto;
    color: #fff;
    max-width: 1610px;
&#125;
#header_meta&#123;
      background:#000000 !important;
&#125;</code></pre>
<p>其实，cas代码大家可以自己调整。最终就是：</p>
<p><img src="https://i.imgur.com/lXtQm1g.png"></p>
<p>当然，还要考虑自适应，大家可以针对手机版调整下显示和隐藏的问题即可，这个都是可以再css这个层面完成的。</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://helongquan.github.io/2019/07/01/%E4%B8%BA%E9%A1%B5%E9%9D%A2%E6%B7%BB%E5%8A%A0%E6%B0%B4%E5%8D%B0%EF%BC%8C%E4%BB%A5%E5%8F%8A%E4%B8%8E%E6%89%93%E5%8D%B0%E9%A1%B5%E9%9D%A2%E6%B0%B4%E5%8D%B0%E6%B6%88%E5%A4%B1%E7%9A%84%E9%97%AE%E9%A2%98%E5%A5%8B%E6%88%98%E7%9A%84N%E4%B8%AA%E6%98%BC%E5%A4%9C%E6%97%A5%E8%AE%B0/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="泉哥">
      <meta itemprop="description" content="日记">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="鸢尾花序">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2019/07/01/%E4%B8%BA%E9%A1%B5%E9%9D%A2%E6%B7%BB%E5%8A%A0%E6%B0%B4%E5%8D%B0%EF%BC%8C%E4%BB%A5%E5%8F%8A%E4%B8%8E%E6%89%93%E5%8D%B0%E9%A1%B5%E9%9D%A2%E6%B0%B4%E5%8D%B0%E6%B6%88%E5%A4%B1%E7%9A%84%E9%97%AE%E9%A2%98%E5%A5%8B%E6%88%98%E7%9A%84N%E4%B8%AA%E6%98%BC%E5%A4%9C%E6%97%A5%E8%AE%B0/" class="post-title-link" itemprop="url">为页面添加水印，以及与打印页面水印消失的问题奋战的N个昼夜日记</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2019-07-01 16:55:57" itemprop="dateCreated datePublished" datetime="2019-07-01T16:55:57+08:00">2019-07-01</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2020-10-11 11:58:03" itemprop="dateModified" datetime="2020-10-11T11:58:03+08:00">2020-10-11</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/web%E5%89%8D%E7%AB%AF/" itemprop="url" rel="index"><span itemprop="name">web前端</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>由于项目需求，需要在页面上加水印，可是加上水印之后呢，点击打印页面的时候，水印又消失了，笔者想要的是：页面有水印，点击打印页面的时候，也有水印。</p>
<p>面对这个问题怎么办？</p>
<p>先说说为一个h5页面添加水印的思路：</p>
<ol>
<li>以图片的方式作为水印，然后通过css定位的方式定位到指定的位置。</li>
<li>以背景图片的形式作为水印。</li>
</ol>
<blockquote>
<p>项目的场景：笔者的页面数据都是通过js的方式动态显示出来的，包括部分的dom节点，因此处理起来还有几经波折，数据表格也是动态生成的。</p>
</blockquote>
<p>水印比这儿为了省事，就找了一个不错的插件，开发者很棒。github地址：<a target="_blank" rel="noopener" href="https://github.com/codingforme/jquery-watermark">https://github.com/codingforme/jquery-watermark</a></p>
<p>当然，你也可以从这里下载：<a target="_blank" rel="noopener" href="https://pan.baidu.com/s/1iO7un-HqjQB-v1vEXEgWhg">百度云盘</a>。提取码：7y2j </p>
<p>里面有示例。</p>
<h2 id="jquery-watermark"><a href="#jquery-watermark" class="headerlink" title="jquery-watermark"></a>jquery-watermark</h2><p>基于jquery的页面水印插件，可以使用多个水印文字，并且每行错开。</p>
<p>使用方式</p>
<pre><code>$(&#39;body&#39;).watermark(&#123;
    texts : [&quot;林俊杰&quot;, &quot;喜欢打Dota&quot;, &quot;但其实更喜欢田馥甄&quot;], //水印文字
    textColor : &quot;#d2d2d2&quot;, //文字颜色
    textFont : &#39;14px 微软雅黑&#39;, //字体
    width : 100, //水印文字的水平间距
    height : 100,  //水印文字的高度间距（低于文字高度会被替代）
    textRotate : -30 //-90到0， 负数值，不包含-90
&#125;);</code></pre>
<p>效果</p>
<p><img src="https://i.imgur.com/oByyIMf.png"></p>
<p>大家可以根据自己想要添加水印的位置自行替换body，以及水印文字，样式等等。</p>
<p>笔者为了方便引用，所以写成了一个函数：</p>
<pre><code>function ClickPrintToAddWaterMaker(dom_id)&#123;
    $(dom_id).watermark(&#123;
        texts : [&quot;林俊杰&quot;, &quot;喜欢打Dota&quot;, &quot;但其实更喜欢田馥甄&quot;], //水印文字
        textColor : &quot;#eee&quot;, //文字颜色
        textFont : &#39;16px 微软雅黑&#39;, //字体
        width : 250, //水印文字的水平间距
        height : 100,  //水印文字的高度间距（低于文字高度会被替代）
        textRotate : -30 //-90到0， 负数值，不包含-90
    &#125;);
&#125;</code></pre>
<p>然后就可以这样引用了，</p>
<pre><code>ClickPrintToAddWaterMaker(&quot;#dw_mjrline_detail&quot;);</code></pre>
<p>就这样，水印添加成功了。</p>
<p>笔者在这个页面还添加了一个打印页面的功能，笔者用的是js库文件：<a target="_blank" rel="noopener" href="http://www.jq22.com/jquery-info347">jqprint</a></p>
<p>配置也是相当简单的：</p>
<p>注意事项：</p>
<blockquote>
<p>2017-2-17更新（修改jQuery官方提供迁移辅助插件jquery-migrate-1.0.0.js失效地址）</p>
</blockquote>
<blockquote>
<p>请注意!很多朋友遇到 Cannot read property ‘opera’ of undefined错误问题是juqery版本兼容问题</p>
</blockquote>
<blockquote>
<p>解决方法：加入迁移辅助插件jquery-migrate-1.0.0.js可解决版本问题</p>
</blockquote>
<p>这个笔者也打包好了，大家可以这里下载：<a target="_blank" rel="noopener" href="https://pan.baidu.com/s/1GMUGOKfPG6hsRTCfQrhQRA">百度云盘</a>，也可以在网上下载这两个js文件。</p>
<p>用法：</p>
<pre><code>$(&quot;#printContainer&quot;).jqprint(&#123;
     debug: false, //如果是true则可以显示iframe查看效果（iframe默认高和宽都很小，可以再源码中调大），默认是false
     importCSS: true, //true表示引进原来的页面的css，默认是true。（如果是true，先会找$(&quot;link[media=print]&quot;)，若没有会去找$(&quot;link&quot;)中的css文件）
     printContainer: true, //表示如果原来选择的对象必须被纳入打印（注意：设置为false可能会打破你的CSS规则）。
     operaSupport: true//表示如果插件也必须支持歌opera浏览器，在这种情况下，它提供了建立一个临时的打印选项卡。默认是true
&#125;);</code></pre>
<p>比如说你想要点击后打印某个div中的内容：</p>
<pre><code>$(&quot;#download_export_data&quot;).click(function() &#123;
    // 选择要打印的dom区域
    $(&quot;#print_district&quot;).jqprint(&#123;
        operaSupport: true,
        importCSS: true,
        printContainer: true,
        debug: false
    &#125;);

&#125;);</code></pre>
<p>好的，到此为止，打印的问题也搞好了。</p>
<p>那么问题开始来了，当笔者在这个页面两个都添加了之后，水印并没有出现。当时就想：</p>
<ol>
<li><p>笔者在本地环境调试是没有问题的，那么笔者开始经过了地毯式排查，最后来到这个打印的插件的时候，笔者就打开插件的源文件，进去看了一下究竟：</p>
<pre><code> ...
 if (opt.importCSS)
 &#123;
     if ($(&quot;link[media=print]&quot;).length &gt; 0) 
     &#123;
         $(&quot;link[media=print]&quot;).each( function() &#123;
             doc.write(&quot;&lt;link type=&#39;text/css&#39; rel=&#39;stylesheet&#39; href=&#39;&quot; + $(this).attr(&quot;href&quot;) + &quot;&#39; media=&#39;print&#39; /&gt;&quot;);
         &#125;);
     &#125;
     else 
     &#123;
         $(&quot;link&quot;).each( function() &#123;
             doc.write(&quot;&lt;link type=&#39;text/css&#39; rel=&#39;stylesheet&#39; href=&#39;&quot; + $(this).attr(&quot;href&quot;) + &quot;&#39; /&gt;&quot;);
         &#125;);
     &#125;
 &#125;
 ...</code></pre>
</li>
</ol>
<p>当时笔者把css代码写在html页面中的，然后一想，是不是应该把控制打印页面的样式单独写成一个外部的样式文件，然后引入呢？笔者开始验证这个猜想。于是在头部中的这两个文件后面追加了一个<code>print.css</code>文件：</p>
<pre><code>&lt;!-- 手机版样式文件 --&gt;
&lt;link href=&quot;assets/css/style-mobile.css&quot; rel=&quot;stylesheet&quot; media=&quot;screen and (max-width: 640px)&quot;&gt;
&lt;!-- PC版样式文件 --&gt;
&lt;link href=&quot;assets/css/style-pc.css&quot; rel=&quot;stylesheet&quot; media=&quot;screen and (min-width: 641px)&quot;&gt;

&lt;!-- 打印页面样式文件 --&gt;
&lt;link href=&quot;assets/css/print.css&quot; rel=&quot;stylesheet&quot; media=&quot;print&quot;&gt;</code></pre>
<p><strong>注意：这里的media是print</strong>,更多的关于link的media属性可以网站<a target="_blank" rel="noopener" href="https://www.runoob.com/jsref/prop-link-media.html">搜索资料</a></p>
<p>因为打印页面只有PC版才能实现，所以为了样式保持一致，笔者直接把style-pc.css这个文件的代码拷贝到print.css中，然后保存，部署一下。</p>
<p>尽管这样做了，笔者还是发现打印页面的样式有点点影响，跟打印之前的样式有所差别，后来笔者想到了这个可能是由于笔者引入了（bootstrap,layout等）框架，框架的css文件引入的时候没有为打印预览页面样式单独设置，于是笔者又在print.css这个文件中，自己用css稍微美化了打印预览页面，把css代码追加到了print.css中。随着逐步美化，打印预览页面基本就可以跟打印之前的页面样式是一样的了。</p>
<p>可是样式问题虽然解决了，但是水印还是没有显示出来， 笔者根据浏览器的开发者工具排查，发现这个水印其实是用背景图片的方式实现的，所以又是一轮思考与探索，后来在打印预览页面（chrome浏览器默认是有打印预览的环节的，火狐没有，IE也是有的）看到了一个<strong>更多设置</strong>，然后点击展开里面有个<strong>选项</strong>，然后勾选 <strong>背景图形</strong>。自从这样应用了之后，发现原本笔者设计页面，在点击打印后，也变成了彩色的了，开始死活不是才是的还一直纳闷呢。</p>
<p><img src="https://i.imgur.com/sZ1IkbV.png"></p>
<blockquote>
<p>到目前为止，水印添加成功了，页面打印的问题也搞定了，打印预览页面跟页面的样式差异问题也修复了，水印背景图也显示出来了，最后还有一个问题就是在打印预览页面那里不可能让用户自己勾选背景图形这个选项吧？</p>
</blockquote>
<p>于是笔者经过网上查询了一下：</p>
<h2 id="设定css使chrome打印背景色"><a href="#设定css使chrome打印背景色" class="headerlink" title="设定css使chrome打印背景色"></a>设定css使chrome打印背景色</h2><p>在body中加入下面的代码即可：</p>
<pre><code>style=&quot;-webkit-print-color-adjust: exact;&quot;</code></pre>
<hr>
<p>作为补充，笔者再分享一下用图片的方式来实现水印的方案，问题跟前面分享的方式是一样的，都会碰到，只是笔者这次添加水印的原理是不一样的。</p>
<p>准备工作：</p>
<ol>
<li>创建print.css，用来为打印预览页面的图片的样式保存代码。</li>
<li>html结构</li>
</ol>
<p>啥也别说，先上代码：</p>
<p>HTML代码：</p>
<pre><code>&lt;div id=&quot;print_district&quot;&gt;
      &lt;div id=&quot;favorite_export_info&quot; class=&quot;favorite_export_container&quot;&gt;
        //动态渲染的页面数据放在这里。
      &lt;/div&gt;

      &lt;div id=&quot;two-bg&quot;&gt;
          // 水印的图片地址
          &lt;img src=&quot;assets/i/logo.jpg&quot;/&gt;
      &lt;/div&gt;

&lt;/div&gt;</code></pre>
<p>然后把css代码放在print.css中。</p>
<pre><code>#two-bg &#123;
    position: absolute;
    top: 0;
    right: 0;
    left: 0;
    z-index: 0;
    width: 100%;
    height: 100%;
&#125;
#two-bg img &#123;
    display: block;
    width: 300px;
    opacity: .2;
    transform: rotate(-20deg);
    -ms-transform: rotate(-20deg);
    -moz-transform: rotate(-20deg);
    -webkit-transform: rotate(-20deg);
    -o-transform: rotate(-20deg);
    margin: 0 auto;
    margin-top: 190px;
&#125;</code></pre>
<p>把不属于print.css的代码放在页面的style-pc.css中。</p>
<p>最后笔者粘贴一个demo：</p>
<pre><code>&lt;!DOCTYPE html&gt;
&lt;html lang=&quot;en&quot;&gt;

&lt;head&gt;
    &lt;meta charset=&quot;UTF-8&quot;&gt;
    &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot;&gt;
    &lt;meta http-equiv=&quot;X-UA-Compatible&quot; content=&quot;ie=edge&quot;&gt;
    &lt;title&gt;Document&lt;/title&gt;
    &lt;style type=&quot;text/css&quot; media=&quot;screen&quot;&gt;
        #two &#123;
            width: 100%;
            height: auto;
            margin: 0 auto;
            padding: 10px 15px;
            background-color: #FFFFFF;
            margin-top: 10px;
            position: relative;
            z-index: 1;
        &#125;
        #two-bg img &#123;
            display: none;
        &#125;
    &lt;/style&gt;
    &lt;style media=&quot;print&quot;&gt;
        #two-bg &#123;
            position: absolute;
            top: 0;
            right: 0;
            left: 0;
            z-index: 0;
            width: 100%;
            height: 100%;
        &#125;
        #two-bg img &#123;
            display: block;
            width: 300px;
            opacity: .2;
            transform: rotate(-20deg);
            -ms-transform: rotate(-20deg);
            -moz-transform: rotate(-20deg);
            -webkit-transform: rotate(-20deg);
            -o-transform: rotate(-20deg);
            margin: 0 auto;
            margin-top: 190px;
        &#125;
    &lt;/style&gt;
&lt;/head&gt;

&lt;body&gt;
    &lt;input type=&quot;button&quot; name=&quot;print&quot; value=&quot;print&quot; onclick=&quot;testprint();&quot; /&gt;
    &lt;!--使用定位添加水印，正常显示网页时不显示水印图片，点击打印预览时才显示--&gt;
    &lt;div id=&quot;two&quot;&gt;
        &lt;article&gt;
            阿Q没有家，住在未庄的土谷祠②里；也没有固定的职业，只给人家做短工，割麦便割麦，舂米便舂米，撑船便撑船。工作略长久时，他也或住在临时主人的家里，但一完就走了。所以，人们忙碌的时候，也还记起阿Q来，然而记起的是做工，并不是“行状”；一闲空，连阿Q都早忘却，更不必说“行状”了。只是有一回，有一个老头子颂扬说：“阿Q真能做！”这时阿Q赤着膊，懒洋洋的瘦 阿Q又很自尊，所有未庄的居民，全不在他眼神里，甚而至于对于两位“文童”③也有以为不值一笑的神情。夫文童者，将来恐怕要变秀才者也；赵太爷钱太爷大受居民的尊敬，除有钱之外，就因为都是文童的爹爹，而阿Q在精神上独不表格外的崇奉，他想：我的儿子会阔得多啦！加以进了几回城，阿Q自然更自负，然而他又很鄙薄城里人，譬如用三尺三寸宽的木板做成的凳子，未庄人叫“长凳”，他也叫“长凳”，城里人却叫“条凳”，他想：这是错的，可笑！油煎大头鱼，未庄都加上半寸长的葱叶，城里却加上切细的葱丝，他想：这也是错的，可笑！然而未庄人真是不见世面的可笑的乡下人呵，他们没有见过城里的煎鱼！ 谁知道阿Q采用怒目主义之后，未庄的闲人们便愈喜欢玩笑他。一见面，他们便假作吃惊的说：哙，亮起来了。” 
        &lt;/article&gt;
        &lt;!--图片透明 png 格式的图片--&gt;
        &lt;div id=&quot;two-bg&quot;&gt;
            &lt;img src=&quot;12.png&quot; /&gt;
            &lt;img src=&quot;12.png&quot; /&gt;
        &lt;/div&gt;
    &lt;/div&gt;
    &lt;script&gt;
    function testprint() &#123;
        var body = document.getElementById(&quot;two&quot;);
        document.body.innerHTML = body.innerHTML;
        window.print();
    &#125;
    // 打印后或取消后重载页面，因为打印预览弹框弹出后会导致样式爆炸
    window.onafterprint = function() &#123;
        location.reload()
    &#125;
    &lt;/script&gt;
&lt;/body&gt;

&lt;/html&gt;</code></pre>
<p>最后样式如下：</p>
<p><img src="https://i.imgur.com/hc2INGQ.png"></p>
<blockquote>
<p>切记：把控制打印预览页面的样式写在外部，然后通过link的方式引入进来然后对link的属性media那里的值设置为print</p>
</blockquote>
<p>本文会持续更新，敬请关注。</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://helongquan.github.io/2019/06/28/javascript%E7%9A%84%E7%BC%96%E7%A0%81%E8%A7%84%E8%8C%83/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="泉哥">
      <meta itemprop="description" content="日记">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="鸢尾花序">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2019/06/28/javascript%E7%9A%84%E7%BC%96%E7%A0%81%E8%A7%84%E8%8C%83/" class="post-title-link" itemprop="url">javascript的编码规范</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2019-06-28 14:57:18" itemprop="dateCreated datePublished" datetime="2019-06-28T14:57:18+08:00">2019-06-28</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2020-10-11 11:57:57" itemprop="dateModified" datetime="2020-10-11T11:57:57+08:00">2020-10-11</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/javascript/" itemprop="url" rel="index"><span itemprop="name">javascript</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="3-JavaScript规范"><a href="#3-JavaScript规范" class="headerlink" title="3. JavaScript规范"></a>3. JavaScript规范</h2><pre><code>    /**********************等级说明***********************/
    /*  1.阻断：执行发生严重错误导致中断，阻碍后续程序的执行  */
    /*  2.严重：语法错误导致执行出错                      */
    /*  3.主要：影响到性能等                             */
    /*  4.次要：可能影响到性能等                          */
    /*  5.建议：优化效率性能等                            */
    /*  6.图标表示支持sonar检测                          */    
    /**********************等级说明***********************/</code></pre>
<h2 id="3-1-js性能优化"><a href="#3-1-js性能优化" class="headerlink" title="3.1 js性能优化"></a>3.1 js性能优化</h2><h3 id="3-1-01-js代码要写在js文件中，在html的-lt-body-gt-lt-body-gt-最末尾的位置引入-主要"><a href="#3-1-01-js代码要写在js文件中，在html的-lt-body-gt-lt-body-gt-最末尾的位置引入-主要" class="headerlink" title="3.1.01 js代码要写在js文件中，在html的&lt;body&gt;&lt;/body&gt;最末尾的位置引入(主要)"></a>3.1.01 js代码要写在js文件中，在html的<code>&lt;body&gt;&lt;/body&gt;</code>最末尾的位置引入(主要)</h3><p><strong>规范明细</strong></p>
<p>99%的js代码应该写在外部的javascript文件中，在html文档<code>&lt;/body&gt;</code>标签之前引入以提高页面性能。</p>
<p><strong>正确示例</strong></p>
<pre><code>&lt;!DOCTYPE html&gt;
&lt;html&gt;
    &lt;head&gt;
        &lt;title&gt;这是示范页面&lt;/title&gt;
        &lt;meta http-equiv=&quot;Content-Type&quot; content=&quot;text/html; charset=UTF-8&quot;&gt;
        &lt;link href=&quot;css/base.css&quot; type=&quot;text/css&quot; rel=&quot;stylesheet&quot;/&gt;
    &lt;/head&gt;
    &lt;body id=&quot;body&quot;&gt;
        &lt;div id=&quot;ads-c1&quot;&gt;&lt;/div&gt;
        ...
        ...
        /*****************JS文件放置在&lt;/body&gt;标签之前位置*******************/
        &lt;script type=&quot;text/javascript&quot; src=&quot;js/jquery-1.8.0.js&quot;&gt;&lt;/script&gt;
        /*****************JS文件放置在&lt;/body&gt;标签之前位置*******************/
    &lt;/body&gt;
&lt;/html&gt;</code></pre>
<p><strong>好处</strong></p>
<ul>
<li>便于代码管理</li>
<li>html代码结构规范</li>
<li>不影响页面的渲染速度</li>
</ul>
<h3 id="Alt-text3-1-02-不要使用document-write-方式-主要"><a href="#Alt-text3-1-02-不要使用document-write-方式-主要" class="headerlink" title="Alt text3.1.02 不要使用document.write()方式(主要)"></a>Alt text3.1.02 不要使用document.write()方式(主要)</h3><p><strong>规范明细</strong></p>
<p>不要使用document.write()，可以使用console.log()或者document.createElement()代替</p>
<p><strong>错误示例</strong></p>
<pre><code>document.write(&quot;...&quot;)</code></pre>
<h3 id="Alt-text3-1-03-对象声明直接使用-主要"><a href="#Alt-text3-1-03-对象声明直接使用-主要" class="headerlink" title="Alt text3.1.03 对象声明直接使用 {}(主要)"></a>Alt text3.1.03 对象声明直接使用 {}(主要)</h3><p><strong>规范明细</strong></p>
<p>对象声明直接使用 {},开始的大括号放在声明的同一行,不要使用Object对象实例化方式，因为浏览器对常用的数据类型做了优化处理。</p>
<p><strong>正确示例</strong></p>
<pre><code>var book = &#123;
    title: &quot;Maintainable JavaScript&quot;,
    author: &quot;Nicholas C. Zakas&quot;
&#125;</code></pre>
<p><strong>错误示例</strong></p>
<pre><code>var book = new Object();
book.title = &quot;Maintainable JavaScript&quot;;
book.author = &quot;Nicholas C. Zakas&quot;;</code></pre>
<h3 id="Alt-text3-1-04-数组（Array）使用-声明-主要"><a href="#Alt-text3-1-04-数组（Array）使用-声明-主要" class="headerlink" title="Alt text3.1.04 数组（Array）使用[]声明(主要)"></a>Alt text3.1.04 数组（Array）使用[]声明(主要)</h3><p><strong>规范明细</strong></p>
<p>数组（Array）使用[]声明,不要使用Array对象实例化方式</p>
<p><strong>正确示例</strong></p>
<pre><code>var colors = [ &quot;red&quot;, &quot;green&quot;, &quot;blue&quot; ];
var numbers = [ 1, 2, 3, 4 ];   </code></pre>
<p><strong>错误示例</strong></p>
<pre><code>var colors = new Array(&quot;red&quot;, &quot;green&quot;, &quot;blue&quot;);
var numbers = new Array(1, 2, 3, 4);</code></pre>
<h3 id="Alt-text3-1-05-不要使用原始的包装数据类型（数字、字符串、布尔、数组、对象）申明变量-主要"><a href="#Alt-text3-1-05-不要使用原始的包装数据类型（数字、字符串、布尔、数组、对象）申明变量-主要" class="headerlink" title="Alt text3.1.05 不要使用原始的包装数据类型（数字、字符串、布尔、数组、对象）申明变量(主要)"></a>Alt text3.1.05 不要使用原始的包装数据类型（数字、字符串、布尔、数组、对象）申明变量(主要)</h3><p><strong>规范明细</strong></p>
<p>不要使用原始的包装数据类型申明变量</p>
<p><strong>正确示例</strong></p>
<pre><code>var str = &quot;This is a string object.&quot;; // 字符串
var num = 0; // 数字
var boolean = false; // 布尔
var numbers = [ 1, 2, 3, 4 ];    // 数组
var book = &#123; // 对象
    title: &quot;Maintainable JavaScript&quot;,
    author: &quot;Nicholas C. Zakas&quot;
&#125;</code></pre>
<p><strong>错误示例</strong></p>
<pre><code>var str = new String(&quot;This is a string object.&quot;); // 字符串
var num = new Number(0); // 数字
var boolean = new Boolean(); // 布尔
var numbers = new Array(1, 2, 3, 4); // 数组
var book = new Object(); // 对象
book.title = &quot;Maintainable JavaScript&quot;;
book.author = &quot;Nicholas C. Zakas&quot;;</code></pre>
<h3 id="Alt-text3-1-06-不要使用-eval-语句-主要"><a href="#Alt-text3-1-06-不要使用-eval-语句-主要" class="headerlink" title="Alt text3.1.06 不要使用 eval()语句(主要)"></a>Alt text3.1.06 不要使用 eval()语句(主要)</h3><p><strong>规范明细</strong></p>
<p>不要使用 eval()语句,因为它存在安全隐患，导致脚本注入攻击，并且在不同的浏览器引擎下还有效率上的差异</p>
<p><strong>正确示例</strong></p>
<pre><code>(function()&#123;
  var i,t=new Date,o=[];
  for(i=0;i&lt;1E7;i++)o[i]=i;
  console.log(new Date-t);
&#125;)();</code></pre>
<p><strong>错误示例</strong></p>
<pre><code>eval(
  &quot;var i,t=new Date,o=[];&quot;+
  &quot;for(i=0;i&lt;1E7;i++)o[i]=i;&quot;+
  &quot;console.log(new Date-t);&quot;
);</code></pre>
<h3 id="Alt-text3-1-07-不要使用with语句-主要"><a href="#Alt-text3-1-07-不要使用with语句-主要" class="headerlink" title="Alt text3.1.07 不要使用with语句(主要)"></a>Alt text3.1.07 不要使用with语句(主要)</h3><p><strong>规范明细</strong></p>
<p>不要使用with语句，该语句在’strict’模式下会出现问题。此外，使用with访问并操作对象属性的时候，如果修改不属于该对象里面的属性时，它会把操作作用域从对象内部扩展到全局域，以致可能更改对象外部申明的变量值，因此是不安全的。</p>
<p><strong>正确示例</strong></p>
<pre><code>var x = &#39;a&#39;;

var foo = &#123;
  y: 1
&#125;

foo.y = 4;
foo.x = 3;

print(foo.x + &quot; &quot; + x); // 显示: 3 a</code></pre>
<p><strong>错误示例</strong></p>
<pre><code>var x = &#39;a&#39;;

var foo = &#123;
  y: 1
&#125;

with (foo) &#123;  // 错误的使用方式
  y = 4;  // 更新 foo.y的值
  x = 3;  // 这里没有为foo对象新增x属性; 而是更新了外部作用域定义的变量x的值
&#125;
print(foo.x + &quot; &quot; + x); // 显示: undefined 3</code></pre>
<h3 id="3-1-08-不要在循环里面进行DOM操作。-主要"><a href="#3-1-08-不要在循环里面进行DOM操作。-主要" class="headerlink" title="3.1.08 不要在循环里面进行DOM操作。(主要)"></a>3.1.08 不要在循环里面进行DOM操作。(主要)</h3><p><strong>规范明细</strong></p>
<p>避免在循环里面进行Dom操作。</p>
<p><strong>正确示例</strong></p>
<pre><code>var htmlString = &quot;&quot;;

for(var i =0; i&lt;length;i++)&#123;
    htmlString += html;
&#125;

$(“.class”).append(htmlString);</code></pre>
<p><strong>错误示例</strong></p>
<pre><code>for(var i =0; i&lt;length;i++)&#123;
    $(“.class”).append(html);
&#125;</code></pre>
<h3 id="3-1-09-对于多个同性质同辈节点，避免逐个进行事件绑定。而应该利用冒泡原理，将事件委托给父节点。-主要"><a href="#3-1-09-对于多个同性质同辈节点，避免逐个进行事件绑定。而应该利用冒泡原理，将事件委托给父节点。-主要" class="headerlink" title="3.1.09 对于多个同性质同辈节点，避免逐个进行事件绑定。而应该利用冒泡原理，将事件委托给父节点。(主要)"></a>3.1.09 对于多个同性质同辈节点，避免逐个进行事件绑定。而应该利用冒泡原理，将事件委托给父节点。(主要)</h3><p><strong>规范明细</strong></p>
<p>对于多个同性质同辈节点，避免逐个进行事件绑定。而应该利用冒泡原理，将事件委托给父节点。</p>
<p><strong>正确示例</strong></p>
<pre><code>$(&quot;table&quot;).on(&quot;click&quot;,&quot;td&quot;,function()&#123;
    ...
&#125;)</code></pre>
<p><strong>错误示例</strong></p>
<pre><code>$(&quot;td&quot;).on(&quot;click&quot;,function()&#123;
    ...
&#125;)</code></pre>
<h3 id="3-1-10-事件委托要接近事件触发节点，避免将所有事件冒泡委托给body节点。-主要"><a href="#3-1-10-事件委托要接近事件触发节点，避免将所有事件冒泡委托给body节点。-主要" class="headerlink" title="3.1.10 事件委托要接近事件触发节点，避免将所有事件冒泡委托给body节点。(主要)"></a>3.1.10 事件委托要接近事件触发节点，避免将所有事件冒泡委托给body节点。(主要)</h3><p><strong>规范明细</strong></p>
<p>事件委托要接近事件触发节点，避免将所有事件冒泡委托给body节点。</p>
<p><strong>正确示例</strong></p>
<pre><code>$(&quot;table&quot;).on(&quot;click&quot;,&quot;td&quot;,function()&#123;
    ...
&#125;)</code></pre>
<p><strong>错误示例</strong></p>
<pre><code>$(&quot;body&quot;).on(&quot;click&quot;,&quot;td&quot;,function()&#123;
    ...
&#125;)</code></pre>
<h3 id="3-1-11-通常能用CSS实现的效果要避免使用JS来实现。CSS性能比JS要高。-次要"><a href="#3-1-11-通常能用CSS实现的效果要避免使用JS来实现。CSS性能比JS要高。-次要" class="headerlink" title="3.1.11 通常能用CSS实现的效果要避免使用JS来实现。CSS性能比JS要高。(次要)"></a>3.1.11 通常能用CSS实现的效果要避免使用JS来实现。CSS性能比JS要高。(次要)</h3><p><strong>规范明细</strong></p>
<p>通常能用CSS实现的效果要避免使用JS来实现。CSS性能比JS要高。</p>
<h3 id="Alt-text3-1-12-JS要避免直接写在页面中，加快页面加载速度。-主要"><a href="#Alt-text3-1-12-JS要避免直接写在页面中，加快页面加载速度。-主要" class="headerlink" title="Alt text3.1.12 JS要避免直接写在页面中，加快页面加载速度。(主要)"></a>Alt text3.1.12 JS要避免直接写在页面中，加快页面加载速度。(主要)</h3><p><strong>规范明细</strong></p>
<p>JS要避免直接写在页面中，加快页面加载速度。页面最多允许20行JS代码</p>
<h3 id="3-1-13-在开发中，简单的操作能用原生js实现的方式，就不要用三方的插件或者库实现-次要"><a href="#3-1-13-在开发中，简单的操作能用原生js实现的方式，就不要用三方的插件或者库实现-次要" class="headerlink" title="3.1.13 在开发中，简单的操作能用原生js实现的方式，就不要用三方的插件或者库实现(次要)"></a>3.1.13 在开发中，简单的操作能用原生js实现的方式，就不要用三方的插件或者库实现(次要)</h3><p><strong>规范明细</strong></p>
<p>在开发中，简单的操作能用原生js实现的方式，就不要用三方的插件或者库实现。因为原生的方式执行效率高很多</p>
<h3 id="3-1-14-进行JS合并压缩的，部署之前要进行压缩合并-主要"><a href="#3-1-14-进行JS合并压缩的，部署之前要进行压缩合并-主要" class="headerlink" title="3.1.14 进行JS合并压缩的，部署之前要进行压缩合并(主要)"></a>3.1.14 进行JS合并压缩的，部署之前要进行压缩合并(主要)</h3><p><strong>规范明细</strong></p>
<p>能够进行JS合并压缩的，部署之前要进行压缩合并。其一是为了减少请求HTTP请求数，提高性能；其二是为了对源码进行加密，降低被COPY的可能性。</p>
<h3 id="3-1-15-在项目满足条件的情况下，使用最新的jQuery版本。-建议"><a href="#3-1-15-在项目满足条件的情况下，使用最新的jQuery版本。-建议" class="headerlink" title="3.1.15 在项目满足条件的情况下，使用最新的jQuery版本。(建议)"></a>3.1.15 在项目满足条件的情况下，使用最新的jQuery版本。(建议)</h3><p><strong>规范明细</strong></p>
<p>jQuery的版本更新很快，我们应该总是使用最新的版本。因为新版本会改进性能，还有很多新功能。</p>
<h3 id="Alt-text3-1-16-在使用jQuery时，需要用缓存的方式，避免重复产生过多的jQuery对象。-次要"><a href="#Alt-text3-1-16-在使用jQuery时，需要用缓存的方式，避免重复产生过多的jQuery对象。-次要" class="headerlink" title="Alt text3.1.16 在使用jQuery时，需要用缓存的方式，避免重复产生过多的jQuery对象。(次要)"></a>Alt text3.1.16 在使用jQuery时，需要用缓存的方式，避免重复产生过多的jQuery对象。(次要)</h3><p><strong>规范明细</strong></p>
<p>在使用jQuery时，需要用缓存的方式，避免重复产生过多的jQuery对象。</p>
<p><strong>正确示例</strong></p>
<pre><code>var cached = $(&#39;#top&#39;); 
cached.find(&#39;p.classA&#39;); 
cached.find(&#39;p.classB&#39;); </code></pre>
<p><strong>错误示例</strong></p>
<pre><code>$(&#39;#top&#39;).find(&#39;p.classA&#39;); 
$(&#39;#top&#39;).find(&#39;p.classB&#39;); </code></pre>
<h3 id="3-1-17-使用jQuery时进行多重操作，采用其链式写法-次要"><a href="#3-1-17-使用jQuery时进行多重操作，采用其链式写法-次要" class="headerlink" title="3.1.17 使用jQuery时进行多重操作，采用其链式写法(次要)"></a>3.1.17 使用jQuery时进行多重操作，采用其链式写法(次要)</h3><p><strong>规范明细</strong></p>
<p>使用jQuery时进行多重操作，采用其链式写法</p>
<p><strong>正确示例</strong></p>
<pre><code>$(&#39;class&#39;).find(&#39;h3&#39;).eq(2).html(&#39;Hello&#39;); </code></pre>
<h3 id="3-1-18-在js操作DOM的过程中，要避免频繁改动DOM结构，可以先使用字符串方式组装html代码，再插到DOM结构中去-主要"><a href="#3-1-18-在js操作DOM的过程中，要避免频繁改动DOM结构，可以先使用字符串方式组装html代码，再插到DOM结构中去-主要" class="headerlink" title="3.1.18 在js操作DOM的过程中，要避免频繁改动DOM结构，可以先使用字符串方式组装html代码，再插到DOM结构中去(主要)"></a>3.1.18 在js操作DOM的过程中，要避免频繁改动DOM结构，可以先使用字符串方式组装html代码，再插到DOM结构中去(主要)</h3><p><strong>规范明细</strong></p>
<p>在js操作DOM的过程中，要避免频繁改动DOM结构，可以先使用字符串方式组装html代码，再插到DOM结构中去</p>
<p><strong>正确示例</strong></p>
<pre><code>var html = &#39;&lt;div id=&quot;d1&quot;&gt;&lt;span id=&quot;s1&quot;&gt;&lt;/span&gt;&lt;span id=&quot;s2&quot;&gt;&lt;/span&gt;&lt;/div&gt;&#39;; 
$(body).append(html); </code></pre>
<p><strong>错误示例</strong></p>
<pre><code>var d1 = $(&#39;&lt;div id=&quot;d1&quot;&gt;&lt;/div&gt;&#39;); 
$(body).append(d1); 
var s1 = &#39;&lt;span id=&quot;s1&quot;&gt;&lt;/span&gt;&#39;;
d1.append(s1); 
var s2 = &#39;&lt;span id=&quot;s2&quot;&gt;&lt;/span&gt;&#39;;
d1.append(s2); </code></pre>
<h3 id="3-1-19-使用-data-elem-key-value-的方式绑定数据-次要"><a href="#3-1-19-使用-data-elem-key-value-的方式绑定数据-次要" class="headerlink" title="3.1.19 使用$.data(elem,key,value)的方式绑定数据(次要)"></a>3.1.19 使用$.data(elem,key,value)的方式绑定数据(次要)</h3><p><strong>规范明细</strong></p>
<p>使用<code>$.data(elem,key,value)</code>的方式绑定数据。因为elem.data()方法是定义在jQuery函数的prototype对象上面的，而<code>$.data()</code>方法是定义jQuery函数上面的，调用的时候不从复杂的jQuery对象上调用，所以速度快得多。</p>
<p><strong>正确示例</strong></p>
<pre><code>$.data(elem,key,value)</code></pre>
<p><strong>错误示例</strong></p>
<pre><code>var elem = $(&#39;#elem&#39;); 
elem.data(key,value); </code></pre>
<h3 id="3-2-js命名规范"><a href="#3-2-js命名规范" class="headerlink" title="3.2 js命名规范"></a>3.2 js命名规范</h3><p>Alt text3.2.01 所有的布尔值的命名以’is’，’can’，’has’，’should’，’must’等状态词开头(主要)</p>
<p><strong>规范明细</strong></p>
<p>所有的布尔值的命名以’is’，’can’，’has’，’should’，’must’等状态词开头</p>
<p><strong>正确示例</strong></p>
<pre><code>var isValid = true， canExcute = false, hasDone = false, shouldHold = true, mustDo = false;</code></pre>
<h3 id="3-2-02-变量名和方法名要合乎逻辑，容易阅读者被理解-主要"><a href="#3-2-02-变量名和方法名要合乎逻辑，容易阅读者被理解-主要" class="headerlink" title="3.2.02 变量名和方法名要合乎逻辑，容易阅读者被理解(主要)"></a>3.2.02 变量名和方法名要合乎逻辑，容易阅读者被理解(主要)</h3><p><strong>规范明细</strong></p>
<p>变量名和方法名要合乎逻辑</p>
<p><strong>正确示例</strong></p>
<pre><code>var popUpWindowForAd;</code></pre>
<p><strong>错误示例</strong></p>
<pre><code>var myWindow</code></pre>
<h3 id="3-2-03-不要手动来压缩代码-for循环中的条件变量i除外-，变量应该足够长且有意义-主要"><a href="#3-2-03-不要手动来压缩代码-for循环中的条件变量i除外-，变量应该足够长且有意义-主要" class="headerlink" title="3.2.03 不要手动来压缩代码(for循环中的条件变量i除外)，变量应该足够长且有意义(主要)"></a>3.2.03 不要手动来压缩代码(for循环中的条件变量i除外)，变量应该足够长且有意义(主要)</h3><p><strong>规范明细</strong></p>
<p>不要手动来压缩代码(for循环中的条件变量i除外)，变量应该足够长且有意义</p>
<p><strong>正确示例</strong></p>
<pre><code>var blackCatSergeant;</code></pre>
<p><strong>错误示例</strong></p>
<pre><code>var bcs;</code></pre>
<h3 id="3-2-04-变量使用驼峰命名法（camel-case），使用名词结构-主要"><a href="#3-2-04-变量使用驼峰命名法（camel-case），使用名词结构-主要" class="headerlink" title="3.2.04 变量使用驼峰命名法（camel case），使用名词结构(主要)"></a>3.2.04 变量使用驼峰命名法（camel case），使用名词结构(主要)</h3><p><strong>规范明细</strong></p>
<p>以首字母小写单词开头，后续单词首字母均使用大写，使用名词结构</p>
<p><strong>正确示例</strong></p>
<pre><code>var thisIsMyName;</code></pre>
<p><strong>错误示例</strong></p>
<pre><code>var hello;</code></pre>
<h3 id="3-2-05-方法使用驼峰命名法，使用动宾结构-主要"><a href="#3-2-05-方法使用驼峰命名法，使用动宾结构-主要" class="headerlink" title="3.2.05 方法使用驼峰命名法，使用动宾结构(主要)"></a>3.2.05 方法使用驼峰命名法，使用动宾结构(主要)</h3><p><strong>规范明细</strong></p>
<p>以首字母小写单词开头，后续单词首字母均使用大写，使用动宾结构</p>
<p><strong>正确示例</strong></p>
<pre><code>function getName() &#123;
    ...
&#125;</code></pre>
<p><strong>错误示例</strong></p>
<pre><code>function hello() &#123;
    ...
&#125;</code></pre>
<h3 id="3-2-06-常量全部使用大写字母，字母之间使用下划线进行连接-主要"><a href="#3-2-06-常量全部使用大写字母，字母之间使用下划线进行连接-主要" class="headerlink" title="3.2.06 常量全部使用大写字母，字母之间使用下划线进行连接(主要)"></a>3.2.06 常量全部使用大写字母，字母之间使用下划线进行连接(主要)</h3><p><strong>规范明细</strong></p>
<p>常量全部使用大写字母，字母之间使用下划线进行连接，取名要明确表明此常量代表的意义</p>
<p><strong>正确示例</strong></p>
<pre><code>var MAX_COUNT = 10;
var URL = &quot;http://www.nczonline.net/&quot;;</code></pre>
<p><strong>错误示例</strong></p>
<pre><code>var maxCount = 10;</code></pre>
<h3 id="3-2-07-构造函数名使用帕斯卡命名法-主要"><a href="#3-2-07-构造函数名使用帕斯卡命名法-主要" class="headerlink" title="3.2.07 构造函数名使用帕斯卡命名法(主要)"></a>3.2.07 构造函数名使用帕斯卡命名法(主要)</h3><p><strong>规范明细</strong></p>
<p>所有单词均以大写字母开头</p>
<p><strong>正确示例</strong></p>
<pre><code>function Person(name) &#123;
    this.name = name;
&#125;

Person.prototype.sayName = function() &#123;
    alert(this.name);
&#125;;

var me = new Person(&quot;Nicholas&quot;);</code></pre>
<h3 id="Alt-text3-2-08-数字申明的变量的命名要体现出该变量是数字，不使用八进制声明数值，不省略小数点前后数字以免造成歧义。-严重"><a href="#Alt-text3-2-08-数字申明的变量的命名要体现出该变量是数字，不使用八进制声明数值，不省略小数点前后数字以免造成歧义。-严重" class="headerlink" title="Alt text3.2.08 数字申明的变量的命名要体现出该变量是数字，不使用八进制声明数值，不省略小数点前后数字以免造成歧义。(严重)"></a>Alt text3.2.08 数字申明的变量的命名要体现出该变量是数字，不使用八进制声明数值，不省略小数点前后数字以免造成歧义。(严重)</h3><p><strong>规范明细</strong></p>
<p>数字申明变量的命名要体现出该变量是数字，不使用八进制声明数值，不省略小数点前后数字以免造成歧义。</p>
<p><strong>正确示例</strong></p>
<pre><code>var count = 10; 
var price = 10.0;
var price = 10.00;  
//科学计数法
var num = 1e23;
//十六进制
var num = 0xA2;</code></pre>
<p><strong>错误示例</strong></p>
<pre><code>var temp = 10;
var price = 10.;
var price = .1;
// 八进制
var num = 010;</code></pre>
<h3 id="Alt-text3-2-09-不要使用js关键字作为申明的变量或者方法名称，如‘eval’，‘arguments’等-严重"><a href="#Alt-text3-2-09-不要使用js关键字作为申明的变量或者方法名称，如‘eval’，‘arguments’等-严重" class="headerlink" title="Alt text3.2.09 不要使用js关键字作为申明的变量或者方法名称，如‘eval’，‘arguments’等(严重)"></a>Alt text3.2.09 不要使用js关键字作为申明的变量或者方法名称，如‘eval’，‘arguments’等(严重)</h3><p><strong>规范明细</strong></p>
<p>不要使用js关键字作为申明的变量或者方法名称，常用的js关键字：</p>
<pre><code>eval break arguments delete function return typeof  
case do if switch var  
catch else in this void  
continue false instanceof throw while  
debugger finally new true with  
default for null try    </code></pre>
<p><strong>正确示例</strong></p>
<pre><code>result = 17;
args++;
++result;
var obj = &#123; set p(arg) &#123; &#125; &#125;;
var result;
try &#123; &#125; catch (args) &#123; &#125;
function x(arg) &#123; &#125;
function args() &#123; &#125; 
var y = function fun() &#123; &#125;; 
var f = new Function(&quot;args&quot;, &quot;return 17;&quot;);

function fun() &#123;
  if (arguments.length == 0) &#123;
    // do something
  &#125;
&#125;</code></pre>
<p><strong>错误示例</strong></p>
<pre><code>eval = 17; // 非法
arguments++; // 非法
++eval; // 非法
var obj = &#123; set p(arguments) &#123; &#125; &#125;; // 非法
var eval; // 非法
try &#123; &#125; catch (arguments) &#123; &#125; // 非法
function x(eval) &#123; &#125; // 非法
function arguments() &#123; &#125; // 非法
var y = function eval() &#123; &#125;; // 非法
var f = new Function(&quot;arguments&quot;, &quot;return 17;&quot;); // 非法

function fun() &#123;
  if (arguments.length == 0) &#123; // 非法
    // do something
  &#125;
&#125;</code></pre>
<h3 id="Alt-text3-2-10-将来可能成为js关键字（ECMAScript标准定义-的不能作为变量或者方法名称申明-严重"><a href="#Alt-text3-2-10-将来可能成为js关键字（ECMAScript标准定义-的不能作为变量或者方法名称申明-严重" class="headerlink" title="Alt text3.2.10 将来可能成为js关键字（ECMAScript标准定义)的不能作为变量或者方法名称申明(严重)"></a>Alt text3.2.10 将来可能成为js关键字（ECMAScript标准定义)的不能作为变量或者方法名称申明(严重)</h3><p><strong>规范明细</strong></p>
<p>将来可能成为js关键字（ECMAScript标准定义)的不能作为变量或者方法名称申明，未来可能使用的关键字：</p>
<pre><code>abstract double goto native static  
boolean enum implements package super  
byte export import private synchronized  
char extends int protected throws  
class final interface public transient  
const float long short volatile  
await exports let yield</code></pre>
<p><strong>正确示例</strong></p>
<pre><code>dbl = 17.00;
sht++;
++sht;</code></pre>
<p><strong>错误示例</strong></p>
<pre><code>double = 17; // 非法
short++; // 非法
++short; // 非法</code></pre>
<h3 id="Alt-text3-2-11-方法参数命名必须是唯一的-严重"><a href="#Alt-text3-2-11-方法参数命名必须是唯一的-严重" class="headerlink" title="Alt text3.2.11 方法参数命名必须是唯一的(严重)"></a>Alt text3.2.11 方法参数命名必须是唯一的(严重)</h3><p><strong>规范明细</strong></p>
<p>方法参数命名必须是唯一的</p>
<p><strong>正确示例</strong></p>
<pre><code>function compute(a, b, c) &#123;  
    ...
&#125;</code></pre>
<p><strong>错误示例</strong></p>
<pre><code>function compute(a, a, c) &#123; 
    ...
&#125;</code></pre>
<h3 id="Alt-text3-2-12-对象属性的命名必须是唯一不能重复的-严重"><a href="#Alt-text3-2-12-对象属性的命名必须是唯一不能重复的-严重" class="headerlink" title="Alt text3.2.12 对象属性的命名必须是唯一不能重复的(严重)"></a>Alt text3.2.12 对象属性的命名必须是唯一不能重复的(严重)</h3><p><strong>规范明细</strong></p>
<p>对象属性的命名必须是唯一不能重复的</p>
<p><strong>正确示例</strong></p>
<pre><code>var data = &#123;
  &quot;key&quot;: &quot;value&quot;,
  &quot;1&quot;: &quot;value&quot;,
  &quot;key2&quot;: &quot;value&quot;,
  &#39;key3&#39;: &quot;value&quot;,
  key4: &quot;value&quot;,
  \u006bey5: &quot;value&quot;,
  &quot;\u006bey6&quot;: &quot;value&quot;,
  &quot;\x6bey7&quot;: &quot;value&quot;,
  1b: &quot;value&quot;
&#125;</code></pre>
<p><strong>错误示例</strong></p>
<pre><code>var data = &#123;
  &quot;key&quot;: &quot;value&quot;,
  &quot;1&quot;: &quot;value&quot;,
  &quot;key&quot;: &quot;value&quot;, // 重复的 &quot;key&quot;
  &#39;key&#39;: &quot;value&quot;, // 重复的 &quot;key&quot;
  key: &quot;value&quot;, // 重复的 &quot;key&quot;
  \u006bey: &quot;value&quot;, // 重复的 &quot;key&quot;
  &quot;\u006bey&quot;: &quot;value&quot;, // 重复的 &quot;key&quot;
  &quot;\x6bey&quot;: &quot;value&quot;, // 重复的 &quot;key&quot;
  1: &quot;value&quot; // 重复的 &quot;1&quot;
&#125;</code></pre>
<h3 id="Alt-text3-2-13-变量需要在被使用前申明-主要"><a href="#Alt-text3-2-13-变量需要在被使用前申明-主要" class="headerlink" title="Alt text3.2.13 变量需要在被使用前申明(主要)"></a>Alt text3.2.13 变量需要在被使用前申明(主要)</h3><p><strong>规范明细</strong></p>
<p>变量需要在被使用前申明</p>
<p><strong>正确示例</strong></p>
<pre><code>var x = 1;

function fun() &#123;
    print(x);
    if (something) &#123;
        x = 42;
    &#125;
&#125;

fun(); // &quot;1&quot;</code></pre>
<p><strong>错误示例</strong></p>
<pre><code>var x = 1;

function fun()&#123;
    alert(x); 
    if(something) &#123;
        var x = 42; 
    &#125;
&#125;

fun(); // &quot;undefined&quot; 而不是 &quot;1&quot;</code></pre>
<h3 id="Alt-text3-2-14-在同一个作用域下面，不能用相同的名称命名方法和变量-主要"><a href="#Alt-text3-2-14-在同一个作用域下面，不能用相同的名称命名方法和变量-主要" class="headerlink" title="Alt text3.2.14 在同一个作用域下面，不能用相同的名称命名方法和变量(主要)"></a>Alt text3.2.14 在同一个作用域下面，不能用相同的名称命名方法和变量(主要)</h3><p><strong>规范明细</strong></p>
<p>在同一个作用域下面，不能用相同的名称命名方法和变量</p>
<p><strong>正确示例</strong></p>
<pre><code>var fun = function () &#123;
&#125;</code></pre>
<p><strong>错误示例</strong></p>
<pre><code>var fun;
function fun() &#123;
&#125;</code></pre>
<h3 id="Alt-text3-2-15-变量命名不要覆盖其他的变量，即不要重名-主要"><a href="#Alt-text3-2-15-变量命名不要覆盖其他的变量，即不要重名-主要" class="headerlink" title="Alt text3.2.15 变量命名不要覆盖其他的变量，即不要重名(主要)"></a>Alt text3.2.15 变量命名不要覆盖其他的变量，即不要重名(主要)</h3><p><strong>规范明细</strong></p>
<p>变量命名不要覆盖其他的变量，即不要重名</p>
<p><strong>正确示例</strong></p>
<pre><code>var a = &#39;foo&#39;;
var b = &#39;bar&#39;;

function f(e) &#123;
  var g = &quot;event&quot;;
&#125;</code></pre>
<p><strong>错误示例</strong></p>
<pre><code>var a = &#39;foo&#39;;
var a = &#39;bar&#39;; // 覆盖

function f(e) &#123;
  var e = &quot;event&quot;; // 覆盖
&#125;</code></pre>
<h2 id="3-3-js注释规范"><a href="#3-3-js注释规范" class="headerlink" title="3.3 js注释规范"></a>3.3 js注释规范</h2><h3 id="3-3-01-申明的变量-除for循环里面的循环次数控制变量-、方法（包括匿名方法）、对象，对象属性、插件、API、代码块（for循环，if…else…）等都需要有注释来解释-主要"><a href="#3-3-01-申明的变量-除for循环里面的循环次数控制变量-、方法（包括匿名方法）、对象，对象属性、插件、API、代码块（for循环，if…else…）等都需要有注释来解释-主要" class="headerlink" title="3.3.01 申明的变量(除for循环里面的循环次数控制变量)、方法（包括匿名方法）、对象，对象属性、插件、API、代码块（for循环，if…else…）等都需要有注释来解释(主要)"></a>3.3.01 申明的变量(除for循环里面的循环次数控制变量)、方法（包括匿名方法）、对象，对象属性、插件、API、代码块（for循环，if…else…）等都需要有注释来解释(主要)</h3><p><strong>规范明细</strong></p>
<p>申明的变量(除for循环里面的循环次数控制变量)、方法（包括匿名方法）、对象，对象属性、插件、api、代码块（for循环，if…else…）等都需要有注释来解释。</p>
<p><strong>正确示例</strong></p>
<pre><code>// 这是一个计数器
var count = 10;</code></pre>
<p><strong>错误示例</strong></p>
<pre><code>var count = 10;</code></pre>
<h3 id="3-3-02-单行注释或多行注释之前空一行-主要"><a href="#3-3-02-单行注释或多行注释之前空一行-主要" class="headerlink" title="3.3.02 单行注释或多行注释之前空一行(主要)"></a>3.3.02 单行注释或多行注释之前空一行(主要)</h3><p><strong>规范明细</strong></p>
<p>单行注释或多行注释之前空一行</p>
<p><strong>正确示例</strong></p>
<pre><code>function aFun() &#123; 

    // 注释...
    ......  
&#125;</code></pre>
<h3 id="3-3-03-单行注释-后空一格-次要"><a href="#3-3-03-单行注释-后空一格-次要" class="headerlink" title="3.3.03 单行注释//后空一格(次要)"></a>3.3.03 单行注释//后空一格(次要)</h3><p><strong>规范明细</strong></p>
<p>单行注释//后空一格</p>
<p><strong>正确示例</strong></p>
<pre><code>// Single-line comment  </code></pre>
<p><strong>错误示例</strong></p>
<pre><code>//Single-line comment</code></pre>
<h3 id="3-3-04-注释单独一行-注释前空一行，与下一行代码保持相同的缩进。在某行代码后添加行注释，需在代码后空一个4个空格缩进，字符长度不要超过最大字符数-120字符-。-主要"><a href="#3-3-04-注释单独一行-注释前空一行，与下一行代码保持相同的缩进。在某行代码后添加行注释，需在代码后空一个4个空格缩进，字符长度不要超过最大字符数-120字符-。-主要" class="headerlink" title="3.3.04 注释单独一行,注释前空一行，与下一行代码保持相同的缩进。在某行代码后添加行注释，需在代码后空一个4个空格缩进，字符长度不要超过最大字符数(120字符)。(主要)"></a>3.3.04 注释单独一行,注释前空一行，与下一行代码保持相同的缩进。在某行代码后添加行注释，需在代码后空一个4个空格缩进，字符长度不要超过最大字符数(120字符)。(主要)</h3><p><strong>规范明细</strong></p>
<p>注释单独一行(注释前空一行)，说明下一行或一段代码的用意，通常与下一行代码保持相同的缩进。在某行代码后添加行注释，需在代码后空一个tab缩进，这种情形下此行的字符长度不要超过最大字符，如果超过请使用上述风格。</p>
<p><strong>正确示例</strong></p>
<pre><code>if (condition) &#123;

    // if you made it here, then all security checks passed
    allowed();
&#125;

// if (condition) &#123;
//     doSomething();
//     thenDoSomethingElse();
// &#125;</code></pre>
<p><strong>错误示例</strong></p>
<pre><code>if (condition) &#123;
    // if you made it here, then all security checks passed
    allowed();
&#125;

var result = something + somethingElse;// somethingElse will never be null</code></pre>
<h3 id="3-3-05-多行注释以-开始，以-结束-主要"><a href="#3-3-05-多行注释以-开始，以-结束-主要" class="headerlink" title="3.3.05 多行注释以/*开始，以*/结束(主要)"></a>3.3.05 多行注释以<code>/*</code>开始，以<code>*/</code>结束(主要)</h3><p><strong>规范明细</strong></p>
<p>多行注释以<code>/*</code>开始，以<code>*/</code>结束</p>
<p><strong>正确示例</strong></p>
<pre><code>/*
* Yet another comment.
* Also goes to a second line.
*/

if (condition) &#123;

    /* 
     * if you made it here, 
     * then all security checks passed
     */
    allowed();
&#125;</code></pre>
<p><strong>错误示例</strong></p>
<pre><code>if (condition) &#123;
/* 
 * if you made it here, 
 * then all security checks passed
 */
    allowed();
&#125;</code></pre>
<h3 id="Alt-text3-3-06-不要使用HTML注释方式-主要"><a href="#Alt-text3-3-06-不要使用HTML注释方式-主要" class="headerlink" title="Alt text3.3.06 不要使用HTML注释方式(主要)"></a>Alt text3.3.06 不要使用HTML注释方式(主要)</h3><p><strong>规范明细</strong></p>
<p>不要使用HTML注释方式</p>
<p><strong>错误示例</strong></p>
<pre><code>&lt;!-- 注释 --&gt;</code></pre>
<h3 id="Alt-text3-3-07-注释语句不要跟在代码同一行后面，要在代码行上一行位置-次要"><a href="#Alt-text3-3-07-注释语句不要跟在代码同一行后面，要在代码行上一行位置-次要" class="headerlink" title="Alt text3.3.07 注释语句不要跟在代码同一行后面，要在代码行上一行位置(次要)"></a>Alt text3.3.07 注释语句不要跟在代码同一行后面，要在代码行上一行位置(次要)</h3><p><strong>规范明细</strong></p>
<p>注释语句不要跟在代码同一行后面，要在代码行上一行位置</p>
<p><strong>正确示例</strong></p>
<pre><code>// 在这个位置评论比较好
var a2 = b + c;</code></pre>
<p><strong>错误示例</strong></p>
<pre><code>var a1 = b + c; // 在这个位置评论不合适</code></pre>
<h2 id="3-4-js代码格式化规范"><a href="#3-4-js代码格式化规范" class="headerlink" title="3.4 js代码格式化规范"></a>3.4 js代码格式化规范</h2><h3 id="3-4-01-方法、对象、循环等开始花括号-要跟在方法、对象、循环等起始行的最后面，不要另起一行写-主要"><a href="#3-4-01-方法、对象、循环等开始花括号-要跟在方法、对象、循环等起始行的最后面，不要另起一行写-主要" class="headerlink" title="3.4.01 方法、对象、循环等开始花括号{要跟在方法、对象、循环等起始行的最后面，不要另起一行写(主要)"></a>3.4.01 方法、对象、循环等开始花括号<code>&#123;</code>要跟在方法、对象、循环等起始行的最后面，不要另起一行写(主要)</h3><p><strong>规范明细</strong></p>
<p>方法、对象、循环等开始花括号<code>&#123;</code>要跟在方法、对象、循环起始行的最后面，不要另起一行书写，不要与结束花括号<code>&#125;</code>保持在同一列。</p>
<p><strong>正确示例</strong></p>
<pre><code>function getData() &#123;
    return &#123;
        title: &quot;Maintainable JavaScript&quot;,
        author: &quot;Nicholas C. Zakas&quot;
    &#125;
&#125;</code></pre>
<p><strong>错误示例</strong></p>
<pre><code>function getData() 
&#123;
    return 
    &#123;
        title: &quot;Maintainable JavaScript&quot;,
        author: &quot;Nicholas C. Zakas&quot;
    &#125;
&#125;</code></pre>
<h3 id="Alt-text3-4-02-使用-分号-结束代码语句-主要"><a href="#Alt-text3-4-02-使用-分号-结束代码语句-主要" class="headerlink" title="Alt text3.4.02 使用 分号; 结束代码语句(主要)"></a>Alt text3.4.02 使用 分号; 结束代码语句(主要)</h3><p><strong>规范明细</strong></p>
<p>使用 ; 结束代码语句，不能用换行来结束</p>
<p><strong>正确示例</strong></p>
<pre><code>var name = &quot;Nicholas&quot;;
function sayName() &#123;
    alert(name);
&#125;   </code></pre>
<p><strong>错误示例</strong></p>
<pre><code>var name = &quot;Nicholas&quot;
function sayName() &#123;
    alert(name)
&#125;   </code></pre>
<h3 id="Alt-text3-4-03-每行代码的长度不超过120字符，含空格字符-主要"><a href="#Alt-text3-4-03-每行代码的长度不超过120字符，含空格字符-主要" class="headerlink" title="Alt text3.4.03 每行代码的长度不超过120字符，含空格字符(主要)"></a>Alt text3.4.03 每行代码的长度不超过120字符，含空格字符(主要)</h3><p><strong>规范明细</strong></p>
<p>一行代码过长影响可读性，虽然有些编辑器可以进行自动wrap，但代码也会出现长短差距太大的情况，在读代码理解逻辑时就会很不方便。所以请控制你的每一行代码在120个字符以内（包括空格，并非每行代码都要去数有多少字母，写到一个很长的语句的时候控制一下在120个字母左右换行。</p>
<h3 id="3-4-03-同一行方法调用或者表达式换行时，一定要在一个运算符或标点后进行换行-主要"><a href="#3-4-03-同一行方法调用或者表达式换行时，一定要在一个运算符或标点后进行换行-主要" class="headerlink" title="3.4.03 同一行方法调用或者表达式换行时，一定要在一个运算符或标点后进行换行(主要)"></a>3.4.03 同一行方法调用或者表达式换行时，一定要在一个运算符或标点后进行换行(主要)</h3><p><strong>规范明细</strong></p>
<p>同一行方法调用或者表达式换行时，一定要在一个运算符或标点后进行换行</p>
<p><strong>正确示例</strong></p>
<pre><code>if (isLeapYear &amp;&amp; isFebruary &amp;&amp; day == 29 &amp;&amp; itsYourBirthday &amp;&amp;
        noPlans) &#123;
    waitAnotherFourYears();
&#125;</code></pre>
<p><strong>错误示例</strong></p>
<pre><code>callAFunction(document, element, window, &quot;some string value&quot;, true, 123
    , navigator);</code></pre>
<h3 id="3-4-04-同一行方法调用或者表达式，换行后的另一行缩进8个空格-主要"><a href="#3-4-04-同一行方法调用或者表达式，换行后的另一行缩进8个空格-主要" class="headerlink" title="3.4.04 同一行方法调用或者表达式，换行后的另一行缩进8个空格(主要)"></a>3.4.04 同一行方法调用或者表达式，换行后的另一行缩进8个空格(主要)</h3><p><strong>规范明细</strong></p>
<p>同一行方法调用或者表达式，换行后的另一行缩进8个空格</p>
<p><strong>正确示例</strong></p>
<pre><code>callAFunction(document, element, window, &quot;some string value&quot;, true, 123,
        navigator);</code></pre>
<p><strong>错误示例</strong></p>
<pre><code>callAFunction(document, element, window, &quot;some string value&quot;, true, 123,
    navigator);</code></pre>
<h3 id="3-4-05-表达式赋值语句换行，第二行要与等号后面的第一个变量对齐-主要"><a href="#3-4-05-表达式赋值语句换行，第二行要与等号后面的第一个变量对齐-主要" class="headerlink" title="3.4.05 表达式赋值语句换行，第二行要与等号后面的第一个变量对齐(主要)"></a>3.4.05 表达式赋值语句换行，第二行要与等号后面的第一个变量对齐(主要)</h3><p><strong>规范明细</strong></p>
<p>表达式赋值语句换行，第二行要与等号后面的第一个变量对齐</p>
<p><strong>正确示例</strong></p>
<pre><code>var result = something + anotherThing + yetAnotherThing + somethingElse +
             anotherSomethingElse;</code></pre>
<h3 id="3-4-06-每个方法之间空一行-主要"><a href="#3-4-06-每个方法之间空一行-主要" class="headerlink" title="3.4.06 每个方法之间空一行(主要)"></a>3.4.06 每个方法之间空一行(主要)</h3><p><strong>规范明细</strong></p>
<p>每个方法之间空一行</p>
<p><strong>正确示例</strong></p>
<pre><code>function aFun() &#123;
    ...
&#125;

function bFun() &#123;
    ...
&#125;</code></pre>
<h3 id="3-4-07-在方法的局部变量声明和方法的语句之间空一行-次要"><a href="#3-4-07-在方法的局部变量声明和方法的语句之间空一行-次要" class="headerlink" title="3.4.07 在方法的局部变量声明和方法的语句之间空一行(次要)"></a>3.4.07 在方法的局部变量声明和方法的语句之间空一行(次要)</h3><p><strong>规范明细</strong></p>
<p>在方法的局部变量声明和方法的语句之间空一行</p>
<p><strong>正确示例</strong></p>
<pre><code>function aFun() &#123;
    var a = ...;
    var b = ...;

    ...
&#125;</code></pre>
<h3 id="3-4-08-运算符前后添加空格-主要"><a href="#3-4-08-运算符前后添加空格-主要" class="headerlink" title="3.4.08 运算符前后添加空格(主要)"></a>3.4.08 运算符前后添加空格(主要)</h3><p><strong>规范明细</strong></p>
<p>运算符前后添加空格</p>
<p><strong>正确示例</strong></p>
<pre><code>var found = (values[i] === item);</code></pre>
<p><strong>错误示例</strong></p>
<pre><code>var found=(values[i]===item);</code></pre>
<h3 id="3-4-09-圆括号内挨着圆括号的地方不添加空格-主要"><a href="#3-4-09-圆括号内挨着圆括号的地方不添加空格-主要" class="headerlink" title="3.4.09 圆括号内挨着圆括号的地方不添加空格(主要)"></a>3.4.09 圆括号内挨着圆括号的地方不添加空格(主要)</h3><p><strong>规范明细</strong></p>
<p>圆括号内挨着圆括号的地方不添加空格</p>
<p><strong>正确示例</strong></p>
<pre><code>var found = (values[i] === item);</code></pre>
<p><strong>错误示例</strong></p>
<pre><code>var found = ( values[i] === item );</code></pre>
<h3 id="Alt-text3-4-10-字符串申明统一使用双引号，如果字符串长度过长，请换行并使用“-”号进行字符串连接-建议"><a href="#Alt-text3-4-10-字符串申明统一使用双引号，如果字符串长度过长，请换行并使用“-”号进行字符串连接-建议" class="headerlink" title="Alt text3.4.10 字符串申明统一使用双引号，如果字符串长度过长，请换行并使用“+”号进行字符串连接(建议)"></a>Alt text3.4.10 字符串申明统一使用双引号，如果字符串长度过长，请换行并使用“+”号进行字符串连接(建议)</h3><p><strong>规范明细</strong></p>
<p>字符串申明统一使用双引号，如果字符串长度过长，请使用“+”号进行字符串连接</p>
<p><strong>正确示例</strong></p>
<pre><code>var longString = &quot;Here&#39;s a story of a man &quot; +
    &quot;named Brady.&quot;;</code></pre>
<p><strong>错误示例</strong></p>
<pre><code>var longString = &quot;Here&#39;s a story of a man named Brady.&quot;;</code></pre>
<h3 id="3-4-11-对象所有属性缩进4个空格，第一个属性上面空一行-次要"><a href="#3-4-11-对象所有属性缩进4个空格，第一个属性上面空一行-次要" class="headerlink" title="3.4.11 对象所有属性缩进4个空格，第一个属性上面空一行(次要)"></a>3.4.11 对象所有属性缩进4个空格，第一个属性上面空一行(次要)</h3><p><strong>规范明细</strong></p>
<p>对象所有属性缩进4个空格，第一个属性上面空一行；</p>
<p><strong>正确示例</strong></p>
<pre><code>var book = &#123;

    title: &quot;Maintainable JavaScript&quot;,
    author: &quot;Nicholas C. Zakas&quot;
&#125;;</code></pre>
<h3 id="3-4-12-所有属性的值都要对应一个没有引号的属性名，属性名后紧跟一个冒号（不加空格），冒号后加一个空格跟属性的值-主要"><a href="#3-4-12-所有属性的值都要对应一个没有引号的属性名，属性名后紧跟一个冒号（不加空格），冒号后加一个空格跟属性的值-主要" class="headerlink" title="3.4.12 所有属性的值都要对应一个没有引号的属性名，属性名后紧跟一个冒号（不加空格），冒号后加一个空格跟属性的值(主要)"></a>3.4.12 所有属性的值都要对应一个没有引号的属性名，属性名后紧跟一个冒号（不加空格），冒号后加一个空格跟属性的值(主要)</h3><p><strong>规范明细</strong></p>
<p>所有属性的值都要对应一个没有引号的属性名，属性名后紧跟一个冒号（不加空格），冒号后加一个空格跟属性的值</p>
<p><strong>正确示例</strong></p>
<pre><code>var book = &#123;

    title: &quot;Maintainable JavaScript&quot;,
    author: &quot;Nicholas C. Zakas&quot;
&#125;;</code></pre>
<h3 id="3-4-13-如果这个属性是方法，他的上下跟着不是方法的属性，上下均要空一行；一组相关的属性后可适当插入一个空行，增加可读性-建议"><a href="#3-4-13-如果这个属性是方法，他的上下跟着不是方法的属性，上下均要空一行；一组相关的属性后可适当插入一个空行，增加可读性-建议" class="headerlink" title="3.4.13 如果这个属性是方法，他的上下跟着不是方法的属性，上下均要空一行；一组相关的属性后可适当插入一个空行，增加可读性(建议)"></a>3.4.13 如果这个属性是方法，他的上下跟着不是方法的属性，上下均要空一行；一组相关的属性后可适当插入一个空行，增加可读性(建议)</h3><p><strong>规范明细</strong></p>
<p>如果这个属性是方法，他的上下跟着不是方法的属性，上下均要空一行；一组相关的属性后可适当插入一个空行，增加可读性</p>
<p><strong>正确示例</strong></p>
<pre><code>var object = &#123;

    key1: value1,
    key2: value2,

    func: function()&#123;
        // do something
    &#125;,

    key3: value3
&#125;;  </code></pre>
<h3 id="3-4-14-结束的大括号应该独占一行-主要"><a href="#3-4-14-结束的大括号应该独占一行-主要" class="headerlink" title="3.4.14 结束的大括号应该独占一行(主要)"></a>3.4.14 结束的大括号应该独占一行(主要)</h3><p><strong>规范明细</strong></p>
<p>结束的大括号应该独占一行</p>
<p><strong>正确示例</strong></p>
<pre><code>var book = &#123;

    title: &quot;Maintainable JavaScript&quot;,
    author: &quot;Nicholas C. Zakas&quot;
&#125;;</code></pre>
<h3 id="3-4-15-一个对象字面量作为一个参数传入方法中-开始花括号-与调用的方法名同行，属性按键值对方式，单独一行，结束花括号-单独一行-主要"><a href="#3-4-15-一个对象字面量作为一个参数传入方法中-开始花括号-与调用的方法名同行，属性按键值对方式，单独一行，结束花括号-单独一行-主要" class="headerlink" title="3.4.15 一个对象字面量作为一个参数传入方法中,开始花括号{与调用的方法名同行，属性按键值对方式，单独一行，结束花括号}单独一行(主要)"></a>3.4.15 一个对象字面量作为一个参数传入方法中,开始花括号{与调用的方法名同行，属性按键值对方式，单独一行，结束花括号}单独一行(主要)</h3><p><strong>规范明细</strong></p>
<p>一个对象字面量作为一个参数传入方法中,开始花括号{与调用的方法名同行，属性按键值对方式，单独一行，结束花括号}单独一行</p>
<p><strong>正确示例</strong></p>
<pre><code>doSomething(&#123;
    key1: value1,
    key2: value2
&#125;); </code></pre>
<h3 id="3-4-16-一个逻辑代码块之前空一行-建议"><a href="#3-4-16-一个逻辑代码块之前空一行-建议" class="headerlink" title="3.4.16 一个逻辑代码块之前空一行(建议)"></a>3.4.16 一个逻辑代码块之前空一行(建议)</h3><p><strong>规范明细</strong></p>
<p>一个逻辑代码块之前空一行</p>
<p><strong>正确示例</strong></p>
<pre><code>function aFun() &#123; 

    if (s.hasOwnProperty(p)) &#123;

        if (merge &amp;&amp; type == &#39;object&#39;) &#123;
            Y.mix(r[p], s[p]);
        &#125; else if (ov || !(p in r)) &#123;
            r[p] = s[p];
        &#125;
    &#125;
&#125;</code></pre>
<h3 id="Alt-text3-4-17-对于多层嵌套的if语句，要进行合并-主要"><a href="#Alt-text3-4-17-对于多层嵌套的if语句，要进行合并-主要" class="headerlink" title="Alt text3.4.17 对于多层嵌套的if语句，要进行合并(主要)"></a>Alt text3.4.17 对于多层嵌套的if语句，要进行合并(主要)</h3><p><strong>规范明细</strong></p>
<p>一个逻辑代码块之前空一行</p>
<p><strong>正确示例</strong></p>
<pre><code>if (x != null &amp;&amp; x === 2) &#123;
    ... 
&#125;</code></pre>
<p><strong>错误示例</strong></p>
<pre><code>if (x != null) &#123;
    if (x === 2) &#123;
        // ...
    &#125;
&#125;</code></pre>
<h3 id="Alt-text3-4-18-js文件行数不要太长，最大行数为1000行-主要"><a href="#Alt-text3-4-18-js文件行数不要太长，最大行数为1000行-主要" class="headerlink" title="Alt text3.4.18 js文件行数不要太长，最大行数为1000行(主要)"></a>Alt text3.4.18 js文件行数不要太长，最大行数为1000行(主要)</h3><p><strong>规范明细</strong></p>
<p>js文件行数不要太长，最大行数为1000行</p>
<h3 id="Alt-text3-4-19-js方法行数不要太长，最大行数为100行-主要"><a href="#Alt-text3-4-19-js方法行数不要太长，最大行数为100行-主要" class="headerlink" title="Alt text3.4.19 js方法行数不要太长，最大行数为100行(主要)"></a>Alt text3.4.19 js方法行数不要太长，最大行数为100行(主要)</h3><p><strong>规范明细</strong></p>
<p>js方法行数不要太长，最大行数为100行</p>
<h3 id="Alt-text3-4-20-一行的结尾处不要使用空格字符-主要"><a href="#Alt-text3-4-20-一行的结尾处不要使用空格字符-主要" class="headerlink" title="Alt text3.4.20 一行的结尾处不要使用空格字符(主要)"></a>Alt text3.4.20 一行的结尾处不要使用空格字符(主要)</h3><p><strong>规范明细</strong></p>
<p>一行的结尾处不要使用空格字符，因为这是垃圾代码，增加代码合并时候的冲突</p>
<h3 id="Alt-text3-4-21-不要使用已经申明名称的方法表达式进行赋值操作-主要"><a href="#Alt-text3-4-21-不要使用已经申明名称的方法表达式进行赋值操作-主要" class="headerlink" title="Alt text3.4.21 不要使用已经申明名称的方法表达式进行赋值操作(主要)"></a>Alt text3.4.21 不要使用已经申明名称的方法表达式进行赋值操作(主要)</h3><p><strong>规范明细</strong></p>
<p>不要使用已经申明名称的方法表达式进行赋值操作</p>
<p><strong>正确示例</strong></p>
<pre><code>fun = function()&#123;&#125;;</code></pre>
<p><strong>错误示例</strong></p>
<pre><code>f = function fun()&#123;&#125;;</code></pre>
<h3 id="Alt-text3-4-22-循环或者嵌套的代码块内部不能是空的，没有代码逻辑-主要"><a href="#Alt-text3-4-22-循环或者嵌套的代码块内部不能是空的，没有代码逻辑-主要" class="headerlink" title="Alt text3.4.22 循环或者嵌套的代码块内部不能是空的，没有代码逻辑(主要)"></a>Alt text3.4.22 循环或者嵌套的代码块内部不能是空的，没有代码逻辑(主要)</h3><p><strong>规范明细</strong></p>
<p>循环或者嵌套的代码块内部不能是空的，没有代码逻辑</p>
<p><strong>正确示例</strong></p>
<pre><code>for (var i = 0; i &lt; length; i++) &#123;//some code here&#125;</code></pre>
<p><strong>错误示例</strong></p>
<pre><code>for (var i = 0; i &lt; length; i++) &#123;&#125;</code></pre>
<h3 id="Alt-text3-4-23-只有while-do-for语句才能使用标记-主要"><a href="#Alt-text3-4-23-只有while-do-for语句才能使用标记-主要" class="headerlink" title="Alt text3.4.23 只有while, do, for语句才能使用标记(主要)"></a>Alt text3.4.23 只有while, do, for语句才能使用标记(主要)</h3><p><strong>规范明细</strong></p>
<p>只有while, do, for语句才能使用标记</p>
<p><strong>正确示例</strong></p>
<pre><code>myLabel:for (i = 0; i &lt; 10; i++) &#123;
    doSomething();
    if(i === 8)&#123;
        break myLabel;
    &#125;
&#125;</code></pre>
<h3 id="Alt-text3-4-24-当for循环缺省了初始计数和递增表达式，要使用while循环代替-次要"><a href="#Alt-text3-4-24-当for循环缺省了初始计数和递增表达式，要使用while循环代替-次要" class="headerlink" title="Alt text3.4.24 当for循环缺省了初始计数和递增表达式，要使用while循环代替(次要)"></a>Alt text3.4.24 当for循环缺省了初始计数和递增表达式，要使用while循环代替(次要)</h3><p><strong>规范明细</strong></p>
<p>当for循环缺省了初始计数和递增表达式，要使用while语句代替</p>
<p><strong>正确示例</strong></p>
<pre><code>while (condition) &#123; /*...*/ &#125;</code></pre>
<p><strong>错误示例</strong></p>
<pre><code>for (;condition;) &#123; /*...*/ &#125;</code></pre>
<h3 id="Alt-text3-4-25-控制流申明if-for-while-switch-try不要嵌套太多层-最多3曾-次要"><a href="#Alt-text3-4-25-控制流申明if-for-while-switch-try不要嵌套太多层-最多3曾-次要" class="headerlink" title="Alt text3.4.25 控制流申明if, for, while, switch, try不要嵌套太多层,最多3曾(次要)"></a>Alt text3.4.25 控制流申明if, for, while, switch, try不要嵌套太多层,最多3曾(次要)</h3><p><strong>规范明细</strong></p>
<p>控制流申明if, for, while, switch, try不要嵌套太多层</p>
<p><strong>错误示例</strong></p>
<pre><code>if (condition1) &#123;                  // 第一层
    /* ... */
    if (condition2) &#123;                // 第二层
        /* ... */
        for(int i = 0; i &lt; 10; i++) &#123;  // 第三层
            /* ... */
            if (condition4) &#123;            // 第四层已不合适
                if (condition5) &#123;          // 第五层已经达到极限了
                    /* ... */
                &#125;
                return;
            &#125;
        &#125;
    &#125;
&#125;</code></pre>
<h3 id="Alt-text3-4-26-字面量布尔值不能使用在条件表达式里面-次要"><a href="#Alt-text3-4-26-字面量布尔值不能使用在条件表达式里面-次要" class="headerlink" title="Alt text3.4.26 字面量布尔值不能使用在条件表达式里面(次要)"></a>Alt text3.4.26 字面量布尔值不能使用在条件表达式里面(次要)</h3><p><strong>规范明细</strong></p>
<p>字面量布尔值不能使用在条件表达式里面</p>
<p><strong>正确示例</strong></p>
<pre><code>if (booleanVariable) &#123; /* ... */ &#125;
if (!booleanVariable) &#123; /* ... */ &#125;
if (booleanVariable) &#123; /* ... */ &#125;
doSomething(true);</code></pre>
<p><strong>错误示例</strong></p>
<pre><code>if (booleanVariable == true) &#123; /* ... */ &#125;
if (booleanVariable != true) &#123; /* ... */ &#125;
if (booleanVariable || false) &#123; /* ... */ &#125;
doSomething(!false);</code></pre>
<h3 id="Alt-text3-4-27-在if…else…语句块里面，如果存在返回值是布尔类型的，直接返回if条件的表达式-次要"><a href="#Alt-text3-4-27-在if…else…语句块里面，如果存在返回值是布尔类型的，直接返回if条件的表达式-次要" class="headerlink" title="Alt text3.4.27 在if…else…语句块里面，如果存在返回值是布尔类型的，直接返回if条件的表达式(次要)"></a>Alt text3.4.27 在if…else…语句块里面，如果存在返回值是布尔类型的，直接返回if条件的表达式(次要)</h3><p><strong>规范明细</strong></p>
<p>在if…else…语句块里面，如果存在返回值是布尔类型的，直接返回if条件的表达式</p>
<p><strong>正确示例</strong></p>
<pre><code>return expression; 
return !!expression;</code></pre>
<p><strong>错误示例</strong></p>
<pre><code>if (expression) &#123;  
    return true;
&#125; else &#123;
    return false;
&#125;</code></pre>
<h3 id="Alt-text3-4-28-不要使用制表符-次要"><a href="#Alt-text3-4-28-不要使用制表符-次要" class="headerlink" title="Alt text3.4.28 不要使用制表符(次要)"></a>Alt text3.4.28 不要使用制表符(次要)</h3><p><strong>规范明细</strong></p>
<p>不要使用制表符</p>
<h3 id="Alt-text3-4-29-strict模式需要谨慎使用-建议"><a href="#Alt-text3-4-29-strict模式需要谨慎使用-建议" class="headerlink" title="Alt text3.4.29 strict模式需要谨慎使用(建议)"></a>Alt text3.4.29 strict模式需要谨慎使用(建议)</h3><p><strong>规范明细</strong></p>
<p>strict模式需要谨慎使用</p>
<p><strong>错误示例</strong></p>
<pre><code>function strict() &#123;
    &#39;use strict&#39;;
&#125;</code></pre>
<h3 id="Alt-text3-4-30-代码块中TODO标记的地方要被处理掉-建议"><a href="#Alt-text3-4-30-代码块中TODO标记的地方要被处理掉-建议" class="headerlink" title="Alt text3.4.30 代码块中TODO标记的地方要被处理掉(建议)"></a>Alt text3.4.30 代码块中TODO标记的地方要被处理掉(建议)</h3><p><strong>规范明细</strong></p>
<p>代码块中TODO标记的地方要被处理掉。</p>
<p><strong>错误示例</strong></p>
<pre><code>function doSomething() &#123;
    // TODO
&#125;</code></pre>
<h3 id="3-4-31-常量和配置变量应该放在文件顶部-主要"><a href="#3-4-31-常量和配置变量应该放在文件顶部-主要" class="headerlink" title="3.4.31 常量和配置变量应该放在文件顶部(主要)"></a>3.4.31 常量和配置变量应该放在文件顶部(主要)</h3><p><strong>规范明细</strong></p>
<p>常量和配置变量（比如：动画播放时间）应该放在文件顶部</p>
<h3 id="3-4-32-当某段代码逻辑存在重复出现的情况，或者在某个作用域下面存在超过8个方法的时候，需要将代码抽象成对象的方式编写，便于二次使用，也避免不必要的代码重复，使代码更具可读性和高效性。-主要"><a href="#3-4-32-当某段代码逻辑存在重复出现的情况，或者在某个作用域下面存在超过8个方法的时候，需要将代码抽象成对象的方式编写，便于二次使用，也避免不必要的代码重复，使代码更具可读性和高效性。-主要" class="headerlink" title="3.4.32 当某段代码逻辑存在重复出现的情况，或者在某个作用域下面存在超过8个方法的时候，需要将代码抽象成对象的方式编写，便于二次使用，也避免不必要的代码重复，使代码更具可读性和高效性。(主要)"></a>3.4.32 当某段代码逻辑存在重复出现的情况，或者在某个作用域下面存在超过8个方法的时候，需要将代码抽象成对象的方式编写，便于二次使用，也避免不必要的代码重复，使代码更具可读性和高效性。(主要)</h3><p><strong>规范明细</strong></p>
<p>当某段代码逻辑存在重复出现的情况，或者在某个作用域下面存在超过8个方法的时候，需要将代码抽象成对象的方式编写，便于二次使用，也避免不必要的代码重复，使代码更具可读性和高效性。</p>
<p><strong>正确示例</strong></p>
<pre><code>var arithmetic = &#123;
    add: function(a,b)&#123;
        return a+b;
    &#125;,
    minus: function(a,b)&#123;
        return a-b;
    &#125;
    ...
&#125;;</code></pre>
<p><strong>错误示例</strong></p>
<pre><code>function add(a,b)&#123;
    return a+b;
&#125;

function minus(a,b)&#123;
    return a-b;
&#125;</code></pre>
<h3 id="Alt-text3-4-33-当实现某个方法需要使用大量参数的时候，要将该功能封装成一个对象，以配置方式传入参数，而不是写在方法参数里面，方法的最大参数长度为7-主要"><a href="#Alt-text3-4-33-当实现某个方法需要使用大量参数的时候，要将该功能封装成一个对象，以配置方式传入参数，而不是写在方法参数里面，方法的最大参数长度为7-主要" class="headerlink" title="Alt text3.4.33 当实现某个方法需要使用大量参数的时候，要将该功能封装成一个对象，以配置方式传入参数，而不是写在方法参数里面，方法的最大参数长度为7(主要)"></a>Alt text3.4.33 当实现某个方法需要使用大量参数的时候，要将该功能封装成一个对象，以配置方式传入参数，而不是写在方法参数里面，方法的最大参数长度为7(主要)</h3><p><strong>规范明细</strong></p>
<p>当实现某个方法需要使用大量参数的时候，要将该功能封装成一个对象，以配置方式传入参数，而不是写在方法参数里面，方法的最大参数长度为7。</p>
<p><strong>正确示例</strong></p>
<pre><code>var option = &#123;
    url: &quot;&quot;,
    height: &quot;&quot;,
    width: &quot;&quot;,
    ...
&#125;;

function Window(option)&#123;
    this.option = option;
    ...
&#125;

var window = new Window(option);</code></pre>
<p><strong>错误示例</strong></p>
<pre><code>function setWindow(url,height,width...)&#123;
    ...
&#125;</code></pre>
<h3 id="3-4-34-使用面向对象的方式组织js代码-建议"><a href="#3-4-34-使用面向对象的方式组织js代码-建议" class="headerlink" title="3.4.34 使用面向对象的方式组织js代码(建议)"></a>3.4.34 使用面向对象的方式组织js代码(建议)</h3><p><strong>规范明细</strong></p>
<p>使用面向对象的方式组织你的js代码,参考： Object Literal/Singleton in Module Pattern或者 Object with constructors或者Javascript 面向对象编程.</p>
<p><strong>正确示例</strong></p>
<pre><code>var Cat = &#123;
    name: &#39;&#39;,
    color: &#39;&#39;
&#125;</code></pre>
<p><strong>错误示例</strong></p>
<pre><code>var name = &quot;&quot;, color = &quot;&quot;;</code></pre>
<h2 id="3-5-js代码防错-陷阱-规范"><a href="#3-5-js代码防错-陷阱-规范" class="headerlink" title="3.5 js代码防错(陷阱)规范"></a>3.5 js代码防错(陷阱)规范</h2><h3 id="3-5-01-不要进行浏览器嗅探方式判断浏览器客户端版本等信息，请使用特性检测，同时避免使用三方非特性检测方式判断浏览器客户端-主要"><a href="#3-5-01-不要进行浏览器嗅探方式判断浏览器客户端版本等信息，请使用特性检测，同时避免使用三方非特性检测方式判断浏览器客户端-主要" class="headerlink" title="3.5.01 不要进行浏览器嗅探方式判断浏览器客户端版本等信息，请使用特性检测，同时避免使用三方非特性检测方式判断浏览器客户端(主要)"></a>3.5.01 不要进行浏览器嗅探方式判断浏览器客户端版本等信息，请使用特性检测，同时避免使用三方非特性检测方式判断浏览器客户端(主要)</h3><p><strong>规范明细</strong></p>
<p>不要进行浏览器嗅探方式判断浏览器客户端版本等信息，请使用特性检测，同时避免使用三方非特性检测方式判断浏览器客户端，以免判断不准确</p>
<p><strong>错误示例</strong></p>
<pre><code>ie=!!window.VBArray
ie678=(&#39;a-b&#39;.split(/(~)/))[1]==&quot;b&quot;
ie678=0.9.toFixed(0)==&quot;0&quot;
iphone=/iphone/i.test(navigator.userAgent);
$.browser == ...</code></pre>
<h3 id="3-5-02-避免申明全局变量，防止全局空间命名冲突污染-主要"><a href="#3-5-02-避免申明全局变量，防止全局空间命名冲突污染-主要" class="headerlink" title="3.5.02 避免申明全局变量，防止全局空间命名冲突污染(主要)"></a>3.5.02 避免申明全局变量，防止全局空间命名冲突污染(主要)</h3><p><strong>规范明细</strong></p>
<p>避免申明全局变量，防止全局空间命名冲突污染</p>
<h3 id="Alt-text3-5-03-不要用null来判断方法的参数有没有提供，不要用null来判断未初始化的变量-严重"><a href="#Alt-text3-5-03-不要用null来判断方法的参数有没有提供，不要用null来判断未初始化的变量-严重" class="headerlink" title="Alt text3.5.03 不要用null来判断方法的参数有没有提供，不要用null来判断未初始化的变量(严重)"></a>Alt text3.5.03 不要用null来判断方法的参数有没有提供，不要用null来判断未初始化的变量(严重)</h3><p><strong>规范明细</strong></p>
<p>不要用null来判断方法的参数有没有提供，不要用null来判断未初始化的变量</p>
<p><strong>错误示例</strong></p>
<pre><code>//判断未初始化的变量
var person;
if (person != null) &#123;
    doSomething();
&#125;

// 判断值有没有传递
function doSomething(arg1, arg2, arg3, arg4) &#123;
    if (arg4 != null) &#123;
        doSomethingElse();
    &#125;
&#125;</code></pre>
<h3 id="Alt-text3-5-04-不要省略if-for-while-do…while-try…catch…finally语句大括号-严重"><a href="#Alt-text3-5-04-不要省略if-for-while-do…while-try…catch…finally语句大括号-严重" class="headerlink" title="Alt text3.5.04 不要省略if for while do…while try…catch…finally语句大括号(严重)"></a>Alt text3.5.04 不要省略if for while do…while try…catch…finally语句大括号(严重)</h3><p><strong>规范明细</strong></p>
<p>不要省略if for while do…while try…catch…finally语句大括号</p>
<p><strong>正确示例</strong></p>
<pre><code>if (condition) &#123;
    doSomething();
&#125;

错误示例

if(condition)
    doSomething();</code></pre>
<h3 id="3-5-05-变量定义在变量声明时进行初始化，未初始化的变量放在声明语句的最后-主要"><a href="#3-5-05-变量定义在变量声明时进行初始化，未初始化的变量放在声明语句的最后-主要" class="headerlink" title="3.5.05 变量定义在变量声明时进行初始化，未初始化的变量放在声明语句的最后(主要)"></a>3.5.05 变量定义在变量声明时进行初始化，未初始化的变量放在声明语句的最后(主要)</h3><p><strong>规范明细</strong></p>
<p>变量定义在变量声明时进行初始化，未初始化的变量放在声明语句的最后。</p>
<p><strong>正确示例</strong></p>
<pre><code>function doSomethingWithItems(items) &#123;
    var value = 10,
    result = value + 10，
    i, len;
    for(i=0, len=items.length; i &lt; len; i++) &#123;
        doSomething(items[i]);
    &#125;
&#125;   </code></pre>
<p><strong>错误示例</strong></p>
<pre><code>function doSomething() &#123;
    var result;
    var value;
    result = 10 + value;
    value = 10;
    return result;
&#125;</code></pre>
<h3 id="Alt-text3-5-06-比较运算使用-和-不要使用-和-避免类型转换时产生的错误-主要"><a href="#Alt-text3-5-06-比较运算使用-和-不要使用-和-避免类型转换时产生的错误-主要" class="headerlink" title="Alt text3.5.06 比较运算使用 === 和 !== , 不要使用 == 和 != 避免类型转换时产生的错误(主要)"></a>Alt text3.5.06 比较运算使用 === 和 !== , 不要使用 == 和 != 避免类型转换时产生的错误(主要)</h3><p><strong>规范明细</strong></p>
<p>比较运算使用 === 和 !== , 不要使用 == 和 != 避免类型转换时产生的错误。</p>
<p><strong>正确示例</strong></p>
<pre><code>var same = (a === b);</code></pre>
<p><strong>错误示例</strong></p>
<pre><code>var same = (a == b);</code></pre>
<h3 id="3-5-07-三目运算符用来进行条件性的赋值，不要用来当做简写的-if-语句使用-主要"><a href="#3-5-07-三目运算符用来进行条件性的赋值，不要用来当做简写的-if-语句使用-主要" class="headerlink" title="3.5.07 三目运算符用来进行条件性的赋值，不要用来当做简写的 if 语句使用(主要)"></a>3.5.07 三目运算符用来进行条件性的赋值，不要用来当做简写的 if 语句使用(主要)</h3><p><strong>规范明细</strong></p>
<p>三目运算符用来进行条件性的赋值，不要用来当做简写的 if 语句使用。</p>
<p><strong>正确示例</strong></p>
<pre><code>var value = condition ? value1 : value2;</code></pre>
<p><strong>错误示例</strong></p>
<pre><code>condition ? doSomething() : doSomethingElse();</code></pre>
<h3 id="3-5-08-使用闭包或者命名空间避免全局空间污染-严重"><a href="#3-5-08-使用闭包或者命名空间避免全局空间污染-严重" class="headerlink" title="3.5.08 使用闭包或者命名空间避免全局空间污染(严重)"></a>3.5.08 使用闭包或者命名空间避免全局空间污染(严重)</h3><p><strong>规范明细</strong></p>
<p>将一个js文件中的全部代码置于一个匿名函数调用中，或者使用命名空间划分，可以避免命名空间污染</p>
<p><strong>正确示例</strong></p>
<pre><code>//闭包方式
(function ()&#123;
    var someVar = null;
    // some code
&#125;());

//命名空间方式
var school = &#123;&#125;;
school = &#123;&#125;;
school.students = &#123;&#125;;
(function(students) &#123;
    // ..... 这里省略了代码 ......

    students.Subject = Subject;
    students.Grade = Grade;
&#125;)(school.students);</code></pre>
<h3 id="Alt-text3-5-09-不要使用“-”逗号来结束语句-阻断"><a href="#Alt-text3-5-09-不要使用“-”逗号来结束语句-阻断" class="headerlink" title="Alt text3.5.09 不要使用“,”逗号来结束语句(阻断)"></a>Alt text3.5.09 不要使用“,”逗号来结束语句(阻断)</h3><p><strong>规范明细</strong></p>
<p>不要使用“,”逗号来结束语句</p>
<p><strong>正确示例</strong></p>
<pre><code>var settings = &#123;
    &#39;foo&#39;  : oof,
    &#39;bar&#39; : rab
&#125;;</code></pre>
<p><strong>错误示例</strong></p>
<pre><code>var settings = &#123;
    &#39;foo&#39;  : oof,
    &#39;bar&#39; : rab,
&#125;;</code></pre>
<h3 id="Alt-text3-5-10-switch语句不能包含非case语句-严重"><a href="#Alt-text3-5-10-switch语句不能包含非case语句-严重" class="headerlink" title="Alt text3.5.10 switch语句不能包含非case语句(严重)"></a>Alt text3.5.10 switch语句不能包含非case语句(严重)</h3><p><strong>规范明细</strong></p>
<p>switch语句不能包含非case语句</p>
<p><strong>正确示例</strong></p>
<pre><code>switch (day) &#123;
    case MONDAY:
    case TUESDAY:
    case WEDNESDAY:
        doSomething();
        break;
    ...
&#125;</code></pre>
<p><strong>错误示例</strong></p>
<pre><code>switch (day) &#123;
  case MONDAY:
  case TUESDAY:
  WEDNESDAY:   // 取代 &quot;case WEDNESDAY&quot;
    doSomething();
    break;
  ...
&#125;</code></pre>
<h3 id="Alt-text3-5-11-switch语句需要以default语句结束-主要"><a href="#Alt-text3-5-11-switch语句需要以default语句结束-主要" class="headerlink" title="Alt text3.5.11 switch语句需要以default语句结束(主要)"></a>Alt text3.5.11 switch语句需要以default语句结束(主要)</h3><p><strong>规范明细</strong></p>
<p>switch语句需要以default结束</p>
<p><strong>正确示例</strong></p>
<pre><code>switch (param) &#123;
    case 0:
        doSomething();
        break;
    case 1:
        doSomethingElse();
        break;
    default:
        error();
        break;
&#125;</code></pre>
<p><strong>错误示例</strong></p>
<pre><code>switch (param) &#123;  
    case 0:
        doSomething();
        break;
    case 1:
        doSomethingElse();
        break;
&#125;
//缺少 default 语句</code></pre>
<h3 id="Alt-text3-5-12-switch语句中每个case-未使用return语句的-需要以break语句结束-主要"><a href="#Alt-text3-5-12-switch语句中每个case-未使用return语句的-需要以break语句结束-主要" class="headerlink" title="Alt text3.5.12 switch语句中每个case(未使用return语句的)需要以break语句结束(主要)"></a>Alt text3.5.12 switch语句中每个case(未使用return语句的)需要以break语句结束(主要)</h3><p><strong>规范明细</strong></p>
<p>switch语句中每个case(未使用return语句的)需要以break语句结束</p>
<p><strong>正确示例</strong></p>
<pre><code>switch (param) &#123;
    case 0:
        doSomething();
        break;
    case 1:
        doSomethingElse();
        break;
    default:
        error();
        break;
&#125;</code></pre>
<p><strong>错误示例</strong></p>
<pre><code>switch (param) &#123;  
    case 0:
        doSomething();
    case 1:
        doSomethingElse();
        break;
&#125;
//缺少 default 语句</code></pre>
<h3 id="Alt-text3-5-13-switch语句使用时至少要有3个case语句-包括最后的default语句-次要"><a href="#Alt-text3-5-13-switch语句使用时至少要有3个case语句-包括最后的default语句-次要" class="headerlink" title="Alt text3.5.13 switch语句使用时至少要有3个case语句(包括最后的default语句)(次要)"></a>Alt text3.5.13 switch语句使用时至少要有3个case语句(包括最后的default语句)(次要)</h3><p><strong>规范明细</strong></p>
<p>switch语句使用时至少要有3个case语句(包括最后的default语句)</p>
<p><strong>正确示例</strong></p>
<pre><code>switch (param) &#123;
    case 0:
        doSomething();
        break;
    case 1:
        doSomethingElse();
        break;
    default:
        error();
        break;
&#125;</code></pre>
<p><strong>错误示例</strong></p>
<pre><code>//一下的语句可以使用if...else...语句或者if...if...语句
switch (param) &#123;  
    case 0:
        doSomething();
        break;
    default :
        doSomethingElse();
        break;
&#125;</code></pre>
<h3 id="Alt-text3-5-14-方法体作为参数使用时，要保持与申明的方法在同一行-严重"><a href="#Alt-text3-5-14-方法体作为参数使用时，要保持与申明的方法在同一行-严重" class="headerlink" title="Alt text3.5.14 方法体作为参数使用时，要保持与申明的方法在同一行(严重)"></a>Alt text3.5.14 方法体作为参数使用时，要保持与申明的方法在同一行(严重)</h3><p><strong>规范明细</strong></p>
<p>方法体作为参数使用时，要保持与申明的方法在同一行，不能另起一行，以免造成错误或者歧义</p>
<p><strong>正确示例</strong></p>
<pre><code>var fn = function () &#123;
   //...
&#125;(function () &#123; // 在同一行
   //...
&#125;)();</code></pre>
<p><strong>错误示例</strong></p>
<pre><code>var fn = function () &#123;
   //...
&#125;

(function () &#123; // 未在同一行
   //...
&#125;)();</code></pre>
<h3 id="Alt-text3-5-15-对于对象属性使用for-…-in循环时，需要通过hasOwnProperty方法过滤非自身属性-继承而来的属性-主要"><a href="#Alt-text3-5-15-对于对象属性使用for-…-in循环时，需要通过hasOwnProperty方法过滤非自身属性-继承而来的属性-主要" class="headerlink" title="Alt text3.5.15 对于对象属性使用for … in循环时，需要通过hasOwnProperty方法过滤非自身属性(继承而来的属性)(主要)"></a>Alt text3.5.15 对于对象属性使用for … in循环时，需要通过hasOwnProperty方法过滤非自身属性(继承而来的属性)(主要)</h3><p><strong>规范明细</strong></p>
<p>对于对象属性使用for … in循环时，需要通过hasOwnProperty方法过滤非自身属性(继承而来的属性)</p>
<p><strong>正确示例</strong></p>
<pre><code>for (name in object) &#123;
    if (object.hasOwnProperty(name)) &#123;
        doSomething(name);
    &#125;
&#125;</code></pre>
<p><strong>错误示例</strong></p>
<pre><code>for (name in object) &#123;
    doSomething(name);  // 未过滤掉非自身属性
&#125;</code></pre>
<h3 id="Alt-text3-5-16-赋值语句不能作为参数或者条件传递-主要"><a href="#Alt-text3-5-16-赋值语句不能作为参数或者条件传递-主要" class="headerlink" title="Alt text3.5.16 赋值语句不能作为参数或者条件传递(主要)"></a>Alt text3.5.16 赋值语句不能作为参数或者条件传递(主要)</h3><p><strong>规范明细</strong></p>
<p>赋值语句不能作为参数或者条件传递</p>
<p><strong>正确示例</strong></p>
<pre><code>i = 42;
doSomething(i);   
doSomething(i == 42);  
if((i = something)&lt;=100)</code></pre>
<p><strong>错误示例</strong></p>
<pre><code>doSomething(i = 42);
if(i = 42)</code></pre>
<h3 id="Alt-text3-5-17-不要使用位运算符：-lt-lt-gt-gt-gt-gt-gt-amp-主要"><a href="#Alt-text3-5-17-不要使用位运算符：-lt-lt-gt-gt-gt-gt-gt-amp-主要" class="headerlink" title="Alt text3.5.17 不要使用位运算符：&lt;&lt;, &gt;&gt;, &gt;&gt;&gt;, ~, &amp;, |(主要)"></a>Alt text3.5.17 不要使用位运算符：<code>&lt;&lt;, &gt;&gt;, &gt;&gt;&gt;, ~, &amp;, |</code>(主要)</h3><p><strong>规范明细</strong></p>
<p>不要使用位运算符：<code>&lt;&lt;, &gt;&gt;, &gt;&gt;&gt;, ~, &amp;, |</code>，因为js的位运算效率不如其他如C等语言，并且在WEB应用里面鲜有这种使用场景。</p>
<p><strong>正确示例</strong></p>
<pre><code>if (a &amp;&amp; b) &#123; ... &#125;
var oppositeSigns = false;
if ( (x &lt; 0 &amp;&amp; y &gt; 0) || (x &gt; 0 &amp;&amp; y &lt; 0) ) &#123;
   oppositeSigns = true;
&#125;</code></pre>
<p><strong>错误示例</strong></p>
<pre><code>if (a &amp; b) &#123; ... &#125; //  &amp; 使用错误
var oppositeSigns = ((x ^ y) &lt; 0); //  有比这更清晰的方式验证</code></pre>
<h3 id="Alt-text3-5-18-不要使用逗号运算符-但排除特例-主要"><a href="#Alt-text3-5-18-不要使用逗号运算符-但排除特例-主要" class="headerlink" title="Alt text3.5.18 不要使用逗号运算符,但排除特例(主要)"></a>Alt text3.5.18 不要使用逗号运算符,但排除特例(主要)</h3><p><strong>规范明细</strong></p>
<p>不要使用逗号运算符,但排除特例</p>
<p><strong>正确示例</strong></p>
<pre><code>a +=  2;
i = a + b;</code></pre>
<p><strong>错误示例</strong></p>
<pre><code>i = a += 2, a + b; </code></pre>
<p><strong>特例</strong></p>
<pre><code>for(i = 0, j = 5; i &lt; 6; i++, j++) &#123; ... &#125;</code></pre>
<h3 id="Alt-text3-5-19-构造函数不要单纯在未申明实例的情况下使用-主要"><a href="#Alt-text3-5-19-构造函数不要单纯在未申明实例的情况下使用-主要" class="headerlink" title="Alt text3.5.19 构造函数不要单纯在未申明实例的情况下使用(主要)"></a>Alt text3.5.19 构造函数不要单纯在未申明实例的情况下使用(主要)</h3><p><strong>规范明细</strong></p>
<p>构造函数不要单纯在未申明实例的情况下使用，因为这时new创建的实例不能在任何地方被使用。</p>
<p><strong>正确示例</strong></p>
<pre><code>var something = new MyConstructor();</code></pre>
<p><strong>错误示例</strong></p>
<pre><code>new MyConstructor(); </code></pre>
<h3 id="Alt-text3-5-20-不要在循环体内部定义方法-主要"><a href="#Alt-text3-5-20-不要在循环体内部定义方法-主要" class="headerlink" title="Alt text3.5.20 不要在循环体内部定义方法(主要)"></a>Alt text3.5.20 不要在循环体内部定义方法(主要)</h3><p><strong>规范明细</strong></p>
<p>不要在循环内部创建方法，因为在循环体内部定义的方法只会有一个实例被定义，唯一改变的是方法的参数。</p>
<p><strong>错误示例</strong></p>
<pre><code>var funs = [];
for (var i = 0; i &lt; 13; i++) &#123;
    funs[i] = function() &#123; 
        return i;
    &#125;;
&#125;
print(funs[0]()); // 13 而不是 0
print(funs[1]()); // 13 而不是 1
print(funs[2]()); // 13 而不是 2
print(funs[3]()); // 13 而不是 3 </code></pre>
<h3 id="Alt-text3-5-21-不要定义重复名称的方法-主要"><a href="#Alt-text3-5-21-不要定义重复名称的方法-主要" class="headerlink" title="Alt text3.5.21 不要定义重复名称的方法(主要)"></a>Alt text3.5.21 不要定义重复名称的方法(主要)</h3><p><strong>规范明细</strong></p>
<p>不要定义重复名称的方法，因为前面定义的会被后面定义的覆盖掉</p>
<p><strong>正确示例</strong></p>
<pre><code>fun(); // prints &quot;foo&quot;

function fun() &#123;
  print(&quot;foo&quot;);
&#125;

fun(); // prints &quot;foo&quot;</code></pre>
<p><strong>错误示例</strong></p>
<pre><code>fun(); // &quot;bar&quot;

// 第一次申明的方法
function fun() &#123;
  print(&quot;foo&quot;);
&#125;

fun(); //  &quot;bar&quot;

// 新定义同名的方法，覆盖之前的方法
function fun() &#123;
  print(&quot;bar&quot;);
&#125;

fun(); // &quot;bar&quot;</code></pre>
<h3 id="Alt-text3-5-22-跳转语句后面不要接其他语句-主要"><a href="#Alt-text3-5-22-跳转语句后面不要接其他语句-主要" class="headerlink" title="Alt text3.5.22 跳转语句后面不要接其他语句(主要)"></a>Alt text3.5.22 跳转语句后面不要接其他语句(主要)</h3><p><strong>规范明细</strong></p>
<p>跳转语句后面不要接其他语句，因为之后的语句不会被执行到。</p>
<p><strong>正确示例</strong></p>
<pre><code>function(a) &#123;
    var i = 10;
    return i + a;
&#125;</code></pre>
<p><strong>错误示例</strong></p>
<pre><code>function(a) &#123;
    var i = 10;
    return i + a;
    i++;
&#125;</code></pre>
<h3 id="Alt-text3-5-23-一个循环体内部不要使用多个break或者continue关键字-主要"><a href="#Alt-text3-5-23-一个循环体内部不要使用多个break或者continue关键字-主要" class="headerlink" title="Alt text3.5.23 一个循环体内部不要使用多个break或者continue关键字(主要)"></a>Alt text3.5.23 一个循环体内部不要使用多个break或者continue关键字(主要)</h3><p><strong>规范明细</strong></p>
<p>一个循环体内部不要使用多个break或者continue关键字</p>
<p><strong>错误示例</strong></p>
<pre><code>for (var i = 1; i &lt;= 10; i++) &#123; 
    if (i % 2 == 0) &#123;
        continue;
    &#125;

    if (i % 3 == 0) &#123;
        continue;
    &#125;

    alert(&quot;i = &quot; + i);
&#125;</code></pre>
<h3 id="Alt-text3-5-24-方法中未被使用的参数要被移除-主要"><a href="#Alt-text3-5-24-方法中未被使用的参数要被移除-主要" class="headerlink" title="Alt text3.5.24 方法中未被使用的参数要被移除(主要)"></a>Alt text3.5.24 方法中未被使用的参数要被移除(主要)</h3><p><strong>规范明细</strong></p>
<p>方法中未被使用的参数要被移除</p>
<p><strong>正确示例</strong></p>
<pre><code>function doSomething( b) &#123;
    return compute(b);
&#125;</code></pre>
<p><strong>错误示例</strong></p>
<pre><code>function doSomething(a, b) &#123; // &quot;a&quot; 未被使用
    return compute(b);
&#125;</code></pre>
<h3 id="Alt-text3-5-25-未被使用的变量要被删除-主要"><a href="#Alt-text3-5-25-未被使用的变量要被删除-主要" class="headerlink" title="Alt text3.5.25 未被使用的变量要被删除(主要)"></a>Alt text3.5.25 未被使用的变量要被删除(主要)</h3><p><strong>规范明细</strong></p>
<p>未被使用的变量要被删除</p>
<p><strong>正确示例</strong></p>
<pre><code>function numberOfMinutes(hours) &#123;
    return hours * 60;
&#125;</code></pre>
<p><strong>错误示例</strong></p>
<pre><code>function numberOfMinutes(hours) &#123;
    var seconds = 0;   // seconds 未被使用
    return hours * 60;
&#125;</code></pre>
<h3 id="Alt-text3-5-26-无效的if…else…要被移除-主要"><a href="#Alt-text3-5-26-无效的if…else…要被移除-主要" class="headerlink" title="Alt text3.5.26 无效的if…else…要被移除(主要)"></a>Alt text3.5.26 无效的if…else…要被移除(主要)</h3><p><strong>规范明细</strong></p>
<p>无效的if…else…要被移除</p>
<p><strong>正确示例</strong></p>
<pre><code>doSomething();

doThirdThing();</code></pre>
<p><strong>错误示例</strong></p>
<pre><code>if (true) &#123; 
  doSomething();
&#125;
...
if (false) &#123; 
  doSomethingElse();
&#125;

if (!options || options === true) &#123; doThirdThing(); &#125;</code></pre>
<h2 id="3-6-用户体验及安全性规范"><a href="#3-6-用户体验及安全性规范" class="headerlink" title="3.6 用户体验及安全性规范"></a>3.6 用户体验及安全性规范</h2><h3 id="Alt-text3-6-01-生产环境下不要使用alert-…-方式提示信息-主要"><a href="#Alt-text3-6-01-生产环境下不要使用alert-…-方式提示信息-主要" class="headerlink" title="Alt text3.6.01 生产环境下不要使用alert(…)方式提示信息(主要)"></a>Alt text3.6.01 生产环境下不要使用alert(…)方式提示信息(主要)</h3><p><strong>规范明细</strong></p>
<p>生产环境下不要使用alert(…)方式提示信息，因为这种方式对用户体验不好，并且会阻碍后续程序的执行，还可能把敏感信息暴露给攻击者。可以使用自定义弹出框提示或者其他方式提示。开发环境下可以使用</p>
<h3 id="Alt-text3-6-02-生产环境下不要使用debug语句-主要"><a href="#Alt-text3-6-02-生产环境下不要使用debug语句-主要" class="headerlink" title="Alt text3.6.02 生产环境下不要使用debug语句(主要)"></a>Alt text3.6.02 生产环境下不要使用debug语句(主要)</h3><p><strong>规范明细</strong></p>
<p>生产环境下不要使用debug语句，因为容易在出现异常情况下给用户提示其无法理解的内容，也容易被攻击。</p>
<p><strong>错误示例</strong></p>
<pre><code>for (i = 1; i&lt;5; i++) &#123;
    // Print i to the Output window.
    Debug.write(&quot;loop index is &quot; + i);
    // Wait for user to resume.
    debugger;
&#125;</code></pre>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://helongquan.github.io/2019/06/27/jquery%E4%B8%8Eajax%E7%9B%B8%E7%BB%93%E5%90%88%E5%9C%A8%E8%A1%A8%E5%8D%95%E6%9F%A5%E8%AF%A2%E4%B8%AD%E7%9A%84%E5%BA%94%E7%94%A8%EF%BC%8C%E4%BB%A5%E5%8F%8Aajax%E5%9B%9E%E8%B0%83%E5%87%BD%E6%95%B0%E5%9C%A8%E6%95%B4%E4%B8%AA%E6%9F%A5%E8%AF%A2%E8%BF%87%E7%A8%8B%E4%B8%AD%E7%9A%84%E4%BD%93%E7%8E%B0/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="泉哥">
      <meta itemprop="description" content="日记">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="鸢尾花序">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2019/06/27/jquery%E4%B8%8Eajax%E7%9B%B8%E7%BB%93%E5%90%88%E5%9C%A8%E8%A1%A8%E5%8D%95%E6%9F%A5%E8%AF%A2%E4%B8%AD%E7%9A%84%E5%BA%94%E7%94%A8%EF%BC%8C%E4%BB%A5%E5%8F%8Aajax%E5%9B%9E%E8%B0%83%E5%87%BD%E6%95%B0%E5%9C%A8%E6%95%B4%E4%B8%AA%E6%9F%A5%E8%AF%A2%E8%BF%87%E7%A8%8B%E4%B8%AD%E7%9A%84%E4%BD%93%E7%8E%B0/" class="post-title-link" itemprop="url">jquery与ajax相结合在表单查询中的应用，以及ajax回调函数在整个查询过程中的体现，比如内容的过滤等。</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2019-06-27 19:24:49" itemprop="dateCreated datePublished" datetime="2019-06-27T19:24:49+08:00">2019-06-27</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2020-10-11 11:57:58" itemprop="dateModified" datetime="2020-10-11T11:57:58+08:00">2020-10-11</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/ajax/" itemprop="url" rel="index"><span itemprop="name">ajax</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>今天笔者分享一个关于ajax和jquery相互结合在表单查询中的应用，目的在于说明：回调函数在查询过程的中的应用，以提升整个过程的体验度和逻辑上的合理性。</p>
<p>我们先把HTML代码贴一下：</p>
<pre><code>&lt;!DOCTYPE html&gt;
&lt;html lang=&quot;en&quot;&gt;
&lt;head&gt;
    &lt;meta charset=&quot;UTF-8&quot;&gt;
    &lt;title&gt;Document&lt;/title&gt;
    &lt;link href=&quot;https://cdn.bootcss.com/twitter-bootstrap/3.4.1/css/bootstrap.min.css&quot; rel=&quot;stylesheet&quot;&gt;
    &lt;script src=&quot;https://code.jquery.com/jquery-3.2.1.min.js&quot;&gt;&lt;/script&gt;
    &lt;script src=&quot;https://cdn.bootcss.com/twitter-bootstrap/3.4.1/js/bootstrap.min.js&quot;&gt;&lt;/script&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;div class=&quot;container&quot;&gt;
        &lt;div class=&quot;alert alert-success&quot; role=&quot;alert&quot;&gt;物流单号跟踪查询系统：&lt;/div&gt;

            &lt;div class=&quot;input-group&quot;&gt;
              &lt;input type=&quot;text&quot; class=&quot;form-control&quot; id=&quot;billNos&quot; value=&quot;232559747358&quot; placeholder=&quot;测试单号232559747358&quot;&gt;
              &lt;span class=&quot;input-group-btn&quot; style=&quot;display: block;&quot;&gt;
                &lt;input class=&quot;btn btn-primary&quot; id=&quot;search&quot; type=&quot;button&quot; value=&quot;搜索&quot;&gt;
              &lt;/span&gt;
            &lt;/div&gt;

            &lt;br&gt;
        &lt;div id=&quot;result&quot;&gt;&lt;/div&gt;
    &lt;/div&gt;
&lt;/body&gt;
&lt;/html&gt;</code></pre>
<p>为了样式美观，笔者就引入了bootstrap，当然这个不是必须的。</p>
<p>这个就是一个输入框，然后一个按钮。</p>
<h2 id="必要的测试信息"><a href="#必要的测试信息" class="headerlink" title="必要的测试信息"></a>必要的测试信息</h2><p>为了测试方便，笔者就找了一个测试用的物流单号查询api。</p>
<p>笔者想要实现的一个场景：</p>
<blockquote>
<p>输入物流单号，点击查询按钮，当单号正确的时候，有数据显示出来，如果单号不正确或者单号为空的时候，就提示用户，当点击查询按钮的时候，按钮处于禁用状态以禁止用户再次提交，然后按钮文字显示查询中…等字样，当查询完后后按钮文本用新的文本替代，只要输入框内容没有发生变化，按钮始终处于禁用状态，当输入框有变化的时候按钮解除禁用状态，同时按钮文字回到最初的文本。</p>
</blockquote>
<p>这一系列该怎么一步一步的实现呢？跟着笔者来。</p>
<h3 id="良好的编码习惯"><a href="#良好的编码习惯" class="headerlink" title="良好的编码习惯"></a>良好的编码习惯</h3><p>为了不让一个操作显得太臃肿，笔者建议把每一个功能单独写成一个函数。</p>
<p>笔者先把实现完毕的所有js代码粘贴出来：</p>
<pre><code>&lt;script&gt;
        const domain = &quot;http://LSU.itdida.com&quot;;

        $(document).ready(function() &#123;

            $(&quot;#search&quot;).click(function() &#123;
                if ($(&quot;#billNos&quot;).val() == &#39;&#39; || $(&quot;#billNos&quot;).val() == null) &#123;
                    alert(&quot;订单号不能为空！&quot;);
                    return;
                &#125;
                getCost($(&quot;#billNos&quot;).val());
            &#125;);

            $(&#39;#billNos&#39;).bind(&#39;input propertychange&#39;, function() &#123;
                $(&quot;#search&quot;).removeAttr(&#39;disabled&#39;);
                $(&quot;#search&quot;).val(&quot;查询&quot;);
            &#125;);

        &#125;);

        function getUserToken()&#123;
            var token;
            $.ajax(&#123;
                  url: domain+&quot;/itdida-api/login?username=XXX&amp;password=123789&quot;,
                  type: &quot;POST&quot;,
                  async:false,
                  dataType: &quot;json&quot;,
                contentType: &quot;application/json&quot;,
                  success: function(res)&#123;
                      console.log(res.data);
                      token = res.data;
                  &#125;,
                  error: function (xhr, err, exception) &#123;
                    console.log(err);
                  &#125;
            &#125;);

            return token;
        &#125;

        function getCost(yundan_number)&#123;
            htmlobj = $.ajax(&#123;
                beforeSend: function()&#123;
                    $(&quot;#search&quot;).val(&quot;正在查询...&quot;);
                    $(&quot;#search&quot;).attr(&quot;disabled&quot;,&quot;disabled&quot;);
                &#125;,
                url: domain+&quot;/itdida-api/track?keHuDanHaoList=&quot;+yundan_number+&quot;&amp;access_token=&quot;+getUserToken(),
                type: &quot;POST&quot;,
                dataType: &quot;json&quot;,
                contentType: &quot;application/json&quot;,
                success: function (res) &#123;
                    if (typeof res === &#39;string&#39;) &#123;
                        res = JSON.parse(res);
                    &#125;
                    html_dom(res);
                &#125;,
                error: function (xhr, err, exception) &#123;
                    console.log(err);
                &#125;,
                complete: function()&#123;
                    setTimeout(function()&#123;
                        $(&quot;#search&quot;).val(&quot;查询完毕！&quot;);
                    &#125;, 500);
                &#125;
            &#125;);

        &#125;

        function html_dom(res)&#123;
            var html = &#39;&lt;div class=&quot;panel panel-default&quot;&gt;&#39;;
            html += &#39;&lt;div class=&quot;panel-heading&quot;&gt;&lt;p&gt;查询结果：&lt;/p&gt;&lt;/div&gt;&#39;;
            html += &#39;&lt;div class=&quot;panel-body&quot;&gt;&#39;;
            html += &#39;&lt;p&gt;客户单号：&#39;+res.data[0].keHuDanHao+&#39;&lt;/p&gt;&#39;;
            html += &#39;&lt;p&gt;状态码：&#39;+res.statusCode+&#39;&lt;/p&gt;&#39;;
            html += &#39;&lt;p&gt;订单状态：&#39;+res.data[0].message+&#39;&lt;/p&gt;&#39;;
            html += &#39;&lt;/div&gt;&#39;;
            html += &#39;&lt;table class=&quot;table&quot;&gt;&#39;;
            html += &#39;&lt;tr&gt;&#39;;
            html += &#39;&lt;th&gt;日期&lt;/th&gt;&#39;;
            html += &#39;&lt;th&gt;描述&lt;/th&gt;&#39;;
            html += &#39;&lt;th&gt;位置&lt;/th&gt;&#39;;
            html += &#39;&lt;/tr&gt;&#39;;
            for (var i = 0; i &lt; res.data[0].trackList.length; i++) &#123;
                var trackList = res.data[0].trackList;
                html += &#39;&lt;tr&gt;&#39;;
                html += &#39;&lt;td&gt;&#39;;
                html += trackList[i].date;
                html += &#39;&lt;/td&gt;&#39;;
                html += &#39;&lt;td&gt;&#39;;
                html += trackList[i].miaoShu;
                html += &#39;&lt;/td&gt;&#39;;
                html += &#39;&lt;td&gt;&#39;;
                if (trackList[i].weiZhi == &#39;&#39;) &#123;
                    html += &#39;-&#39;;
                &#125;else&#123;
                    html += trackList[i].weiZhi;
                &#125;
                html += &#39;&lt;/td&gt;&#39;;
                html += &#39;&lt;/tr&gt;&#39;;
            &#125;
            html += &#39;&lt;/table&gt;&#39;;
            html += &#39;&lt;/div&gt;&#39;;

            if (res.data[0].code != 200) &#123;
                $(&quot;#result&quot;).html(&#39;&lt;div class=&quot;alert alert-danger&quot; role=&quot;alert&quot;&gt;&#39;+res.data[0].message+&#39;&lt;/div&gt;&#39;);
            &#125;else&#123;
                $(&quot;#result&quot;).html(html);
            &#125;
        &#125;

&lt;/script&gt;</code></pre>
<p>实现的最终效果截图如下：</p>
<p><img src="https://i.imgur.com/ncASgx5.png"></p>
<p>现在我们一步一步的剖析这个js代码。</p>
<p>1.首先，定义一个变量，保存一个使用频率较高的值，这里笔者为了避免代码的重复，就把域名这个用domain这个变量保存起来。</p>
<p>2.接着根据该api的请求规则，先要获取token才能进行查询运单号，所以笔者用一个函数先获取token，通过ajax的方式来获取这个token，为了让该函数能够返回值，只能禁用ajax的异步请求了，函数如下：</p>
<pre><code>function getUserToken()&#123;
    var token;
    $.ajax(&#123;
          url: domain+&quot;/itdida-api/login?username=XXX&amp;password=123789&quot;,
          type: &quot;POST&quot;,
          async:false,  //禁用异步加载才能让token变量获取到res.data的值
          dataType: &quot;json&quot;,
          contentType: &quot;application/json&quot;,
          success: function(res)&#123;
              console.log(res.data);
              token = res.data;
          &#125;,
          error: function (xhr, err, exception) &#123;
              console.log(err);
            &#125;
    &#125;);

    return token;
&#125;</code></pre>
<p>那么就相当于这个函数执行完的结果就是<code>res.data</code>，就相当于<code>getUserToken() = res.data</code>.</p>
<p>3.获取到token后当然就是查询订单号的函数的编写了，笔者这里以订单号为形式参数传递进来，函数集体写法如下：</p>
<pre><code>function getCost(yundan_number)&#123;
    htmlobj = $.ajax(&#123;
           beforeSend: function()&#123;
                $(&quot;#search&quot;).val(&quot;正在查询...&quot;);
                $(&quot;#search&quot;).attr(&quot;disabled&quot;,&quot;disabled&quot;);
           &#125;,
          url: domain+&quot;/itdida-api/track?keHuDanHaoList=&quot;+yundan_number+&quot;&amp;access_token=&quot;+getUserToken(),
          type: &quot;POST&quot;,
          dataType: &quot;json&quot;,
          contentType: &quot;application/json&quot;,
          success: function (res) &#123;
              if (typeof res === &#39;string&#39;) &#123;
                  res = JSON.parse(res);
              &#125;
              html_dom(res);
          &#125;,
          error: function (xhr, err, exception) &#123;
              console.log(err);
          &#125;,
          complete: function()&#123;
            setTimeout(function()&#123;
                $(&quot;#search&quot;).val(&quot;查询完毕！&quot;);
            &#125;, 500);
        &#125;
      &#125;);
&#125;</code></pre>
<p>这个就是点击查询按钮后发生的函数了，这个函数包含了很多知识点，且看笔者一行一行的分析。</p>
<p>js代码片段：</p>
<pre><code>beforeSend: function()&#123;
    $(&quot;#search&quot;).val(&quot;正在查询...&quot;);
    $(&quot;#search&quot;).attr(&quot;disabled&quot;,&quot;disabled&quot;);
&#125;</code></pre>
<p>这个是ajax在发起请求之前发生的事情，具体的解释请参考<a target="_blank" rel="noopener" href="http://www.w3school.com.cn/jquery/ajax_ajax.asp">w3c链接</a>。这个代码片段就是在点击查询的时候，按钮文字替换为<code>正在查询...</code>，同时添加禁用属性<code>disabled</code>，以免用户重复提交。</p>
<p>完成这个之后就是发起请求的阶段了，js代码片段如下：</p>
<pre><code>url: domain+&quot;/itdida-api/track?keHuDanHaoList=&quot;+yundan_number+&quot;&amp;access_token=&quot;+getUserToken(),
type: &quot;POST&quot;,
dataType: &quot;json&quot;,
contentType: &quot;application/json&quot;,
success: function (res) &#123;
    if (typeof res === &#39;string&#39;) &#123;
        res = JSON.parse(res);
    &#125;
    html_dom(res);
&#125;,
error: function (xhr, err, exception) &#123;
    console.log(err);
&#125;</code></pre>
<p>这个就是ajax函数的核心请求了，其实也是很简单的。这个就不一一说明了，不清楚的可以把ajax最基本的写法了解下即可。这个里面包含了请求地址，请求方式，请求类型，执行成功的函数，执行失败的函数。</p>
<p>4.请求成功后，就是ajax请求完毕的回调函数了，js代码片段：</p>
<pre><code>complete: function()&#123;
    setTimeout(function()&#123;
            $(&quot;#search&quot;).val(&quot;查询完毕！&quot;);
    &#125;, 500);
&#125;</code></pre>
<p>因为这个api响应速度太快，为了体验一把，所以笔者用了一个定时执行函数。笔者就用了一个500ms后再执行这个回调函数，然后把按钮的文本用<code>查询完毕!</code>来取代。</p>
<hr>
<p>查询点击，请求，响应的事情就完成了，当然请求回来的数据需要渲染出来，为了美观笔者就用bootstrap的面板组件来渲染，具体的js函数如下：</p>
<pre><code>function html_dom(res)&#123;
    var html = &#39;&lt;div class=&quot;panel panel-default&quot;&gt;&#39;;
        html += &#39;&lt;div class=&quot;panel-heading&quot;&gt;&lt;p&gt;查询结果：&lt;/p&gt;&lt;/div&gt;&#39;;
        html += &#39;&lt;div class=&quot;panel-body&quot;&gt;&#39;;
        html += &#39;&lt;p&gt;客户单号：&#39;+res.data[0].keHuDanHao+&#39;&lt;/p&gt;&#39;;
        html += &#39;&lt;p&gt;状态码：&#39;+res.statusCode+&#39;&lt;/p&gt;&#39;;
        html += &#39;&lt;p&gt;订单状态：&#39;+res.data[0].message+&#39;&lt;/p&gt;&#39;;
        html += &#39;&lt;/div&gt;&#39;;
        html += &#39;&lt;table class=&quot;table&quot;&gt;&#39;;
        html += &#39;&lt;tr&gt;&#39;;
        html += &#39;&lt;th&gt;日期&lt;/th&gt;&#39;;
        html += &#39;&lt;th&gt;描述&lt;/th&gt;&#39;;
        html += &#39;&lt;th&gt;位置&lt;/th&gt;&#39;;
        html += &#39;&lt;/tr&gt;&#39;;
        for (var i = 0; i &lt; res.data[0].trackList.length; i++) &#123;
            var trackList = res.data[0].trackList;
            html += &#39;&lt;tr&gt;&#39;;
            html += &#39;&lt;td&gt;&#39;;
            html += trackList[i].date;
            html += &#39;&lt;/td&gt;&#39;;
            html += &#39;&lt;td&gt;&#39;;
            html += trackList[i].miaoShu;
            html += &#39;&lt;/td&gt;&#39;;
            html += &#39;&lt;td&gt;&#39;;
            if (trackList[i].weiZhi == &#39;&#39;) &#123;
                html += &#39;-&#39;;
            &#125;else&#123;
                html += trackList[i].weiZhi;
            &#125;
            html += &#39;&lt;/td&gt;&#39;;
            html += &#39;&lt;/tr&gt;&#39;;
        &#125;
        html += &#39;&lt;/table&gt;&#39;;
        html += &#39;&lt;/div&gt;&#39;;

        if (res.data[0].code != 200) &#123;
            $(&quot;#result&quot;).html(&#39;&lt;div class=&quot;alert alert-danger&quot; role=&quot;alert&quot;&gt;&#39;+res.data[0].message+&#39;&lt;/div&gt;&#39;);
        &#125;else&#123;
            $(&quot;#result&quot;).html(html);
        &#125;
&#125;</code></pre>
<p>说明：同样的，笔者也是以形参的方式传递到这个函数中，然后进行数据渲染。然后在dom中显示出来，而且还对查询的结果做了判断，</p>
<pre><code>if (res.data[0].code != 200) &#123;
    $(&quot;#result&quot;).html(&#39;&lt;div class=&quot;alert alert-danger&quot; role=&quot;alert&quot;&gt;&#39;+res.data[0].message+&#39;&lt;/div&gt;&#39;);
&#125;else&#123;
    $(&quot;#result&quot;).html(html);
&#125;</code></pre>
<p>这句话的意思就是如果返回码是200，那么把变量<code>html</code>的dom显示到id为<code>result</code>的div中。然后再把这个函数<code>html_dom(res)</code>引入到点击按钮查询成功后的地方。也就是函数<code>getCost(yundan_number)</code>中。这样就完成了输入单号，然后点击按钮查询数据，显示在页面中了。</p>
<p>5.而这些函数都是需要调用才能执行的，不调用不会对页面产生任何影响，由于这些时间需要依赖jquery，所以，这里在jquery加载完毕在执行，代码片段如下：</p>
<pre><code>$(document).ready(function() &#123;

    $(&quot;#search&quot;).click(function() &#123;
        if ($(&quot;#billNos&quot;).val() == &#39;&#39; || $(&quot;#billNos&quot;).val() == null) &#123;
            alert(&quot;订单号不能为空！&quot;);
            return;
        &#125;
        getCost($(&quot;#billNos&quot;).val());
    &#125;);

    $(&#39;#billNos&#39;).bind(&#39;input propertychange&#39;, function() &#123;
        $(&quot;#search&quot;).removeAttr(&#39;disabled&#39;);
        $(&quot;#search&quot;).val(&quot;查询&quot;);
    &#125;);

&#125;);</code></pre>
<p>说明：点击id为search的按钮，首先做判断，如果输入框为空，那么不进行查询，直接提示用户，订单号为空，然后直接return，结束继续往下执行。如果订单不为空，那么就会执行函数<code>getCost()</code>，参数的值就是输入框的值，所以值为<code>$(&quot;#billNos&quot;).val()</code>，然后运行函数，把结果显示在dom节点中。</p>
<p>前面笔者的一个场景中说过，我希望输入框的内容发生辩护的时候搜索按钮文字会初始化，而不是一直是禁用状态，不然没法点击提交。所以关于监听输入框值发生变化话的函数如下：</p>
<pre><code>$(&#39;#billNos&#39;).bind(&#39;input propertychange&#39;, function() &#123;
    // your code
&#125;);</code></pre>
<p>这个就是监听哪个输入框就绑定哪个输入框对应的id即可。笔者希望实现的是输入框内容发生变化后，查询按钮解除禁用状态，然后就是按钮文本初始化最初的样子，那么这个就是很简单的事了。</p>
<pre><code>$(&#39;#billNos&#39;).bind(&#39;input propertychange&#39;, function() &#123;
    $(&quot;#search&quot;).removeAttr(&#39;disabled&#39;);
    $(&quot;#search&quot;).val(&quot;查询&quot;);
&#125;);</code></pre>
<p>所以经过种种，就实现了笔者的最初的设想。</p>
<hr>
<p>当然，笔者还有个回调函数需要讲解，笔者用一个例子来说明把。</p>
<pre><code>&lt;!DOCTYPE html&gt;
&lt;html lang=&quot;en&quot;&gt;
&lt;head&gt;
    &lt;meta charset=&quot;UTF-8&quot;&gt;
    &lt;title&gt;Document&lt;/title&gt;
    &lt;script src=&quot;https://code.jquery.com/jquery-3.2.1.min.js&quot;&gt;&lt;/script&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;div class=&quot;container&quot;&gt;
        &lt;h2&gt;jquery的ajax通过load的方法加载内容，以及有回调函数&lt;/h2&gt;
        &lt;button id=&quot;load&quot; type=&quot;button&quot;&gt;点击加载内容&lt;/button&gt;
    &lt;/div&gt;
    &lt;div id=&quot;app&quot;&gt;&lt;/div&gt;
    &lt;script&gt;
        $(document).ready(function() &#123;
            $(&quot;#load&quot;).click(function(event) &#123;
                $(&quot;#app&quot;).load(&quot;load/conteng.html&quot;,function(responseTxt,statusTxt,xhr)&#123;
                    if(statusTxt==&quot;success&quot;)
                         alert(&quot;外部内容加载成功！&quot;);
                         $(&quot;#app&quot;).css(&#123;&quot;background&quot;:&quot;#f2f2f2&quot;,&quot;padding&quot;:&quot;20px&quot;,&quot;margin-top&quot;:&quot;20px&quot;&#125;);
                         $(&quot;p&quot;).filter(&quot;.mbti_sugg_title&quot;).css(&#123;&quot;background&quot;:&quot;#f2f2f2&quot;,&quot;padding&quot;:&quot;15px&quot;&#125;);
                        $(&quot;p&quot;).not(&quot;.mbti_sugg_title&quot;).css(&#123;&quot;color&quot;:&quot;#aaa&quot;&#125;);
                         hideBtn(&quot;#load&quot;);
                    if(statusTxt==&quot;error&quot;)
                         alert(&quot;Error: &quot;+xhr.status+&quot;: &quot;+xhr.statusText);
                &#125;);
            &#125;);

        &#125;);

        function hideBtn(dom_id)&#123;
            $(dom_id).hide();
        &#125;
    &lt;/script&gt;
&lt;/body&gt;
&lt;/html&gt;</code></pre>
<p>说明：这里涉及到几个知识点：jquery的load方法，load方法中的回调函数，jquery的过滤。</p>
<p>当笔者点击按钮的时候，那么会加载一个外部的dom片段，资源路径：<code>load/conteng.html</code>，通常load就是这样用的，其实后面的那个function不写是完全可以的。</p>
<p>可是，我想加载过来的内容按照我的要求来显示咋办？比如我想让加载出来的内容有个背景色，内边距，外边距。</p>
<p>那么这里就要用到一个回调了，如果是简单的样式问题，那么用css也是可以解决的，但是如果css解决不了的怎么办，那么就需要用到js函数了，对吧？所以这里我们看下用回调函数来解决这个加载后样式的问题怎么做呢？看代码片段：</p>
<pre><code>function(responseTxt,statusTxt,xhr)&#123;
    if(statusTxt==&quot;success&quot;)
         alert(&quot;外部内容加载成功！&quot;);
         $(&quot;#app&quot;).css(&#123;&quot;background&quot;:&quot;#f2f2f2&quot;,&quot;padding&quot;:&quot;20px&quot;,&quot;margin-top&quot;:&quot;20px&quot;&#125;);
         $(&quot;p&quot;).filter(&quot;.mbti_sugg_title&quot;).css(&#123;&quot;background&quot;:&quot;#f2f2f2&quot;,&quot;padding&quot;:&quot;15px&quot;&#125;);
        $(&quot;p&quot;).not(&quot;.mbti_sugg_title&quot;).css(&#123;&quot;color&quot;:&quot;#aaa&quot;&#125;);
         hideBtn(&quot;#load&quot;);
    if(statusTxt==&quot;error&quot;)
         alert(&quot;Error: &quot;+xhr.status+&quot;: &quot;+xhr.statusText);
&#125;</code></pre>
<p>这个就是当加载成功后，id为app的dom添加样式，然后就是所有class为<code>mbti_sugg_title</code>的p标签的背景和边距为指定的样式，然后所有class不是为<code>mbti_sugg_title</code>的p标签的样式为指定的颜色；然后就是把按钮隐藏起来<code>hideBtn(&quot;#load&quot;)</code>，这一连串的东西都可以在回调函数中完成。</p>
<p>回调函数的好处就是让函数的执行有个依赖关系，虽然ajax的异步请求会对依赖关系造成一些威胁，但是通过回调函数可以很好的解决函数执行的某些先后关系。</p>
<p>当然，笔者仅仅是写了一个很简单的回调函数，真正情况可能会更复杂，但是当你明白了回调函数是个什么东西的时候就会很好的运用它来解决工作中的问题了。</p>
<p>本文到此结束，后续会继续更新，敬请关注。</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://helongquan.github.io/2019/06/21/%E4%BB%8E%E6%9C%8D%E5%8A%A1%E5%99%A8%E7%AB%AF%E6%89%93%E5%8D%B0%E6%9F%90%E4%B8%AA%E7%9B%AE%E5%BD%95%E4%B8%8B%E7%9A%84%E6%89%80%E6%9C%89%E6%96%87%E4%BB%B6%E5%92%8C%E6%96%87%E4%BB%B6%E5%A4%B9%E7%9A%84%E8%B7%AF%E5%BE%84%E4%BF%9D%E5%AD%98%E5%88%B0%E4%B8%80%E4%B8%AAtxt%E6%96%87%E4%BB%B6%E4%B8%AD%EF%BC%8C%E7%84%B6%E5%90%8E%E9%80%9A%E8%BF%87ajax%E7%9A%84%E6%96%B9%E5%BC%8F%E8%8E%B7%E5%8F%96txt%E6%96%87%E4%BB%B6%E4%B8%AD%E7%9A%84%E6%AF%8F%E4%B8%80%E8%A1%8C%E8%B7%AF%E5%BE%84%E7%84%B6%E5%90%8E%E9%80%9A%E8%BF%87jquery%E7%9A%84%E6%96%B9%E5%BC%8F%E9%81%8D%E5%8E%86%E5%87%BA%E6%9D%A5/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="泉哥">
      <meta itemprop="description" content="日记">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="鸢尾花序">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2019/06/21/%E4%BB%8E%E6%9C%8D%E5%8A%A1%E5%99%A8%E7%AB%AF%E6%89%93%E5%8D%B0%E6%9F%90%E4%B8%AA%E7%9B%AE%E5%BD%95%E4%B8%8B%E7%9A%84%E6%89%80%E6%9C%89%E6%96%87%E4%BB%B6%E5%92%8C%E6%96%87%E4%BB%B6%E5%A4%B9%E7%9A%84%E8%B7%AF%E5%BE%84%E4%BF%9D%E5%AD%98%E5%88%B0%E4%B8%80%E4%B8%AAtxt%E6%96%87%E4%BB%B6%E4%B8%AD%EF%BC%8C%E7%84%B6%E5%90%8E%E9%80%9A%E8%BF%87ajax%E7%9A%84%E6%96%B9%E5%BC%8F%E8%8E%B7%E5%8F%96txt%E6%96%87%E4%BB%B6%E4%B8%AD%E7%9A%84%E6%AF%8F%E4%B8%80%E8%A1%8C%E8%B7%AF%E5%BE%84%E7%84%B6%E5%90%8E%E9%80%9A%E8%BF%87jquery%E7%9A%84%E6%96%B9%E5%BC%8F%E9%81%8D%E5%8E%86%E5%87%BA%E6%9D%A5/" class="post-title-link" itemprop="url">从服务器端打印某个目录下的所有文件和文件夹的路径保存到一个txt文件中，然后通过ajax的方式获取txt文件中的每一行路径然后通过jquery的方式遍历出来</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2019-06-21 21:48:17" itemprop="dateCreated datePublished" datetime="2019-06-21T21:48:17+08:00">2019-06-21</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2020-10-11 11:58:03" itemprop="dateModified" datetime="2020-10-11T11:58:03+08:00">2020-10-11</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/jquery/" itemprop="url" rel="index"><span itemprop="name">jquery</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p><strong>本文大纲：</strong></p>
<ol>
<li>打印某个目录下的所有文件和文件夹的路径</li>
<li>把运行结果保存到某个文件中</li>
<li>定时更新某个目录下的文件名和文件夹的路径</li>
<li>通过jquery的方式获取txt文件的内容，并且一行一个遍历出来</li>
</ol>
<h2 id="打印某个目录下的所有文件和文件夹的路径"><a href="#打印某个目录下的所有文件和文件夹的路径" class="headerlink" title="打印某个目录下的所有文件和文件夹的路径"></a>打印某个目录下的所有文件和文件夹的路径</h2><p>在linux中打印某个目录下的所有文件和文件夹的路径，用什么命令呢？用如下命令：</p>
<pre><code>cd  你需要的目录
find . -print</code></pre>
<p>这样就可以打印出来了。</p>
<p>效果类似如下：</p>
<pre><code>./Video
./PC Software
./PC Software/M Series
./PC Software/M Series/3-Superpassword.zip
./PC Software/M Series/1-AEeye_for_Windows.zip
./PC Software/M Series/2-Upgrade_ovfs.zip
./PC Software/L Series
./PC Software/L Series/3-ProductTools（For Reseting Factory）.zip
./PC Software/L Series/2-MonitorClient_en.zip
./PC Software/L Series/4-Control IPCameraSetup.zip
./PC Software/L Series/1-IPCSearch.zip
./PC Software/HX Series
...</code></pre>
<h2 id="把运行结果保存到某个文件中"><a href="#把运行结果保存到某个文件中" class="headerlink" title="把运行结果保存到某个文件中"></a>把运行结果保存到某个文件中</h2><p>如果我想把这些东西都保存起来呢？这个时候运行如下命令：</p>
<pre><code>find . - print &gt;&gt; file.txt</code></pre>
<p>这样就在命令运行所在的目录下有个file.txt文件，里面的内容就是<code>find . -print</code>的运行结果。</p>
<h2 id="定时更新某个目录下的文件名和文件夹的路径"><a href="#定时更新某个目录下的文件名和文件夹的路径" class="headerlink" title="定时更新某个目录下的文件名和文件夹的路径"></a>定时更新某个目录下的文件名和文件夹的路径</h2><p>为了能够让那个文件里面的内容定时更新，需要定时的运行打印路径的命令，这个时候我们就需要编写一个定时任务来解决这个问题，怎么写呢？</p>
<p>先在自己适合的目录下建一个保存shell的命令的脚本，只要你喜欢你可以在任何目录下创建这个脚本，笔者就在主目录下创建一个文件夹保存这个脚本，命令如下：</p>
<pre><code>cd ~
mkdir mycron
chmod -R 755 mycron
vi auto_build_dir.sh
chmod +x auto_build_dir.sh</code></pre>
<p>这样就完成了脚本的的创建，然后我们对这个脚本进行编写：auto_build_dir.sh</p>
<pre><code>#!/bin/bash
# This is a ShellScript
cd /opt/lampp/htdocs/download.sw.com
rm -f source_total.txt
find ../ -print &gt;&gt; /opt/lampp/htdocs/download.sw.com/source_total.txt</code></pre>
<p>这个脚本的意思就是，先来到要打印文件夹或者文件所在的目录下，笔者这里的目录名就是：download.sw.com。</p>
<p>然后先把旧的文件删除，<code>rm -f source_total.txt</code>。然后就是运行打印目录，以及保存打印结果到文件source_total.txt中。</p>
<p>好的，脚本已经写好，接着就是写定时任务了。</p>
<p>在任何目录下运行命令：</p>
<pre><code>crontab -e</code></pre>
<p>然后在最后面追加如下内容：</p>
<pre><code>*/10 * * * * /root/mycron/auto_build_dir.sh</code></pre>
<p>这个的意思就是每隔10分钟，运行一次脚本，后面的那个路径就是笔者前面新建的那个脚本的目录所在。</p>
<p>隔10分钟后看下/opt/lampp/htdocs/download.sw.com/这个目录下是否有文件生成，如果有说明这个定时任务是正常工作的。</p>
<h2 id="通过jquery的方式获取txt文件的内容，并且一行一个遍历出来"><a href="#通过jquery的方式获取txt文件的内容，并且一行一个遍历出来" class="headerlink" title="通过jquery的方式获取txt文件的内容，并且一行一个遍历出来"></a>通过jquery的方式获取txt文件的内容，并且一行一个遍历出来</h2><p>为了测试方便，笔者在txt所在目录下新建一个index.html文件，并且分配好权限，然后这个文件的代码如下：</p>
<pre><code>&lt;!DOCTYPE html&gt;
&lt;html lang=&quot;en&quot;&gt;
&lt;head&gt;
    &lt;meta charset=&quot;UTF-8&quot;&gt;
    &lt;title&gt;Document&lt;/title&gt;
    &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no&quot;&gt;
    &lt;link href=&quot;https://cdn.bootcss.com/twitter-bootstrap/4.3.1/css/bootstrap.min.css&quot; rel=&quot;stylesheet&quot;&gt;
    &lt;script src=&quot;https://code.jquery.com/jquery-3.2.1.min.js&quot;&gt;&lt;/script&gt;
    &lt;script src=&quot;https://cdn.bootcss.com/twitter-bootstrap/4.3.1/js/bootstrap.min.js&quot;&gt;&lt;/script&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;div class=&quot;container&quot;&gt;
        &lt;div class=&quot;alert alert-success&quot; role=&quot;alert&quot;&gt;
            &lt;h4&gt;download center&lt;/h4&gt;
        &lt;/div&gt;
        &lt;div id=&quot;app&quot;&gt;&lt;/div&gt;
    &lt;/div&gt;    
    &lt;script&gt;
        $(document).ready(function()&#123;

            htmlobj=$.ajax(&#123;url:&quot;source_total.txt&quot;,async:false&#125;); //通过ajax读取source_total.txt文本文件。
            var arr = htmlobj.responseText.split(&#39;\n&#39;);
            var html = &#39;&lt;ul class=&quot;list-group&quot;&gt;&#39;;
            for (var i = 0; i &lt; arr.length; i++) &#123;

                var items = arr[i].substring(3);

                if (items.indexOf(&quot;.pdf&quot;) &gt;= 0 || items.indexOf(&quot;.zip&quot;) &gt;= 0) &#123;
                    html += &#39;&lt;li class=&quot;list-group-item&quot;&gt;&#39;;
                    html += &#39;&lt;a href=&quot;http://&#39;+items+&#39;&quot; download&gt;&#39;+items+&#39;&lt;/a&gt;&#39;;
                    html += &#39;&lt;/li&gt;&#39;;
                &#125;else if(items.indexOf(&quot;.txt&quot;) &gt;= 0)&#123;
                    html += &#39;&lt;li style=&quot;display:none&quot;&gt;&#39;;
                    html += items;
                    html += &#39;&lt;/li&gt;&#39;;
                &#125;else if(items.indexOf(&quot;.html&quot;) &gt;= 0)&#123;
                    html += &#39;&lt;li style=&quot;display:none&quot;&gt;&#39;;
                    html += items;
                    html += &#39;&lt;/li&gt;&#39;;
                &#125;else if(items.indexOf(&quot;www.sv3c.com&quot;) &gt;= 0)&#123;
                    html += &#39;&lt;li style=&quot;display:none&quot;&gt;&#39;;
                    html += items;
                    html += &#39;&lt;/li&gt;&#39;;
                &#125;else if(items == null || items == &quot;&quot;)&#123;
                    html += &#39;&lt;li style=&quot;display:none&quot;&gt;&#39;;
                    html += items;
                    html += &#39;&lt;/li&gt;&#39;;
                &#125;else if(items.indexOf(&quot;download.sv3c.com/cd/&quot;) &gt;= 0)&#123;
                    html += &#39;&lt;li style=&quot;display:none&quot;&gt;&#39;;
                    html += items;
                    html += &#39;&lt;/li&gt;&#39;;
                &#125;else&#123;
                    html += &#39;&lt;h4 style=&quot;padding:10px 0px&quot;&gt;&#39;;
                    html += items;
                    html += &#39;&lt;/h4&gt;&#39;;
                &#125;

            &#125;
            html += &#39;&lt;/ul&gt;&#39;;
            $(&quot;#app&quot;).html(html);

        &#125;);
    &lt;/script&gt;

&lt;/body&gt;
&lt;/html&gt;</code></pre>
<p>这里说明一下。</p>
<p>为了测试方便和界面的美观，笔者就引用了一个框架和一个jquery的cdn作为外部资源。</p>
<p>然后就是获取同目录下的txt文件：</p>
<pre><code>htmlobj=$.ajax(&#123;url:&quot;source_total.txt&quot;,async:false&#125;);</code></pre>
<p>把获取的结果保存在一个对象中。</p>
<p>此时我们获取的这个文件的内容都是一行，完全没法使用，所以我们要把每一行都获取出来。</p>
<pre><code>var arr = htmlobj.responseText.split(&#39;\n&#39;);</code></pre>
<p>这个时候arr就是一个数组，保存了所有的行。</p>
<p>然后就是遍历了，用for语句遍历出来。里面的那些条件判断语句完全是笔者为了个人需要写的，比如笔者对有<code>.pdf</code>和<code>.zip</code>这些字符串的当做一个资源路径，然后判断为一个可以下载的链接，于是加上链接。</p>
<pre><code>if (items.indexOf(&quot;.pdf&quot;) &gt;= 0 || items.indexOf(&quot;.zip&quot;) &gt;= 0) &#123;
    html += &#39;&lt;li class=&quot;list-group-item&quot;&gt;&#39;;
    html += &#39;&lt;a href=&quot;http://&#39;+items+&#39;&quot; download&gt;&#39;+items+&#39;&lt;/a&gt;&#39;;
    html += &#39;&lt;/li&gt;&#39;;
&#125;</code></pre>
<p>为了剪切到多余的头头尾尾，笔者用这个函数在for循环里面处理了下：</p>
<pre><code>var items = arr[i].substring(3);</code></pre>
<p>意思就是把前面三个字符串切掉，更多用法可以网上搜索jquery剪切字符串。</p>
<p>当把这些字符串剪切成我们想要的样子后就是遍历，判断，然后进进一步的处理了，这些根据我们的业务和对js的掌握程度。</p>
<p>比如说笔者先要屏蔽有<code>.txt</code>这个字符串的行数，以及想要屏蔽有<code>.html</code>这个字符串的行数。</p>
<pre><code>if(items.indexOf(&quot;.txt&quot;) &gt;= 0)&#123;
    html += &#39;&lt;li style=&quot;display:none&quot;&gt;&#39;;
    html += items;
    html += &#39;&lt;/li&gt;&#39;;
&#125;else if(items.indexOf(&quot;.html&quot;) &gt;= 0)&#123;
    html += &#39;&lt;li style=&quot;display:none&quot;&gt;&#39;;
    html += items;
    html += &#39;&lt;/li&gt;&#39;;
&#125;</code></pre>
<p>最后把遍历的结果插入到dom的id为app的div中。</p>
<pre><code>$(&quot;#app&quot;).html(html);</code></pre>
<p>当然更多的用法，希望大家脑洞大开。此文仅做启发之用。</p>
<p>最后的效果如下：</p>
<p><img src="https://i.imgur.com/ACDBGcH.jpg"></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  


  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/"><i class="fa fa-angle-left" aria-label="Previous page"></i></a><a class="page-number" href="/">1</a><span class="page-number current">2</span><a class="page-number" href="/page/3/">3</a><span class="space">&hellip;</span><a class="page-number" href="/page/43/">43</a><a class="extend next" rel="next" href="/page/3/"><i class="fa fa-angle-right" aria-label="Next page"></i></a>
  </nav>



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">泉哥</p>
  <div class="site-description" itemprop="description">日记</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">424</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
        <span class="site-state-item-count">25</span>
        <span class="site-state-item-name">categories</span>
      </div>
      <div class="site-state-item site-state-tags">
        <span class="site-state-item-count">400</span>
        <span class="site-state-item-name">tags</span>
      </div>
  </nav>
</div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2020</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">泉哥</span>
</div>
  <div class="powered-by">Powered by <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Gemini</a>
  </div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/pisces.js"></script>


<script src="/js/next-boot.js"></script>




  















  

  

</body>
</html>

<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 5.2.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"example.com","root":"/","scheme":"Gemini","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}}};
  </script>

  <meta name="description" content="当你在阅读这篇文章的时候，希望你已经阅读过笔者另外一篇关于通过wordpress的rest api获取文章和页面的博客，那里记录了笔者的一些经验。好的，废话到此为止。 今天我们来通过rest api获取wordpress网站上面的woocommerce产品以及其他的数据。 我们先看下它的官网：http:&#x2F;&#x2F;woocommerce.github.io&#x2F;woocommerce-rest-api-doc">
<meta property="og:type" content="article">
<meta property="og:title" content="基于wordpress结合postman实现woocommerce的rest api获取产品，编辑产品，删除产品，创建产品和订单等数据的方法，以及把这些功能整合到用户个人中心">
<meta property="og:url" content="http://example.com/2018/11/21/%E5%9F%BA%E4%BA%8Ewordpress%E7%BB%93%E5%90%88postman%E5%AE%9E%E7%8E%B0woocommerce%E7%9A%84rest-api%E8%8E%B7%E5%8F%96%E4%BA%A7%E5%93%81%E5%92%8C%E8%AE%A2%E5%8D%95%E7%AD%89%E6%95%B0%E6%8D%AE%E7%9A%84%E6%96%B9%E6%B3%95/index.html">
<meta property="og:site_name" content="Hexo">
<meta property="og:description" content="当你在阅读这篇文章的时候，希望你已经阅读过笔者另外一篇关于通过wordpress的rest api获取文章和页面的博客，那里记录了笔者的一些经验。好的，废话到此为止。 今天我们来通过rest api获取wordpress网站上面的woocommerce产品以及其他的数据。 我们先看下它的官网：http:&#x2F;&#x2F;woocommerce.github.io&#x2F;woocommerce-rest-api-doc">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="https://i.imgur.com/jTz8q6f.jpg">
<meta property="og:image" content="https://i.imgur.com/TT5N46W.jpg">
<meta property="og:image" content="https://i.imgur.com/258GKrH.jpg">
<meta property="og:image" content="https://i.imgur.com/0w8IIAB.jpg">
<meta property="og:image" content="https://i.imgur.com/5UvMEKv.jpg">
<meta property="og:image" content="https://i.imgur.com/sOwVo2B.jpg">
<meta property="og:image" content="https://i.imgur.com/UlKTbgx.jpg">
<meta property="og:image" content="https://i.imgur.com/3IZaPki.jpg">
<meta property="og:image" content="https://i.imgur.com/WpOCEzr.jpg">
<meta property="og:image" content="https://i.imgur.com/pQW74RE.jpg">
<meta property="og:image" content="https://i.imgur.com/jaoltbg.png">
<meta property="og:image" content="https://i.imgur.com/YNGTy5t.png">
<meta property="og:image" content="https://i.imgur.com/3bC0opn.png">
<meta property="og:image" content="https://i.imgur.com/ZEo5TlO.png">
<meta property="og:image" content="https://i.imgur.com/a92ZZ0b.png">
<meta property="article:published_time" content="2018-11-21T07:15:08.000Z">
<meta property="article:modified_time" content="2020-10-11T03:58:04.949Z">
<meta property="article:author" content="John Doe">
<meta property="article:tag" content="wordpress,woocommerce,rest api,postman,获取产品,编辑,删除,创建,更新">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://i.imgur.com/jTz8q6f.jpg">

<link rel="canonical" href="http://example.com/2018/11/21/%E5%9F%BA%E4%BA%8Ewordpress%E7%BB%93%E5%90%88postman%E5%AE%9E%E7%8E%B0woocommerce%E7%9A%84rest-api%E8%8E%B7%E5%8F%96%E4%BA%A7%E5%93%81%E5%92%8C%E8%AE%A2%E5%8D%95%E7%AD%89%E6%95%B0%E6%8D%AE%E7%9A%84%E6%96%B9%E6%B3%95/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : false,
    isPost : true,
    lang   : 'en'
  };
</script>

  <title>基于wordpress结合postman实现woocommerce的rest api获取产品，编辑产品，删除产品，创建产品和订单等数据的方法，以及把这些功能整合到用户个人中心 | Hexo</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">Hexo</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>Home</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>Archives</a>

  </li>
  </ul>
</nav>




</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content post posts-expand">
            

    
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="http://example.com/2018/11/21/%E5%9F%BA%E4%BA%8Ewordpress%E7%BB%93%E5%90%88postman%E5%AE%9E%E7%8E%B0woocommerce%E7%9A%84rest-api%E8%8E%B7%E5%8F%96%E4%BA%A7%E5%93%81%E5%92%8C%E8%AE%A2%E5%8D%95%E7%AD%89%E6%95%B0%E6%8D%AE%E7%9A%84%E6%96%B9%E6%B3%95/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="John Doe">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hexo">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          基于wordpress结合postman实现woocommerce的rest api获取产品，编辑产品，删除产品，创建产品和订单等数据的方法，以及把这些功能整合到用户个人中心
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2018-11-21 15:15:08" itemprop="dateCreated datePublished" datetime="2018-11-21T15:15:08+08:00">2018-11-21</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2020-10-11 11:58:04" itemprop="dateModified" datetime="2020-10-11T11:58:04+08:00">2020-10-11</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/wordpress/" itemprop="url" rel="index"><span itemprop="name">wordpress</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <p>当你在阅读这篇文章的时候，希望你已经阅读过笔者另外一篇关于通过wordpress的rest api获取文章和页面的博客，那里记录了笔者的一些经验。好的，废话到此为止。</p>
<p>今天我们来通过rest api获取wordpress网站上面的woocommerce产品以及其他的数据。</p>
<p>我们先看下它的官网：<a target="_blank" rel="noopener" href="http://woocommerce.github.io/woocommerce-rest-api-docs/?shell">http://woocommerce.github.io/woocommerce-rest-api-docs/?shell</a></p>
<p>这个里面说得很详细，包括了采用哪几种途径获取数据：curl,php,node.js,ruby,python</p>
<p>其他的地方我们先不看，我们直接来到Product这里：</p>
<p><img src="https://i.imgur.com/jTz8q6f.jpg"></p>
<p>相应的api在右边：</p>
<pre><code>curl -X POST https://example.com/wp-json/wc/v3/products</code></pre>
<p>这里当然还要添加key，但是笔者这里说的是一个重要的问题：v3(版本)，笔者在根据这个方法调用的时候一直是404报错，纠正之后</p>
<blockquote>
<p>正确的方法如下：<strong>把v3改成v2</strong></p>
</blockquote>
<p>接着，先去woocommerce—设置—高级—REST API那里开启rest api，然后创建一个key。</p>
<p><img src="https://i.imgur.com/TT5N46W.jpg"></p>
<p>大家也可以根据这个教程走：<a target="_blank" rel="noopener" href="https://docs.woocommerce.com/document/woocommerce-rest-api/">https://docs.woocommerce.com/document/woocommerce-rest-api/</a>，完成创建后，我们接着下一步：</p>
<blockquote>
<p>由于wooommerce产品需要ssl协议，为了不出现意想不到的问题，最好用<strong>https</strong>协议发出请求，这个是笔者走过的一个弯路。</p>
</blockquote>
<p>当完成前面的两步之后，我们需要第三步，而这一步是官网上面说了的，</p>
<pre><code>Example for servers that not properly parse the Authorization header:

curl https://www.example.com/wp-json/wc/v3/orders?consumer_key=123&amp;consumer_secret=abc</code></pre>
<p>这个地方，我们就可以把我们创建的key拿出来了，填写上去，然后把域名换成我们自己的，这里是获取订单列表。如果是获取产品列表那么把orders换成products即可，更多别的可以看官网。</p>
<p>为了方便测试，大家可以去下载<a target="_blank" rel="noopener" href="https://learning.getpostman.com/">postman</a>来进行测试，安装完毕后，启动，然后输入api的请求地址，获取成功的截图如下：</p>
<p><img src="https://i.imgur.com/258GKrH.jpg"></p>
<p>好的，完成以上这些以后，我们就可以像根据wordpress的rest api获取文章那样获取woocommerce产品列表了。这里笔者来一个实例：</p>
<p><strong>JS代码：</strong></p>
<pre><code>&lt;script src=&quot;https://code.jquery.com/jquery-3.2.1.min.js&quot;&gt;&lt;/script&gt;
&lt;script&gt;
$(document).on(&quot;click&quot;,&quot;#page_list .product_list&quot;,function()&#123;
    var outh_info = new Object();
    outh_info.consumer_key = &#39;ck_d441c8757e52e7fc2ca915198f00e8f799814564&#39;;
    outh_info.consumer_secret = &#39;cs_dbe9550e3d8ef35fa7bfacf4282fc6b54843503c&#39;;
    // $get_info_links = &quot;https://yourdomain.com&quot;;

    var host = window.location.host;
    var protocol = window.location.protocol;
    $get_info_links = protocol+&quot;//&quot;+host;

    htmlobj_category = $.ajax(&#123;
        url: $get_info_links+&quot;/wp-json/wc/v2/products?consumer_key=&quot;+outh_info.consumer_key+&quot;&amp;consumer_secret=&quot;+outh_info.consumer_secret,
        type: &quot;get&quot;,
        dataType: &quot;json&quot;,
        contentType: &quot;application/json&quot;,
        success: function (res) &#123;
            // console.log(res);
            html = &quot;&quot;;
            for (var i = res.length - 1; i &gt;= 0; i--) &#123;
                html += &#39;&lt;div class=&quot;media&quot;&gt;&#39;;
                html += &#39;&lt;div class=&quot;media-left&quot; style=&quot;max-width:120px;width:100%&quot;&gt;&#39;;
                html += &#39;&lt;a href=&quot;&#39;+res[i][&quot;permalink&quot;]+&#39;&quot;&gt;&#39;;
                html += &#39;&lt;img class=&quot;media-object&quot; src=&quot;&#39;+res[i][&quot;images&quot;][0][&quot;src&quot;]+&#39;&quot; alt=&quot;&#39;+res[i][&quot;name&quot;]+&#39;&quot;&gt;&#39;;
                html += &#39;&lt;/a&gt;&#39;;
                html += &#39;&lt;/div&gt;&#39;;
                html += &#39;&lt;div class=&quot;media-body&quot;&gt;&#39;;
                html += &#39;&lt;h4 class=&quot;media-heading&quot;&gt;&#39;+res[i][&quot;name&quot;]+&#39;&lt;/h4&gt;&#39;;
                html += &#39;&lt;/div&gt;&#39;;
                html += &#39;&lt;/div&gt;&#39;;
            &#125;
            $(&quot;#contentarea&quot;).empty();
            $(&quot;#contentarea&quot;).append(html);
        &#125;,
        error: function (xhr, err, exception) &#123;
            console.log(err);
        &#125;
    &#125;);
&#125;);
&lt;/script&gt;</code></pre>
<p><strong>HTML代码：</strong></p>
<pre><code>&lt;ul id=&quot;page_list&quot; class=&quot;list-group&quot;&gt;
    &lt;h4 class=&quot;dashbord&quot;&gt;控制台&lt;/h4&gt;
    &lt;li class=&quot;list-group-item product_list&quot;&gt;&lt;i class=&quot;glyphicon glyphicon-pencil&quot;&gt;&lt;/i&gt; 产品列表&lt;/li&gt;
&lt;/ul&gt;

&lt;div id=&quot;contentarea&quot;&gt;

&lt;/div&gt;</code></pre>
<p>这里笔者为了样式更美观，借用了bootstrap的框架，大家也可以自行设计界面，这个不是关键的。最后的效果：</p>
<p><img src="https://i.imgur.com/0w8IIAB.jpg"></p>
<p>这里笔者仅仅只是展示了如何获取woocommerce的产品，对于编辑一个产品，更新一个产品，删除一个产品还没有进行展示，这个会在接下来的更新中完成，敬请关注。</p>
<hr>
<p>更新：2018/11/23 19:26:56 </p>
<p>这里我们分享一下更新一个产品，我们先把HTML部分的代码粘贴一下：</p>
<p>内容的显示区域(4/5)的HTML代码：</p>
<pre><code>&lt;div id=&quot;contentarea&quot;&gt;

&lt;/div&gt;

&lt;div id=&quot;create_form&quot;&gt;

    &lt;div class=&quot;form-group&quot; id=&quot;coupon_update&quot;&gt;
        &lt;label&gt;优惠券&lt;/label&gt;
        &lt;input type=&quot;text&quot; class=&quot;form-control&quot; id=&quot;xianzhi&quot; value=&quot;&quot;&gt;
        &lt;input type=&quot;text&quot; class=&quot;form-control&quot; id=&quot;youhuiquan&quot; value=&quot;&quot;&gt;
        &lt;button type=&quot;button&quot; class=&quot;btn btn-info update&quot;&gt;更新&lt;/button&gt;
    &lt;/div&gt;

    &lt;div id=&quot;create_coupon&quot;&gt;
        &lt;div class=&quot;form-group&quot;&gt;
            &lt;label for=&quot;youhuiquan&quot;&gt;优惠码&lt;/label&gt;
            &lt;input type=&quot;text&quot; class=&quot;form-control&quot; id=&quot;code&quot; value=&quot;&quot; placeholder=&quot;优惠码&quot;&gt;
        &lt;/div&gt;
        &lt;div class=&quot;form-group&quot;&gt;
            &lt;label for=&quot;youhuiquan&quot;&gt;优惠券金额&lt;/label&gt;
            &lt;input type=&quot;text&quot; class=&quot;form-control&quot; id=&quot;jine&quot; value=&quot;&quot; placeholder=&quot;输入优惠券金额&quot;&gt;
        &lt;/div&gt;

        &lt;div class=&quot;form-group&quot;&gt;
            &lt;label for=&quot;youhuiquan&quot;&gt;购买的最低金额&lt;/label&gt;
            &lt;input type=&quot;number&quot; class=&quot;form-control&quot; id=&quot;minimum_amount&quot; value=&quot;&quot; placeholder=&quot;输入购买的最低金额&quot;&gt;
        &lt;/div&gt;
        &lt;div class=&quot;form-group&quot;&gt;
          &lt;button type=&quot;button&quot; class=&quot;btn btn-info create&quot;&gt;创建&lt;/button&gt;
        &lt;/div&gt;
    &lt;/div&gt;

&lt;/div&gt;</code></pre>
<p>列表显示区(1/5)的HTML代码：</p>
<pre><code>&lt;html&gt;
&lt;head&gt;
    &lt;meta charset=&quot;UTF-8&quot;&gt;
    &lt;title&gt;Document&lt;/title&gt;
    &lt;link href=&quot;/wp-content/themes/nocti/css/bootstrap.min.css&quot; rel=&quot;stylesheet&quot;&gt;
    &lt;link href=&quot;/wp-content/themes/nocti/css/font-awesome.min.css&quot; rel=&quot;stylesheet&quot;&gt;
    &lt;script src=&quot;/wp-content/themes/nocti/js/bootstrap.min.js&quot;&gt;&lt;/script&gt;
    &lt;script src=&quot;/wp-content/themes/nocti/rest/usercenter.js&quot;&gt;&lt;/script&gt;
    &lt;script src=&quot;/wp-content/themes/nocti/rest/woocommerce_api/get_info.js&quot;&gt;&lt;/script&gt;
    &lt;style&gt;
    #page_list span,#page_list li&#123;
        cursor: pointer;
    &#125;
    ul&#123;margin-left:0px !important&#125;
    .entry-content-wrapper li &#123;
        margin-left: 0px !important;
        padding: 15px;
    &#125;
    .personal_post_list li&#123;
           cursor:pointer;
    &#125;
    .dashbord&#123;margin-top:0px !important&#125;
    .contentarea&#123;
        border: 1px solid #d6d6d6;
        padding:20px 15px;
    &#125;
    #page_list h4&#123;
        margin: 20px auto;
    &#125;
    .glyphicon-trash&#123;
        float: right !important;
        color:#719430 !important;
        cursor: pointer;
    &#125;
.media-left, .media-right &#123;
    width: 100px !important;
&#125;
.media-body, .media-left, .media-right &#123;
    display: initial !important;
&#125;
.media-left img&#123;
    width: 100px !important;
    float: left;
    margin-right: 20px;
    border: 1px solid #eee;
&#125;
.media&#123;   
    border-bottom: 1px solid #ccc;
    padding-bottom: 8px;
&#125;
.date_created&#123;
    float: right;
    font-size: 14px;
&#125;
.row &#123;
    margin-right: 0px !important;
    margin-left: 0px !important;
&#125;
.orderItems&#123;
     margin: 20px auto !important;
     font-size:12px !important;
&#125;
.totals,.payments&#123;
  color: #8BC34A;
&#125;
.orderNumber&#123;
  color: #FF9800;
&#125;
.times&#123;color: #009688;&#125;
.status&#123;color: #FF5722;&#125;
.order_product_list&#123;
    background: #f7f7f7;
    padding: 20px 15px 10px 15px;
&#125;
.table&gt;tbody&gt;tr&gt;td, .table&gt;tbody&gt;tr&gt;th, .table&gt;tfoot&gt;tr&gt;td, .table&gt;tfoot&gt;tr&gt;th, .table&gt;thead&gt;tr&gt;td, .table&gt;thead&gt;tr&gt;th &#123;
    vertical-align: middle !important;
    text-align:left !important;
&#125;
.list-group-item-text&#123;padding:8px 0px&#125;
.actions .btn&#123;margin: 0px 5px;&#125;
    &lt;/style&gt;
&lt;/head&gt;
&lt;body&gt;
   &lt;ul id=&quot;page_list&quot; class=&quot;list-group&quot;&gt;
    &lt;h4 class=&quot;dashbord&quot;&gt;控制台&lt;/h4&gt;
    &lt;li class=&quot;list-group-item useritem&quot;&gt;&lt;i class=&quot;fa fa-user&quot;&gt;&lt;/i&gt; 个人信息&lt;/li&gt;
    &lt;li class=&quot;list-group-item public_post&quot;&gt;&lt;i class=&quot;fa fa-pencil&quot;&gt;&lt;/i&gt; 发布文章&lt;/li&gt;
    &lt;li class=&quot;list-group-item create_page&quot;&gt;&lt;i class=&quot;fa fa-pencil&quot;&gt;&lt;/i&gt; 创建页面&lt;/li&gt;
    &lt;li class=&quot;list-group-item product_list&quot;&gt;&lt;i class=&quot;fa fa-list&quot;&gt;&lt;/i&gt; 产品列表&lt;/li&gt;
    &lt;li class=&quot;list-group-item order_list&quot;&gt;&lt;i class=&quot;fa fa-shopping-cart&quot;&gt;&lt;/i&gt; 订单列表 &lt;span class=&quot;badge&quot;&gt;&lt;/span&gt;&lt;/li&gt;
    &lt;li class=&quot;list-group-item order_address&quot;&gt;&lt;i class=&quot;fa fa-map-marker&quot;&gt;&lt;/i&gt; 收件地址&lt;/li&gt;
    &lt;li class=&quot;list-group-item coupons_list&quot;&gt;&lt;i class=&quot;fa fa-ticket&quot;&gt;&lt;/i&gt; 优惠券 &lt;span class=&quot;badge&quot;&gt;&lt;/span&gt;&lt;/li&gt;
&lt;/ul&gt; 
&lt;/body&gt;
&lt;/html&gt;</code></pre>
<p>现在我们来看下js部分，这里分了两个js文件放，一个（usercenter.js）是放用户个人信息和wordpress rest api部分的数据信息，另一个（get_info.js）是用来专门放woocommerce rest api获取来的数据信息。</p>
<p><strong>usercenter.js代码如下：</strong></p>
<pre><code>$(document).ready(function()&#123;

    var host = window.location.host;
    var protocol = window.location.protocol;
    $usercenter_url = protocol+&quot;//&quot;+host;

    htmlobj_category = $.ajax(&#123;
        url: $usercenter_url+&quot;/wp-json/wp/v2/users/1&quot;,
        type: &quot;get&quot;,
        dataType: &quot;json&quot;,
        contentType: &quot;application/json&quot;,
        success: function (res) &#123;
            console.log(res);
            // var html = &quot;&lt;li class=&#39;list-group-item useritem&#39;&gt;&lt;img src=&quot;+res[i][&#39;avatar_urls&#39;][&#39;48&#39;]+&quot; style=&#39;width:100%;max-width:24px&#39;&gt; &lt;span data_user_id=&#39;&quot;+res[i][&#39;id&#39;]+&quot;&#39;&gt;&quot;+res[i][&#39;name&#39;]+&quot;&lt;/span&gt;&lt;/li&gt;&quot;;
            $(&quot;#page_list .dashbord&quot;).prepend(&quot;&lt;img src=&quot;+res[&#39;avatar_urls&#39;][&#39;48&#39;]+&quot; style=&#39;width:100%;max-width:24px;display:inline-block;margin-right:10px;border-radius:50%&#39;&gt;&quot;);
            // $(&quot;#page_list&quot;).append(html);
        &#125;,
        error: function (xhr, err, exception) &#123;
            console.log(err);
        &#125;
    &#125;);

    // 解决动态生成的dom没法点击的问题
    $(document).on(&quot;click&quot;,&quot;#page_list li.categories span&quot;,function(event)&#123;
        event.stopPropagation();

        var singlepost = $(this).attr(&quot;data_post_id&quot;);
        $(this).parent().addClass(&#39;active&#39;).siblings().removeClass(&#39;active&#39;);
        console.log(singlepost);

        htmlobj = $.ajax(&#123;
            url: $usercenter_url+&quot;/wp-json/wp/v2/posts/&quot;+singlepost,
            type: &quot;get&quot;,
            dataType: &quot;json&quot;,
            contentType: &quot;application/json&quot;,
            success: function (res) &#123;
                $(&quot;#contentarea&quot;).empty();
                $(&quot;#contentarea&quot;).append(&quot;&lt;div class=&#39;contentarea&#39;&gt;&quot;+res[&#39;content&#39;][&#39;rendered&#39;]+&quot;&lt;/div&gt;&quot;);
            &#125;,
            error: function (xhr, err, exception) &#123;
                console.log(err);
            &#125;
        &#125;); 
    &#125;);

    $(document).on(&quot;click&quot;,&quot;#page_list li&quot;,function()&#123;
        $(this).addClass(&#39;active&#39;).siblings().removeClass(&#39;active&#39;);
    &#125;);

    function displayPersonalUserInfo()&#123;

        var singlepost = $(this).attr(&quot;data_user_id&quot;);
        $(this).addClass(&#39;active&#39;).siblings().removeClass(&#39;active&#39;);
        console.log(singlepost);
        nikename = $(&quot;.nikename&quot;).text();
        username = $(&quot;.username&quot;).text();
        userip   = $(&quot;.userip&quot;).text();
        useremail = $(&quot;.useremail&quot;).text();
        websitename = $(&quot;.websitename&quot;).text();

        $(&quot;#contentarea&quot;).empty();
        var html = &#39;&lt;div class=&quot;panel panel-default&quot;&gt;&#39;;
            html += &#39;&lt;div class=&quot;panel-heading&quot;&gt;你好！&#39;+nikename+&#39;&lt;/div&gt;&#39;;
            html += &#39;&lt;div class=&quot;panel-body&quot;&gt;&#39;;
            html += &#39;&lt;p&gt;欢迎回到noctiuniversity.com&lt;/p&gt;&#39;;
            html += &#39;&lt;p&gt;用户名&#39;+websitename+&#39;&lt;/p&gt;&#39;;
            html += &#39;&lt;table class=&quot;table&quot;&gt;&#39;
            html += &#39;&lt;tr&gt;&lt;th&gt;用户名&lt;/th&gt;&lt;th&gt;电邮&lt;/th&gt;&lt;th&gt;当前IP&lt;/th&gt;&lt;/tr&gt;&#39;;
            html += &#39;&lt;tr&gt;&lt;td&gt;&#39;+username+&#39;&lt;/td&gt;&lt;td&gt;&#39;+useremail+&#39;&lt;/td&gt;&lt;td&gt;&#39;+userip+&#39;&lt;/td&gt;&lt;/tr&gt;&#39;;
            html += &#39;&lt;hr&gt;&#39;;
            html += &#39;&lt;/div&gt;&#39;;
            html += &#39;&lt;/div&gt;&#39;;
        $(&quot;#contentarea&quot;).append(html);
        $(&quot;#contentarea .panel-body&quot;).append(&quot;&lt;ul class=&#39;personal_post_list&#39;&gt;&lt;/ul&gt;&quot;);

        htmlobj_category = $.ajax(&#123;
            url: $usercenter_url+&quot;/wp-json/wp/v2/posts&quot;,
            type: &quot;get&quot;,
            dataType: &quot;json&quot;,
            contentType: &quot;application/json&quot;,
            success: function (res) &#123;
                console.log(res);
                var html = &quot;&lt;h4&gt;我发布的文章&lt;/h4&gt;&quot;;
                for (var i = 0; i &lt; res.length; i++) &#123;
                    html += &quot;&lt;li class=&#39;list-group-item categories&#39;&gt;&lt;i class=&#39;glyphicon glyphicon-menu-right&#39;&gt;&lt;/i&gt; &lt;span data_post_id=&#39;&quot;+res[i][&#39;id&#39;]+&quot;&#39;&gt;&quot;+res[i][&#39;title&#39;][&#39;rendered&#39;]+&quot;&lt;/span&gt;&lt;i class=&#39;glyphicon glyphicon-trash&#39;&gt;&lt;/i&gt;&lt;/li&gt;&quot;;
                &#125;
                $(&quot;.personal_post_list&quot;).append(html);
            &#125;,
            error: function (xhr, err, exception) &#123;
                console.log(err);
            &#125;
        &#125;);

    &#125;;
    displayPersonalUserInfo();

    $(document).on(&quot;click&quot;,&quot;.useritem&quot;,function()&#123;
       displayPersonalUserInfo();
    &#125;);

    $(&quot;.bpost&quot;).css(&#123;&quot;display&quot;:&quot;none&quot;&#125;);
    $(document).on(&quot;click&quot;,&quot;.public_post&quot;,function()&#123;
        $(&quot;#contentarea&quot;).empty();
        $(&quot;.bpost&quot;).css(&#123;&quot;display&quot;:&quot;block&quot;&#125;);
        // $(&quot;#contentarea .panel-body&quot;).append();
    &#125;);

    $(document).on(&quot;click&quot;,&quot;#contentarea .panel-body .personal_post_list li span&quot;,function(event)&#123;
        event.stopPropagation();

        var singlepost = $(this).attr(&quot;data_post_id&quot;);
        $(this).parent().addClass(&#39;active&#39;).siblings().removeClass(&#39;active&#39;);
        console.log(singlepost);

        htmlobj = $.ajax(&#123;
            url: $usercenter_url+&quot;/wp-json/wp/v2/posts/&quot;+singlepost,
            type: &quot;get&quot;,
            dataType: &quot;json&quot;,
            contentType: &quot;application/json&quot;,
            success: function (res) &#123;
                $(&quot;#contentarea&quot;).empty();
                $(&quot;#contentarea&quot;).append(&quot;&lt;div class=&#39;contentarea&#39;&gt;&quot;+res[&#39;content&#39;][&#39;rendered&#39;]+&quot;&lt;/div&gt;&quot;);
            &#125;,
            error: function (xhr, err, exception) &#123;
                console.log(err);
            &#125;
        &#125;); 
    &#125;);

    $(document).on(&quot;click&quot;,&quot;#page_list li.categories .glyphicon-trash&quot;,function(event)&#123;
        event.stopPropagation();

        var singlepost = $(this).siblings(&#39;span&#39;).attr(&quot;data_post_id&quot;);

        $.ajax(&#123;
        　　url:$usercenter_url+&quot;/wp-json/jwt-auth/v1/token&quot;,
        　　method:&quot;POST&quot;,
        　　data:&#123;
        　　　　username:&quot;HLQ&quot;,
        　　　　password:&quot;HGST7105001&quot;
        　　&#125;,
        　　success:function(res)&#123;
        　　　　console.log(res);
        　　　　Token = res.token;
        　　　　$.ajax(&#123;
        　　　　　　url: $usercenter_url+&quot;/wp-json/wp/v2/posts/&quot;+singlepost+&quot;?_method=DELETE&quot;,
                   dataType: &quot;json&quot;,
                   contentType: &quot;application/json&quot;,
        　　　　　　beforeSend: function(xhr) &#123;
        　　　　　　　　xhr.setRequestHeader(&quot;Authorization&quot;,&quot;Bearer &quot; + Token);
        　　　　　　&#125;,
        　　　　　　data:&#123;
        　　　　　　　　&quot;title&quot;:&quot;hello world&quot;
        　　　　　　&#125;,
        　　　　　　success:function(res)&#123;
                        console.log(res);
                        location.reload(true);
        　　　　　　&#125;,
                   error: function (xhr, err, exception) &#123;
                        console.log(err);
                   &#125;
        　　　　&#125;);
        　　&#125;,
            error: function (xhr, err, exception) &#123;
                console.log(err);
            &#125;
        &#125;);


    &#125;);

&#125;)</code></pre>
<p><strong>get_info.js代码：</strong></p>
<pre><code>var outh_info = new Object();
outh_info.consumer_key = &#39;ck_d401c8757e62e7fc9ca915198f00e9f759814564&#39;;
outh_info.consumer_secret = &#39;cs_dbe85507fd8ef25fa7bfacf4222fc6b54843593c&#39;;

var host = window.location.host;
var protocol = window.location.protocol;
$get_info_links = protocol+&quot;//&quot;+host;

$(document).on(&quot;click&quot;,&quot;#page_list .product_list&quot;,function()&#123;

    htmlobj_category = $.ajax(&#123;
        url: $get_info_links+&quot;/wp-json/wc/v2/products?consumer_key=&quot;+outh_info.consumer_key+&quot;&amp;consumer_secret=&quot;+outh_info.consumer_secret,
        type: &quot;get&quot;,
        dataType: &quot;json&quot;,
        contentType: &quot;application/json&quot;,
        success: function (res) &#123;
            // console.log(res);
            html = &quot;&quot;;
            for (var i = res.length - 1; i &gt;= 0; i--) &#123;
                html += &#39;&lt;div class=&quot;media&quot;&gt;&#39;;
                html += &#39;&lt;div class=&quot;media-left&quot; style=&quot;max-width:120px;width:100%&quot;&gt;&#39;;
                html += &#39;&lt;a href=&quot;&#39;+res[i][&quot;permalink&quot;]+&#39;&quot;&gt;&#39;;
                html += &#39;&lt;img class=&quot;media-object&quot; src=&quot;&#39;+res[i][&quot;images&quot;][0][&quot;src&quot;]+&#39;&quot; alt=&quot;&#39;+res[i][&quot;name&quot;]+&#39;&quot;&gt;&#39;;
                html += &#39;&lt;/a&gt;&#39;;
                html += &#39;&lt;/div&gt;&#39;;
                html += &#39;&lt;div class=&quot;media-body&quot;&gt;&#39;;
                html += &#39;&lt;h4 class=&quot;media-heading&quot;&gt;&#39;+res[i][&quot;name&quot;]+&#39;&lt;/h4&gt;&#39;;
                html += &#39;&lt;/div&gt;&#39;;
                html += &#39;&lt;/div&gt;&#39;;
            &#125;
            $(&quot;#contentarea&quot;).empty();
            $(&quot;#contentarea&quot;).append(html);
        &#125;,
        error: function (xhr, err, exception) &#123;
            console.log(err);
        &#125;
    &#125;);
&#125;);

htmlobj_category = $.ajax(&#123;
    url: $get_info_links+&quot;/wp-json/wc/v2/orders?consumer_key=&quot;+outh_info.consumer_key+&quot;&amp;consumer_secret=&quot;+outh_info.consumer_secret,
    type: &quot;get&quot;,
    dataType: &quot;json&quot;,
    contentType: &quot;application/json&quot;,
    success: function (res) &#123;
        console.log(res);
        $(&quot;#page_list .order_list .badge&quot;).append(res.length);
    &#125;,
    error: function (xhr, err, exception) &#123;
        console.log(err);
    &#125;
&#125;);

$(document).on(&quot;click&quot;,&quot;#page_list .order_list&quot;,function()&#123;

    htmlobj_category = $.ajax(&#123;
        url: $get_info_links+&quot;/wp-json/wc/v2/orders?consumer_key=&quot;+outh_info.consumer_key+&quot;&amp;consumer_secret=&quot;+outh_info.consumer_secret,
        type: &quot;get&quot;,
        dataType: &quot;json&quot;,
        contentType: &quot;application/json&quot;,
        success: function (res) &#123;
            // console.log(res);
            console.log(res[0][&quot;line_items&quot;]);
            html = &quot;&quot;;
            html += &#39;&lt;div class=&quot;list-group&quot; style=&quot;margin-bottom: 50px;&quot;&gt;&#39;;
            html += &#39;  &lt;a href=&quot;#&quot; class=&quot;list-group-item active&quot;&gt;&#39;;
            html += &#39;    &lt;h4 class=&quot;list-group-item-heading&quot;&gt;订单列表&lt;/h4&gt;&#39;;
            // html += &#39;    &lt;p class=&quot;list-group-item-text&quot;&gt;...&lt;/p&gt;&#39;;
            html += &#39;  &lt;/a&gt;&#39;;
            html += &#39;&lt;div&gt;&#39;;
            // html += &#39;&lt;hr&gt;&#39;;
            for (var i = res.length - 1; i &gt;= 0; i--) &#123;
                html += &#39;&lt;div class=&quot;orderItems&quot;&gt;&#39;;
                html += &#39;&lt;div class=&quot;row&quot;&gt;&#39;;
                html +=     &#39;&lt;div class=&quot;col-md-4&quot; style=&quot;padding-left:0px&quot;&gt;&lt;p class=&quot;orderNumber&quot;&gt;&lt;i class=&quot;fa fa-barcode&quot;&gt;&lt;/i&gt; 订单号：&#39;+res[i][&quot;number&quot;]+&#39;&lt;/p&gt;&lt;/div&gt;&#39;;
                html +=     &#39;&lt;div class=&quot;col-md-4&quot;&gt;&lt;p class=&quot;totals&quot;&gt;订单总金额：&lt;i class=&quot;fa fa-usd&quot;&gt;&lt;/i&gt; &#39;+res[i][&quot;total&quot;]+&#39;&lt;/p&gt;&lt;/div&gt;&#39;;
                html +=     &#39;&lt;div class=&quot;col-md-4&quot;&gt;&lt;p class=&quot;times&quot;&gt;&lt;i class=&quot;fa fa-clock-o&quot;&gt;&lt;/i&gt; 时间：&#39;+res[i][&quot;date_created&quot;]+&#39;&lt;/p&gt;&lt;/div&gt;&#39;;
                html +=  &#39;&lt;/div&gt;&#39;;
                html +=  &#39;&lt;div class=&quot;row&quot;&gt;&#39;;
                html +=     &#39;&lt;div class=&quot;col-md-4&quot; style=&quot;padding-left:0px&quot;&gt;&lt;p class=&quot;status&quot;&gt;订单状态：&#39;+res[i][&quot;status&quot;]+&#39;&lt;/p&gt;&lt;/div&gt;&#39;;
                html +=     &#39;&lt;div class=&quot;col-md-4&quot;&gt;&lt;p class=&quot;payments&quot;&gt;&lt;i class=&quot;fa fa-credit-card&quot;&gt;&lt;/i&gt; 支付方式：&#39;+res[i][&quot;payment_method_title&quot;]+&#39;&lt;/p&gt;&lt;/div&gt;&#39;;
                html +=     &#39;&lt;div class=&quot;col-md-4&quot;&gt;&lt;p class=&quot;shipping&quot;&gt;&lt;span&gt;&lt;i class=&quot;fa fa-truck&quot;&gt;&lt;/i&gt; 配送方式：&#39;+res[i][&quot;shipping_lines&quot;][0][&quot;method_title&quot;]+&#39;&lt;/span&gt;&amp;nbsp;&amp;nbsp;&lt;span&gt;费用：&#39;+res[i][&quot;shipping_lines&quot;][0][&quot;total&quot;]+&#39;&lt;/span&gt;&lt;/p&gt;&lt;/div&gt;&#39;;
                html +=   &#39;&lt;/div&gt;&#39;;
                html +=     &#39;&lt;h4 style=&quot;color:#D9534F&quot;&gt;订单产品明细&lt;/h4&gt;&#39;;
                    html +=  &#39;&lt;div class=&quot;row order_product_list&quot;&gt;&#39;;
                for (var j = res[i][&quot;line_items&quot;].length - 1; j &gt;= 0; j--) &#123;
                    html +=     &#39;&lt;div class=&quot;col-md-4&quot; style=&quot;padding-left:0px&quot;&gt;&lt;p class=&quot;productName&quot;&gt;&lt;i class=&quot;fa fa-product-hunt&quot;&gt;&lt;/i&gt; 产品：&#39;+res[i][&quot;line_items&quot;][j][&quot;name&quot;]+&#39;&lt;/p&gt;&lt;/div&gt;&#39;;
                    html +=     &#39;&lt;div class=&quot;col-md-4&quot;&gt;&lt;p class=&quot;sku&quot;&gt;&lt;i class=&quot;fa fa-barcode&quot;&gt;&lt;/i&gt; sku：&#39;+res[i][&quot;line_items&quot;][j][&quot;sku&quot;]+&#39;&lt;/p&gt;&lt;/div&gt;&#39;;
                    html +=     &#39;&lt;div class=&quot;col-md-2&quot;&gt;&lt;p class=&quot;danjia&quot;&gt;&lt;i class=&quot;fa fa-usd&quot;&gt;&lt;/i&gt; 单价：&#39;+res[i][&quot;line_items&quot;][j][&quot;price&quot;]+&#39;&lt;/p&gt;&lt;/div&gt;&#39;;
                    html +=     &#39;&lt;div class=&quot;col-md-2&quot;&gt;&lt;p class=&quot;shuliang&quot;&gt;数量：&#39;+res[i][&quot;line_items&quot;][j][&quot;quantity&quot;]+&#39;&lt;/p&gt;&lt;/div&gt;&#39;;
                &#125;
                    html +=   &#39;&lt;/div&gt;&#39;;
                html += &#39;&lt;/div&gt;&#39;;
                html += &#39;&lt;hr&gt;&#39;;
            &#125;
            $(&quot;#contentarea&quot;).empty();
            $(&quot;#contentarea&quot;).append(html);
        &#125;,
        error: function (xhr, err, exception) &#123;
            console.log(err);
        &#125;
    &#125;);
&#125;);

$(document).on(&quot;click&quot;,&quot;#page_list .order_address&quot;,function()&#123;

    htmlobj_category = $.ajax(&#123;
        url: $get_info_links+&quot;/wp-json/wc/v2/orders?consumer_key=&quot;+outh_info.consumer_key+&quot;&amp;consumer_secret=&quot;+outh_info.consumer_secret,
        type: &quot;get&quot;,
        dataType: &quot;json&quot;,
        contentType: &quot;application/json&quot;,
        success: function (res) &#123;
            // console.log(res);
            var html = &#39;&#39;;
            html += &#39;&lt;div class=&quot;list-group&quot;&gt;&#39;;
            html += &#39;  &lt;div class=&quot;list-group-item&quot;&gt;&#39;;
            html += &#39;    &lt;h4 class=&quot;list-group-item-heading&quot;&gt;账单地址&lt;/h4&gt;&#39;;
            html += &#39;    &lt;p class=&quot;list-group-item-text&quot;&gt;&lt;span&gt;first name:&#39;+res[0][&quot;billing&quot;][&quot;first_name&quot;]+&#39;&lt;/span&gt;&lt;span&gt;&#39;+res[0][&quot;billing&quot;][&quot;last_name&quot;]+&#39;&lt;/span&gt;&lt;/p&gt;&#39;;
            html += &#39;&lt;p class=&quot;list-group-item-text&quot;&gt;&lt;span&gt;company:&#39;+res[0][&quot;billing&quot;][&quot;company&quot;]+&#39;&lt;/span&gt;&lt;/p&gt;&#39;;
            html += &#39;&lt;p class=&quot;list-group-item-text&quot;&gt;address:&lt;span&gt;&#39;+res[0][&quot;billing&quot;][&quot;address_1&quot;]+&#39;&lt;/span&gt; &lt;span&gt;&#39;+res[0][&quot;billing&quot;][&quot;address_1&quot;]+&#39;&lt;/span&gt;&lt;/p&gt;&#39;;
            html += &#39;&lt;p class=&quot;list-group-item-text&quot;&gt;&lt;span&gt;postcode:&#39;+res[0][&quot;billing&quot;][&quot;postcode&quot;]+&#39;&lt;/span&gt;&lt;/p&gt;&#39;;
            html += &#39;&lt;p class=&quot;list-group-item-text&quot;&gt;&lt;span&gt;city:&#39;+res[0][&quot;billing&quot;][&quot;city&quot;]+&#39;&lt;/span&gt;&lt;/p&gt;&#39;;
            html += &#39;&lt;p class=&quot;list-group-item-text&quot;&gt;&lt;span&gt;email:&#39;+res[0][&quot;billing&quot;][&quot;email&quot;]+&#39;&lt;/span&gt;&lt;/p&gt;&#39;;
            html += &#39;&lt;p class=&quot;list-group-item-text&quot;&gt;&lt;span&gt;phone:&#39;+res[0][&quot;billing&quot;][&quot;phone&quot;]+&#39;&lt;/span&gt;&lt;/p&gt;&#39;;
            html += &#39;&lt;p class=&quot;list-group-item-text&quot;&gt;&lt;span&gt;country:&#39;+res[0][&quot;billing&quot;][&quot;country&quot;]+&#39;&lt;/span&gt;&lt;/p&gt;&#39;;
            html += &#39;  &lt;/div&gt;&#39;;
            html += &#39;&lt;/div&gt;&#39;;

            $(&quot;#contentarea&quot;).empty();
            $(&quot;#contentarea&quot;).append(html);
        &#125;,
        error: function (xhr, err, exception) &#123;
            console.log(err);
        &#125;
    &#125;);
&#125;);

// 默认情况隐藏添加和更新优惠券的输入框
$(&quot;#create_coupon&quot;).css(&#123;&quot;display&quot;:&quot;none&quot;&#125;);
$(&quot;#coupon_update&quot;).css(&#123;&quot;display&quot;:&quot;none&quot;&#125;);

htmlobj_coupons = $.ajax(&#123;
    url: $get_info_links+&quot;/wp-json/wc/v2/coupons?consumer_key=&quot;+outh_info.consumer_key+&quot;&amp;consumer_secret=&quot;+outh_info.consumer_secret,
    type: &quot;get&quot;,
    dataType: &quot;json&quot;,
    contentType: &quot;application/json&quot;,
    success: function (res) &#123;
        // console.log(res);
        $(&quot;#page_list .coupons_list .badge&quot;).append(res.length);
    &#125;,
    error: function (xhr, err, exception) &#123;
        console.log(err);
    &#125;
&#125;);

// 优惠券列表
$(document).on(&quot;click&quot;,&quot;#page_list .coupons_list&quot;,function()&#123;

    htmlobj_category = $.ajax(&#123;
        url: $get_info_links+&quot;/wp-json/wc/v2/coupons?consumer_key=&quot;+outh_info.consumer_key+&quot;&amp;consumer_secret=&quot;+outh_info.consumer_secret,
        type: &quot;get&quot;,
        dataType: &quot;json&quot;,
        contentType: &quot;application/json&quot;,
        success: function (res) &#123;
            // console.log(res);
            var html = &#39;&lt;h4&gt;优惠券列表&lt;/h4&gt;&#39;;
            html += &#39;&lt;table class=&quot;table&quot;&gt;&#39;;
            html += &#39;&lt;tr&gt;&#39;;
            html += &#39;&lt;th&gt;ID&lt;/th&gt;&#39;;
            html += &#39;&lt;th&gt;优惠码&lt;/th&gt;&#39;;
            html += &#39;&lt;th&gt;折扣类型&lt;/th&gt;&#39;;
            html += &#39;&lt;th&gt;使用限制&lt;/th&gt;&#39;;
            html += &#39;&lt;th&gt;操作 &lt;button type=&quot;button&quot; class=&quot;btn btn-success chuangjian&quot;&gt;创建&lt;/button&gt;&lt;/th&gt;&#39;;
            html += &#39;&lt;/tr&gt;&#39;;
            for (var i = res.length - 1; i &gt;= 0; i--) &#123;
                html += &#39;&lt;tr&gt;&#39;;
                  html += &#39;&lt;td class=&quot;coupon_id&quot;&gt;&#39;+res[i][&quot;id&quot;]+&#39;&lt;/td&gt;&#39;;
                  html += &#39;&lt;td class=&quot;coupon_code&quot;&gt;&#39;+res[i][&quot;code&quot;]+&#39;&lt;/td&gt;&#39;;
                  html += &#39;&lt;td&gt;&#39;+res[i][&quot;discount_type&quot;]+&#39;&lt;/td&gt;&#39;;
                  if (res[i][&quot;usage_limit_per_user&quot;] === null) &#123;
                      html += &#39;&lt;td class=&quot;limited_time&quot;&gt;无限制&lt;/td&gt;&#39;;
                  &#125;else&#123;
                      html += &#39;&lt;td class=&quot;limited_time&quot;&gt;&#39;+res[i][&quot;usage_limit_per_user&quot;]+&#39;&lt;/td&gt;&#39;;
                  &#125;
                  html += &#39;&lt;td class=&quot;actions&quot;&gt;&lt;button type=&quot;button&quot; class=&quot;btn btn-primary&quot;&gt;编辑&lt;/button&gt;&lt;button type=&quot;button&quot; class=&quot;btn btn-danger&quot;&gt;删除&lt;/button&gt;&lt;/td&gt;&#39;;
                  html += &#39;&lt;/tr&gt;&#39;;
            &#125;
            html += &#39;&lt;/table&gt;&#39;;
            $(&quot;#contentarea&quot;).empty();
            $(&quot;#contentarea&quot;).append(html);
        &#125;,
        error: function (xhr, err, exception) &#123;
            console.log(err);
        &#125;
    &#125;);
&#125;);

// 删除优惠券
$(document).on(&quot;click&quot;,&quot;.actions .btn-danger&quot;,function()&#123;
    var current_coupon = $(this).parent().siblings(&#39;.coupon_id&#39;).text();
    var settings = &#123;
      &quot;async&quot;: true,
      &quot;crossDomain&quot;: true,
      &quot;url&quot;: $get_info_links+&quot;/wp-json/wc/v2/coupons/&quot;+current_coupon+&quot;?force=true&amp;consumer_key=&quot;+outh_info.consumer_key+&quot;&amp;consumer_secret=&quot;+outh_info.consumer_secret,
      &quot;method&quot;: &quot;DELETE&quot;,
      dataType: &quot;json&quot;,
      contentType: &quot;application/json&quot;,
    &#125;
    var r=confirm(&quot;确认删除？&quot;);

    if (r)&#123;
        $.ajax(settings).done(function (response) &#123;
          console.log(response);
          alert(&quot;删除成功！&quot;);
          location.reload(true);
        &#125;);
    &#125;

&#125;);

// 点击更新
$(document).on(&quot;click&quot;,&quot;.actions .btn-primary&quot;,function()&#123;
    var current_coupon = $(this).parent().siblings(&#39;.coupon_id&#39;).text();
    var coupon = $(this).parent().siblings(&#39;.coupon_code&#39;).text();
    var limited_time = $(this).parent().siblings(&#39;.limited_time&#39;).text();
    var r=confirm(&quot;确认编辑吗？&quot;);

    if (r)&#123;
        $(&quot;#contentarea&quot;).empty();
        $(&quot;#coupon_update&quot;).css(&#123;&quot;display&quot;:&quot;block&quot;&#125;);
        $(&quot;#coupon_update #youhuiquan&quot;).val(coupon);
        $(&quot;#coupon_update #xianzhi&quot;).val(limited_time);
        $(&quot;#coupon_update #youhuiquan&quot;).after(&quot;&lt;input type=&#39;hidden&#39; value=&#39;&quot;+current_coupon+&quot;&#39;&gt;&quot;);
    &#125;

&#125;);

// 更新优惠券
$(document).on(&quot;click&quot;,&quot;#coupon_update .update&quot;,function()&#123;
    var current_coupon_id = $(this).siblings(&quot;input[type=&#39;hidden&#39;]&quot;).val();
    var user_limited_times = $(this).siblings(&#39;#xianzhi&#39;).val();
    var coupon = $(this).siblings(&#39;#youhuiquan&#39;).val();
    jsonstr = &#123;&quot;code&quot;:coupon,&quot;usage_limit_per_user&quot;:user_limited_times&#125;;
    var settings = &#123;
      &quot;async&quot;: true,
      &quot;crossDomain&quot;: true,
      &quot;url&quot;: $get_info_links+&quot;/wp-json/wc/v2/coupons/&quot;+current_coupon_id+&quot;?consumer_key=&quot;+outh_info.consumer_key+&quot;&amp;consumer_secret=&quot;+outh_info.consumer_secret,
      &quot;method&quot;: &quot;PUT&quot;,
      data: JSON.stringify(jsonstr),
      dataType: &quot;json&quot;,
      contentType: &quot;application/json&quot;,
    &#125;
    var r=confirm(&quot;确认提交更新吗？&quot;);

    if (r)&#123;
        $.ajax(settings).done(function (response) &#123;
          console.log(response);
          alert(&quot;更新成功！&quot;);
          location.reload(true);
        &#125;);
    &#125;

&#125;);


// 点击创建
$(document).on(&quot;click&quot;,&quot;.chuangjian&quot;,function()&#123;
    var r=confirm(&quot;确认创建吗？&quot;);

    if (r)&#123;
        $(&quot;#contentarea&quot;).empty();
        $(&quot;#create_coupon&quot;).css(&#123;&quot;display&quot;:&quot;block&quot;&#125;).siblings(&#39;#coupon_update&#39;).css(&#123;&quot;display&quot;:&quot;none&quot;&#125;);
    &#125;

&#125;);

// 创建优惠券

$(document).on(&quot;click&quot;,&quot;#create_coupon .create&quot;,function()&#123;

    var code = $(&quot;#create_coupon #code&quot;).val();
    var jine = $(&quot;#create_coupon #jine&quot;).val();
    var minimum_amount = $(&quot;#minimum_amount&quot;).text();
    data_inter = &#123;
      &quot;code&quot;: code,
      &quot;amount&quot;: jine,
      &quot;individual_use&quot;: true,
      &quot;exclude_sale_items&quot;: true,
      &quot;minimum_amount&quot;: minimum_amount
    &#125;;
    var settings = &#123;
      &quot;async&quot;: true,
      &quot;crossDomain&quot;: true,
      &quot;url&quot;: $get_info_links+&quot;/wp-json/wc/v2/coupons/?consumer_key=&quot;+outh_info.consumer_key+&quot;&amp;consumer_secret=&quot;+outh_info.consumer_secret,
      &quot;method&quot;: &quot;POST&quot;,
      data: JSON.stringify(data_inter),
      dataType: &quot;json&quot;,
      contentType: &quot;application/json&quot;,
    &#125;
    var r=confirm(&quot;确认提交吗？&quot;);

    if (r)&#123;
        $.ajax(settings).done(function (response) &#123;
          console.log(response);
          alert(&quot;创建成功！&quot;);
          location.reload(true);
        &#125;);
    &#125;

&#125;);</code></pre>
<p>这个就是全部的代码了，可是即使你跟着这些全部贴进去也不一定会生效，还得做如下的设置：</p>
<ol>
<li>这个woocommerce的key的生成这里，如果想要进行编辑，更新，删除的操作，那么在网站后台woocommerce生成key的时候，就要把权限设置为读和写。默认情况下是读。</li>
<li>另外一个问题就是充分借助postman这个调试api的客户端工具</li>
</ol>
<p>笔者分享一下用客户端进行调试的经验。</p>
<h2 id="删除优惠券"><a href="#删除优惠券" class="headerlink" title="删除优惠券"></a>删除优惠券</h2><p>就拿woocommerce的rest api来说吧，假如想要删除一个优惠券（其他的类似），我们先是去官网找到删除一优惠券的教程：</p>
<p>第一步：</p>
<pre><code>curl -X DELETE https://example.com/wp-json/wc/v3/coupons/719?force=true \
-u consumer_key:consumer_secret</code></pre>
<p><img src="https://i.imgur.com/5UvMEKv.jpg"></p>
<p>记住，这里把v3改成v2，用低版本的会稳定点，另外需要注意一点的是，删除的时候会带这样一个参数<code>force=true</code>。这个在教程里面有说。</p>
<p>我们就把这个放在postman里面：</p>
<p><img src="https://i.imgur.com/sOwVo2B.jpg"></p>
<p>这个是获取所有优惠券的api，接口地址：</p>
<pre><code>https://yourdomain.com/wp-json/wc/v2/coupons?consumer_key=ck_d401c8757e62e7fc9ca915198f00e9f759814564&amp;consumer_secret=cs_dbe85507fd8ef25fa7bfacf4222fc6b54843593c</code></pre>
<p>说这里就是为了接下来的删除，我们找到其中一个优惠券的信息，这个有个ID为12517的优惠券，我们就拿这个演示删除。</p>
<p>我们在postman那边新建一个tab，然后把删除优惠券的api粘贴进去：</p>
<p><img src="https://i.imgur.com/UlKTbgx.jpg"></p>
<p>选择method为DELETE，然后把key填写进去，或者在下方的那里添加也行，api地址：</p>
<pre><code>https://yourdomain.com/wp-json/wc/v2/coupons/12517?force=true&amp;consumer_key=ck_d401c8757e62e7fc9ca915198f00e9f759814564&amp;consumer_secret=cs_dbe85507fd8ef25fa7bfacf4222fc6b54843593c</code></pre>
<p>看到了吗，这里笔者是要删除ID为12517的这个优惠券，点击发送，就删除成功了，下方会显示这个优惠券的相关信息。</p>
<p>好的，这里说一下，右边的那个Code那里，点击这里就可以对当前这个操作自动生成方法，有针对不同语言的。笔者这里用的是javascript，因此这里选择javascript ajax:</p>
<p><img src="https://i.imgur.com/3IZaPki.jpg"></p>
<p>这个时候，我们就可以把这个代码粘贴到js文件里面，发起ajax请求使用了。大家可以看到笔者上面的js文件里面就是这样运用的。</p>
<p>实不相瞒，笔者在调试api的时候，都是先在这里测试一下是否成功，如果成功就把代码放进js文件里面在进行运用。而且这里生成的代码跟笔者以前采用的写法还有有点不一样的，这些都是可以用来借鉴的，好的，用这种方法成功地完成了对优惠券的删除，笔者进一步讲解下更新和创建一个优惠券的方法。</p>
<h2 id="更新优惠券"><a href="#更新优惠券" class="headerlink" title="更新优惠券"></a>更新优惠券</h2><p>跟上面一样，我们先去官网找更新优惠券的方法：</p>
<pre><code>curl -X PUT https://example.com/wp-json/wc/v3/coupons/719 \
    -u consumer_key:consumer_secret \
    -H &quot;Content-Type: application/json&quot; \
    -d &#39;&#123;
  &quot;amount&quot;: &quot;5&quot;
&#125;&#39;</code></pre>
<p>这个一定要读懂是什么意思，这个是官网里面的一个示例，这个意思就是说，更新采用的method是PUT，然后地址有了，那个719是优惠券的ID，后面那个就是key了，<code>-H</code>这个就是请求头部，就是ajax请求的那个参数：</p>
<pre><code>contentType: &quot;application/json&quot;,</code></pre>
<p>接下来的<code>-d</code>就是一个json格式的数据，这里就是说我们要更新这个优惠券的什么信息，如果我们只是更新这个amount，那么我们到时候直接把在输入框输入的amount的这个值的变量代替这个示例值5即可。我们看下一个优惠券的json数据格式：</p>
<pre><code>[
    &#123;
        &quot;id&quot;: 12477,
        &quot;code&quot;: &quot;wertqh4524565&quot;,
        &quot;amount&quot;: &quot;7.00&quot;,
        &quot;date_created&quot;: &quot;2018-11-23T09:52:29&quot;,
        &quot;date_created_gmt&quot;: &quot;2018-11-23T01:52:29&quot;,
        &quot;date_modified&quot;: &quot;2018-11-23T09:52:29&quot;,
        &quot;date_modified_gmt&quot;: &quot;2018-11-23T01:52:29&quot;,
        &quot;discount_type&quot;: &quot;percent&quot;,
        &quot;description&quot;: &quot;&quot;,
        &quot;date_expires&quot;: &quot;2018-11-30T00:00:00&quot;,
        &quot;date_expires_gmt&quot;: &quot;2018-11-29T16:00:00&quot;,
        &quot;usage_count&quot;: 0,
        &quot;individual_use&quot;: true,
        &quot;product_ids&quot;: [],
        &quot;excluded_product_ids&quot;: [],
        &quot;usage_limit&quot;: 22,
        &quot;usage_limit_per_user&quot;: 6,
        &quot;limit_usage_to_x_items&quot;: 10,
        &quot;free_shipping&quot;: false,
        &quot;product_categories&quot;: [],
        &quot;excluded_product_categories&quot;: [],
        &quot;exclude_sale_items&quot;: true,
        &quot;minimum_amount&quot;: &quot;25.00&quot;,
        &quot;maximum_amount&quot;: &quot;5000.00&quot;,
        &quot;email_restrictions&quot;: [],
        &quot;used_by&quot;: [],
        &quot;meta_data&quot;: [],
        &quot;_links&quot;: &#123;
            &quot;self&quot;: [
                &#123;
                    &quot;href&quot;: &quot;https://wordpress.noctiuniversity.com/wp-json/wc/v2/coupons/12477&quot;
                &#125;
            ],
            &quot;collection&quot;: [
                &#123;
                    &quot;href&quot;: &quot;https://wordpress.noctiuniversity.com/wp-json/wc/v2/coupons&quot;
                &#125;
            ]
        &#125;
    &#125;,
    &#123;
    ...
     &#125;
]</code></pre>
<p>看到没这个amount就是这么来的，如果想要更新优惠券，那么就添加code这个字段即可。笔者这里更新的是如下：</p>
<pre><code>&lt;div class=&quot;form-group&quot; id=&quot;coupon_update&quot;&gt;
    &lt;label&gt;优惠券&lt;/label&gt;
    &lt;input type=&quot;text&quot; class=&quot;form-control&quot; id=&quot;xianzhi&quot; value=&quot;&quot;&gt;
    &lt;input type=&quot;text&quot; class=&quot;form-control&quot; id=&quot;youhuiquan&quot; value=&quot;&quot;&gt;
    &lt;button type=&quot;button&quot; class=&quot;btn btn-info update&quot;&gt;更新&lt;/button&gt;
&lt;/div&gt;</code></pre>
<p>其中js代码：</p>
<pre><code>// 点击更新
$(document).on(&quot;click&quot;,&quot;.actions .btn-primary&quot;,function()&#123;
    var current_coupon = $(this).parent().siblings(&#39;.coupon_id&#39;).text();
    var coupon = $(this).parent().siblings(&#39;.coupon_code&#39;).text();
    var limited_time = $(this).parent().siblings(&#39;.limited_time&#39;).text();
    var r=confirm(&quot;确认编辑吗？&quot;);

    if (r)&#123;
        $(&quot;#contentarea&quot;).empty();
        $(&quot;#coupon_update&quot;).css(&#123;&quot;display&quot;:&quot;block&quot;&#125;);
        $(&quot;#coupon_update #youhuiquan&quot;).val(coupon);
        $(&quot;#coupon_update #xianzhi&quot;).val(limited_time);
        $(&quot;#coupon_update #youhuiquan&quot;).after(&quot;&lt;input type=&#39;hidden&#39; value=&#39;&quot;+current_coupon+&quot;&#39;&gt;&quot;);
    &#125;

&#125;);

// 更新优惠券
$(document).on(&quot;click&quot;,&quot;#coupon_update .update&quot;,function()&#123;
    var current_coupon_id = $(this).siblings(&quot;input[type=&#39;hidden&#39;]&quot;).val();
    var user_limited_times = $(this).siblings(&#39;#xianzhi&#39;).val();
    var coupon = $(this).siblings(&#39;#youhuiquan&#39;).val();
    jsonstr = &#123;&quot;code&quot;:coupon,&quot;usage_limit_per_user&quot;:user_limited_times&#125;;
    var settings = &#123;
      &quot;async&quot;: true,
      &quot;crossDomain&quot;: true,
      &quot;url&quot;: $get_info_links+&quot;/wp-json/wc/v2/coupons/&quot;+current_coupon_id+&quot;?consumer_key=&quot;+outh_info.consumer_key+&quot;&amp;consumer_secret=&quot;+outh_info.consumer_secret,
      &quot;method&quot;: &quot;PUT&quot;,
      data: JSON.stringify(jsonstr),
      dataType: &quot;json&quot;,
      contentType: &quot;application/json&quot;,
    &#125;
    var r=confirm(&quot;确认提交更新吗？&quot;);

    if (r)&#123;
        $.ajax(settings).done(function (response) &#123;
          console.log(response);
          alert(&quot;更新成功！&quot;);
          location.reload(true);
        &#125;);
    &#125;

&#125;);</code></pre>
<p><strong>看到这里面的jsonstr没有，这个是一个json格式的，笔者在这里被坑过，最开始笔者的写法是</strong>：</p>
<pre><code>var jsonstr = &#123;&quot;code&quot;:coupon,&quot;usage_limit_per_user&quot;:user_limited_times&#125;;</code></pre>
<p>这样写死活传递不了参数，后来不小心在调试的时候漏写了var，反而好了，后来笔者就果断的去掉了var，至今没有深究这是为什么，如果你已经知道原因可以告知笔者。</p>
<h2 id="创建优惠券"><a href="#创建优惠券" class="headerlink" title="创建优惠券"></a>创建优惠券</h2><p>这里跟更新差不多，还是一样的，去官网查看相关方法：</p>
<pre><code>curl -X POST https://example.com/wp-json/wc/v3/coupons \
    -u consumer_key:consumer_secret \
    -H &quot;Content-Type: application/json&quot; \
    -d &#39;&#123;
  &quot;code&quot;: &quot;10off&quot;,
  &quot;discount_type&quot;: &quot;percent&quot;,
  &quot;amount&quot;: &quot;10&quot;,
  &quot;individual_use&quot;: true,
  &quot;exclude_sale_items&quot;: true,
  &quot;minimum_amount&quot;: &quot;100.00&quot;
&#125;&#39;</code></pre>
<p>这个意思就是说，更新采用的method是POST，然后地址有了，后面那个就是key了，<code>-H</code>这个就是请求头部，就是ajax请求的那个参数：</p>
<pre><code>contentType: &quot;application/json&quot;,</code></pre>
<p>接下来的<code>-d</code>就是一个json格式的数据，这个还是跟上面的那个一样，我们可以取一个优惠券的json数据对比一下就很清楚了。</p>
<p>那么确保明白了这些后，剩下的就是在html那边书写输入框了，然后把要添加的字段都设置好，然后用js获取其中的值，</p>
<p><strong>js代码片段：</strong></p>
<pre><code>// 点击创建
$(document).on(&quot;click&quot;,&quot;.chuangjian&quot;,function()&#123;
    var r=confirm(&quot;确认创建吗？&quot;);

    if (r)&#123;
        $(&quot;#contentarea&quot;).empty();
        $(&quot;#create_coupon&quot;).css(&#123;&quot;display&quot;:&quot;block&quot;&#125;).siblings(&#39;#coupon_update&#39;).css(&#123;&quot;display&quot;:&quot;none&quot;&#125;);
    &#125;

&#125;);

// 创建优惠券

$(document).on(&quot;click&quot;,&quot;#create_coupon .create&quot;,function()&#123;

    var code = $(&quot;#create_coupon #code&quot;).val();
    var jine = $(&quot;#create_coupon #jine&quot;).val();
    var minimum_amount = $(&quot;#minimum_amount&quot;).text();
    data_inter = &#123;
      &quot;code&quot;: code,
      &quot;amount&quot;: jine,
      &quot;individual_use&quot;: true,
      &quot;exclude_sale_items&quot;: true,
      &quot;minimum_amount&quot;: minimum_amount
    &#125;;
    var settings = &#123;
      &quot;async&quot;: true,
      &quot;crossDomain&quot;: true,
      &quot;url&quot;: $get_info_links+&quot;/wp-json/wc/v2/coupons/?consumer_key=&quot;+outh_info.consumer_key+&quot;&amp;consumer_secret=&quot;+outh_info.consumer_secret,
      &quot;method&quot;: &quot;POST&quot;,
      data: JSON.stringify(data_inter),
      dataType: &quot;json&quot;,
      contentType: &quot;application/json&quot;,
    &#125;
    var r=confirm(&quot;确认提交吗？&quot;);

    if (r)&#123;
        $.ajax(settings).done(function (response) &#123;
          console.log(response);
          alert(&quot;创建成功！&quot;);
          location.reload(true);
        &#125;);
    &#125;

&#125;);</code></pre>
<p>点击创建：</p>
<p><img src="https://i.imgur.com/WpOCEzr.jpg"></p>
<p>然后来到添加内容的地方：</p>
<p><img src="https://i.imgur.com/pQW74RE.jpg"></p>
<p>把字段收集完毕，点击创建，即可以完成。</p>
<p>还是前面的忠告，先在postman上面测试一下，没问题后在生成api，然后在结合自己的经验优化一下代码会更好，避免走不必要的弯路。</p>
<p>好的今天的讲解到此结束，本文还会持续更新，敬请关注。</p>
<hr>
<p>更新：2018/11/24 17:28:07 </p>
<p>这次更新笔者尝试着把通过rest api获取过来的数据整合到woocommerce的myaccount页面，也就是用户个人中心。</p>
<p>先上一个实现了的效果图：</p>
<p><img src="https://i.imgur.com/jaoltbg.png"></p>
<p>红色框框就是整合进去的效果。右边就是点击左边显示的内容明细，看到这样一个结果是否引起你的兴趣呢，这里笔者分享下如何实现这个需求。</p>
<ol>
<li>我们先以用户的身份登录到网站的woocommerce的个人中心，以便接下来用开发者工具调试dom节点。</li>
<li>然后用js动态嵌入前面说的html的dom元素节点。</li>
<li>借助woocommerce的用户个人中心页的dom元素进行布局。</li>
</ol>
<h2 id="登录一下"><a href="#登录一下" class="headerlink" title="登录一下"></a>登录一下</h2><p>根据开发者工具我们找到侧边栏的dom：</p>
<p><img src="https://i.imgur.com/YNGTy5t.png"></p>
<p>右边内容显示区的dom:</p>
<p><img src="https://i.imgur.com/3bC0opn.png"></p>
<p>好的，确保这两方面的东西后我们接着往下看。</p>
<h2 id="然后用js动态嵌入前面说的html的dom元素节点"><a href="#然后用js动态嵌入前面说的html的dom元素节点" class="headerlink" title="然后用js动态嵌入前面说的html的dom元素节点"></a>然后用js动态嵌入前面说的html的dom元素节点</h2><p>为了方便演示，这里对前面的get_info.js这个文件复制一份，然后命名为：inter_myaccount.js，inter_myaccount.js的代码如下：</p>
<pre><code>var outh_info = new Object();
outh_info.consumer_key = &#39;ck_d401c8757e62e7fc9ca915198f00e9f759814564&#39;;
outh_info.consumer_secret = &#39;cs_dbe85507fd8ef25fa7bfacf4222fc6b54843593c&#39;;

var host = window.location.host;
var protocol = window.location.protocol;
$get_info_links = protocol+&quot;//&quot;+host;

$(document).ready(function()&#123;
    var obj = &#39;&lt;ul id=&quot;page_list&quot; class=&quot;list-group&quot;&gt;&#39;;
        obj += &#39;&lt;h4 class=&quot;dashbord&quot;&gt;控制台&lt;/h4&gt;&#39;;
        obj += &#39;&lt;li class=&quot;list-group-item useritem&quot;&gt;&lt;i class=&quot;fa fa-user&quot;&gt;&lt;/i&gt; 个人信息&lt;/li&gt;&#39;;
        obj += &#39;&lt;li class=&quot;list-group-item public_post&quot;&gt;&lt;i class=&quot;fa fa-pencil&quot;&gt;&lt;/i&gt; 发布文章&lt;/li&gt;&#39;;
        obj += &#39;&lt;li class=&quot;list-group-item create_page&quot;&gt;&lt;i class=&quot;fa fa-pencil&quot;&gt;&lt;/i&gt; 创建页面&lt;/li&gt;&#39;;
        obj += &#39;&lt;li class=&quot;list-group-item product_list&quot;&gt;&lt;i class=&quot;fa fa-list&quot;&gt;&lt;/i&gt; 产品列表&lt;/li&gt;&#39;;
        obj += &#39;&lt;li class=&quot;list-group-item order_list&quot;&gt;&lt;i class=&quot;glyphicon glyphicon-shopping-cart&quot;&gt;&lt;/i&gt; 订单列表 &lt;span class=&quot;badge&quot;&gt;&lt;/span&gt;&lt;/li&gt;&#39;;
        obj += &#39;&lt;li class=&quot;list-group-item order_address&quot;&gt;&lt;i class=&quot;fa fa-map-marker&quot;&gt;&lt;/i&gt; 收件地址&lt;/li&gt;&#39;;
        obj += &#39;&lt;li class=&quot;list-group-item coupons_list&quot;&gt;&lt;i class=&quot;fa fa-ticket&quot;&gt;&lt;/i&gt; 优惠券 &lt;span class=&quot;badge&quot;&gt;&lt;/span&gt;&lt;/li&gt;&#39;;
        obj += &#39;&lt;/ul&gt;&#39;;
    $(&quot;.woocommerce-MyAccount-navigation ul&quot;).after(obj);

    var adddom = &#39;&lt;div id=&quot;create_form&quot; class=&quot;woocommerce-MyAccount-navigation&quot;&gt;&#39;;
        adddom += &#39;&lt;div class=&quot;form-group&quot; id=&quot;coupon_update&quot;&gt;&#39;;
        adddom += &#39;    &lt;label&gt;优惠券&lt;/label&gt;&#39;;
        adddom += &#39;    &lt;input type=&quot;text&quot; class=&quot;form-control&quot; id=&quot;xianzhi&quot; value=&quot;&quot;&gt;&#39;;
        adddom += &#39;    &lt;input type=&quot;text&quot; class=&quot;form-control&quot; id=&quot;youhuiquan&quot; value=&quot;&quot;&gt;&#39;;
        adddom += &#39;    &lt;button type=&quot;button&quot; class=&quot;btn btn-info update&quot;&gt;更新&lt;/button&gt;&#39;;
        adddom += &#39;&lt;/div&gt;&#39;;
        adddom += &#39;&lt;div id=&quot;create_coupon&quot;&gt;&#39;;
        adddom += &#39;    &lt;div class=&quot;form-group&quot;&gt;&#39;;
        adddom += &#39;        &lt;label for=&quot;youhuiquan&quot;&gt;优惠码&lt;/label&gt;&#39;;
        adddom += &#39;        &lt;input type=&quot;text&quot; class=&quot;form-control&quot; id=&quot;code&quot; value=&quot;&quot; placeholder=&quot;优惠码&quot;&gt;&#39;;
        adddom += &#39;    &lt;/div&gt;&#39;;
        adddom += &#39;    &lt;div class=&quot;form-group&quot;&gt;&#39;;
        adddom += &#39;        &lt;label for=&quot;youhuiquan&quot;&gt;优惠券金额&lt;/label&gt;&#39;;
        adddom += &#39;        &lt;input type=&quot;text&quot; class=&quot;form-control&quot; id=&quot;jine&quot; value=&quot;&quot; placeholder=&quot;输入优惠券金额&quot;&gt;&#39;;
        adddom += &#39;    &lt;/div&gt;&#39;;
        adddom += &#39;    &lt;div class=&quot;form-group&quot;&gt;&#39;;
        adddom += &#39;        &lt;label for=&quot;youhuiquan&quot;&gt;购买的最低金额&lt;/label&gt;&#39;;
        adddom += &#39;        &lt;input type=&quot;number&quot; class=&quot;form-control&quot; id=&quot;minimum_amount&quot; value=&quot;&quot; placeholder=&quot;输入购买的最低金额&quot;&gt;&#39;;
        adddom += &#39;    &lt;/div&gt;&#39;;
        adddom += &#39;    &lt;div class=&quot;form-group&quot;&gt;&#39;;
        adddom += &#39;      &lt;button type=&quot;button&quot; class=&quot;btn btn-info create&quot;&gt;创建&lt;/button&gt;&#39;;
        adddom += &#39;    &lt;/div&gt;&#39;;
        adddom += &#39;&lt;/div&gt;&#39;;
        adddom += &#39;&lt;/div&gt;&#39;;
    $(&quot;.woocommerce-MyAccount-content&quot;).after(adddom);

    // 默认情况隐藏添加和更新优惠券的输入框
    $(&quot;#create_coupon&quot;).css(&#123;&quot;display&quot;:&quot;none&quot;&#125;);
    $(&quot;#coupon_update&quot;).css(&#123;&quot;display&quot;:&quot;none&quot;&#125;);

&#125;);

$(document).on(&quot;click&quot;,&quot;#page_list .product_list&quot;,function()&#123;

    htmlobj_category = $.ajax(&#123;
        url: $get_info_links+&quot;/wp-json/wc/v2/products?consumer_key=&quot;+outh_info.consumer_key+&quot;&amp;consumer_secret=&quot;+outh_info.consumer_secret,
        type: &quot;get&quot;,
        dataType: &quot;json&quot;,
        contentType: &quot;application/json&quot;,
        success: function (res) &#123;
            // console.log(res);
            html = &quot;&quot;;
            for (var i = res.length - 1; i &gt;= 0; i--) &#123;
                html += &#39;&lt;div class=&quot;media&quot;&gt;&#39;;
                html += &#39;&lt;div class=&quot;media-left&quot; style=&quot;max-width:120px;width:100%&quot;&gt;&#39;;
                html += &#39;&lt;a href=&quot;&#39;+res[i][&quot;permalink&quot;]+&#39;&quot;&gt;&#39;;
                html += &#39;&lt;img class=&quot;media-object&quot; src=&quot;&#39;+res[i][&quot;images&quot;][0][&quot;src&quot;]+&#39;&quot; alt=&quot;&#39;+res[i][&quot;name&quot;]+&#39;&quot;&gt;&#39;;
                html += &#39;&lt;/a&gt;&#39;;
                html += &#39;&lt;/div&gt;&#39;;
                html += &#39;&lt;div class=&quot;media-body&quot;&gt;&#39;;
                html += &#39;&lt;h4 class=&quot;media-heading&quot;&gt;&#39;+res[i][&quot;name&quot;]+&#39;&lt;/h4&gt;&#39;;
                html += &#39;&lt;/div&gt;&#39;;
                html += &#39;&lt;/div&gt;&#39;;
            &#125;
            $(&quot;.woocommerce-MyAccount-content&quot;).empty();
            $(&quot;.woocommerce-MyAccount-content&quot;).append(html);
        &#125;,
        error: function (xhr, err, exception) &#123;
            console.log(err);
        &#125;
    &#125;);
&#125;);

htmlobj_category = $.ajax(&#123;
    url: $get_info_links+&quot;/wp-json/wc/v2/orders?consumer_key=&quot;+outh_info.consumer_key+&quot;&amp;consumer_secret=&quot;+outh_info.consumer_secret,
    type: &quot;get&quot;,
    dataType: &quot;json&quot;,
    contentType: &quot;application/json&quot;,
    success: function (res) &#123;
        $(&quot;#page_list .order_list .badge&quot;).append(res.length);
    &#125;,
    error: function (xhr, err, exception) &#123;
        console.log(err);
    &#125;
&#125;);

$(document).on(&quot;click&quot;,&quot;#page_list .order_list&quot;,function()&#123;

    htmlobj_category = $.ajax(&#123;
        url: $get_info_links+&quot;/wp-json/wc/v2/orders?consumer_key=&quot;+outh_info.consumer_key+&quot;&amp;consumer_secret=&quot;+outh_info.consumer_secret,
        type: &quot;get&quot;,
        dataType: &quot;json&quot;,
        contentType: &quot;application/json&quot;,
        success: function (res) &#123;
            // console.log(res);
            console.log(res[0][&quot;line_items&quot;]);
            html = &quot;&quot;;
            html += &#39;&lt;div class=&quot;list-group&quot; style=&quot;margin-bottom: 50px;&quot;&gt;&#39;;
            html += &#39;  &lt;a href=&quot;#&quot; class=&quot;list-group-item active&quot;&gt;&#39;;
            html += &#39;    &lt;h4 class=&quot;list-group-item-heading&quot;&gt;订单列表&lt;/h4&gt;&#39;;
            // html += &#39;    &lt;p class=&quot;list-group-item-text&quot;&gt;...&lt;/p&gt;&#39;;
            html += &#39;  &lt;/a&gt;&#39;;
            html += &#39;&lt;div&gt;&#39;;
            // html += &#39;&lt;hr&gt;&#39;;
            for (var i = res.length - 1; i &gt;= 0; i--) &#123;
                html += &#39;&lt;div class=&quot;orderItems&quot;&gt;&#39;;
                html += &#39;&lt;div class=&quot;row&quot;&gt;&#39;;
                html +=     &#39;&lt;div class=&quot;col-md-4&quot; style=&quot;padding-left:0px&quot;&gt;&lt;p class=&quot;orderNumber&quot;&gt;&lt;i class=&quot;fa fa-barcode&quot;&gt;&lt;/i&gt; 订单号：&#39;+res[i][&quot;number&quot;]+&#39;&lt;/p&gt;&lt;/div&gt;&#39;;
                html +=     &#39;&lt;div class=&quot;col-md-4&quot;&gt;&lt;p class=&quot;totals&quot;&gt;订单总金额：&lt;i class=&quot;fa fa-usd&quot;&gt;&lt;/i&gt; &#39;+res[i][&quot;total&quot;]+&#39;&lt;/p&gt;&lt;/div&gt;&#39;;
                html +=     &#39;&lt;div class=&quot;col-md-4&quot;&gt;&lt;p class=&quot;times&quot;&gt;&lt;i class=&quot;fa fa-clock-o&quot;&gt;&lt;/i&gt; 时间：&#39;+res[i][&quot;date_created&quot;]+&#39;&lt;/p&gt;&lt;/div&gt;&#39;;
                html +=  &#39;&lt;/div&gt;&#39;;
                html +=  &#39;&lt;div class=&quot;row&quot;&gt;&#39;;
                html +=     &#39;&lt;div class=&quot;col-md-4&quot; style=&quot;padding-left:0px&quot;&gt;&lt;p class=&quot;status&quot;&gt;订单状态：&#39;+res[i][&quot;status&quot;]+&#39;&lt;/p&gt;&lt;/div&gt;&#39;;
                html +=     &#39;&lt;div class=&quot;col-md-4&quot;&gt;&lt;p class=&quot;payments&quot;&gt;&lt;i class=&quot;fa fa-credit-card&quot;&gt;&lt;/i&gt; 支付方式：&#39;+res[i][&quot;payment_method_title&quot;]+&#39;&lt;/p&gt;&lt;/div&gt;&#39;;
                html +=     &#39;&lt;div class=&quot;col-md-4&quot;&gt;&lt;p class=&quot;shipping&quot;&gt;&lt;span&gt;&lt;i class=&quot;fa fa-truck&quot;&gt;&lt;/i&gt; 配送方式：&#39;+res[i][&quot;shipping_lines&quot;][0][&quot;method_title&quot;]+&#39;&lt;/span&gt;&amp;nbsp;&amp;nbsp;&lt;span&gt;费用：&#39;+res[i][&quot;shipping_lines&quot;][0][&quot;total&quot;]+&#39;&lt;/span&gt;&lt;/p&gt;&lt;/div&gt;&#39;;
                html +=   &#39;&lt;/div&gt;&#39;;
                html +=     &#39;&lt;h4 style=&quot;color:#D9534F&quot;&gt;订单产品明细&lt;/h4&gt;&#39;;
                    html +=  &#39;&lt;div class=&quot;row order_product_list&quot;&gt;&#39;;
                for (var j = res[i][&quot;line_items&quot;].length - 1; j &gt;= 0; j--) &#123;
                    html +=     &#39;&lt;div class=&quot;col-md-4&quot; style=&quot;padding-left:0px&quot;&gt;&lt;p class=&quot;productName&quot;&gt;&lt;i class=&quot;fa fa-product-hunt&quot;&gt;&lt;/i&gt; 产品：&#39;+res[i][&quot;line_items&quot;][j][&quot;name&quot;]+&#39;&lt;/p&gt;&lt;/div&gt;&#39;;
                    html +=     &#39;&lt;div class=&quot;col-md-4&quot;&gt;&lt;p class=&quot;sku&quot;&gt;&lt;i class=&quot;fa fa-barcode&quot;&gt;&lt;/i&gt; sku：&#39;+res[i][&quot;line_items&quot;][j][&quot;sku&quot;]+&#39;&lt;/p&gt;&lt;/div&gt;&#39;;
                    html +=     &#39;&lt;div class=&quot;col-md-2&quot;&gt;&lt;p class=&quot;danjia&quot;&gt;&lt;i class=&quot;fa fa-usd&quot;&gt;&lt;/i&gt; 单价：&#39;+res[i][&quot;line_items&quot;][j][&quot;price&quot;]+&#39;&lt;/p&gt;&lt;/div&gt;&#39;;
                    html +=     &#39;&lt;div class=&quot;col-md-2&quot;&gt;&lt;p class=&quot;shuliang&quot;&gt;数量：&#39;+res[i][&quot;line_items&quot;][j][&quot;quantity&quot;]+&#39;&lt;/p&gt;&lt;/div&gt;&#39;;
                &#125;
                    html +=   &#39;&lt;/div&gt;&#39;;
                html += &#39;&lt;/div&gt;&#39;;
                html += &#39;&lt;hr&gt;&#39;;
            &#125;
            $(&quot;.woocommerce-MyAccount-content&quot;).empty();
            $(&quot;.woocommerce-MyAccount-content&quot;).append(html);
        &#125;,
        error: function (xhr, err, exception) &#123;
            console.log(err);
        &#125;
    &#125;);
&#125;);

$(document).on(&quot;click&quot;,&quot;#page_list .order_address&quot;,function()&#123;

    htmlobj_category = $.ajax(&#123;
        url: $get_info_links+&quot;/wp-json/wc/v2/orders?consumer_key=&quot;+outh_info.consumer_key+&quot;&amp;consumer_secret=&quot;+outh_info.consumer_secret,
        type: &quot;get&quot;,
        dataType: &quot;json&quot;,
        contentType: &quot;application/json&quot;,
        success: function (res) &#123;
            // console.log(res);
            var html = &#39;&#39;;
            html += &#39;&lt;div class=&quot;list-group&quot;&gt;&#39;;
            html += &#39;  &lt;div class=&quot;list-group-item&quot;&gt;&#39;;
            html += &#39;    &lt;h4 class=&quot;list-group-item-heading&quot;&gt;账单地址&lt;/h4&gt;&#39;;
            html += &#39;    &lt;p class=&quot;list-group-item-text&quot;&gt;&lt;span&gt;first name:&#39;+res[0][&quot;billing&quot;][&quot;first_name&quot;]+&#39;&lt;/span&gt;&lt;span&gt;&#39;+res[0][&quot;billing&quot;][&quot;last_name&quot;]+&#39;&lt;/span&gt;&lt;/p&gt;&#39;;
            html += &#39;&lt;p class=&quot;list-group-item-text&quot;&gt;&lt;span&gt;company:&#39;+res[0][&quot;billing&quot;][&quot;company&quot;]+&#39;&lt;/span&gt;&lt;/p&gt;&#39;;
            html += &#39;&lt;p class=&quot;list-group-item-text&quot;&gt;address:&lt;span&gt;&#39;+res[0][&quot;billing&quot;][&quot;address_1&quot;]+&#39;&lt;/span&gt; &lt;span&gt;&#39;+res[0][&quot;billing&quot;][&quot;address_1&quot;]+&#39;&lt;/span&gt;&lt;/p&gt;&#39;;
            html += &#39;&lt;p class=&quot;list-group-item-text&quot;&gt;&lt;span&gt;postcode:&#39;+res[0][&quot;billing&quot;][&quot;postcode&quot;]+&#39;&lt;/span&gt;&lt;/p&gt;&#39;;
            html += &#39;&lt;p class=&quot;list-group-item-text&quot;&gt;&lt;span&gt;city:&#39;+res[0][&quot;billing&quot;][&quot;city&quot;]+&#39;&lt;/span&gt;&lt;/p&gt;&#39;;
            html += &#39;&lt;p class=&quot;list-group-item-text&quot;&gt;&lt;span&gt;email:&#39;+res[0][&quot;billing&quot;][&quot;email&quot;]+&#39;&lt;/span&gt;&lt;/p&gt;&#39;;
            html += &#39;&lt;p class=&quot;list-group-item-text&quot;&gt;&lt;span&gt;phone:&#39;+res[0][&quot;billing&quot;][&quot;phone&quot;]+&#39;&lt;/span&gt;&lt;/p&gt;&#39;;
            html += &#39;&lt;p class=&quot;list-group-item-text&quot;&gt;&lt;span&gt;country:&#39;+res[0][&quot;billing&quot;][&quot;country&quot;]+&#39;&lt;/span&gt;&lt;/p&gt;&#39;;
            html += &#39;  &lt;/div&gt;&#39;;
            html += &#39;&lt;/div&gt;&#39;;

            $(&quot;.woocommerce-MyAccount-content&quot;).empty();
            $(&quot;.woocommerce-MyAccount-content&quot;).append(html);
        &#125;,
        error: function (xhr, err, exception) &#123;
            console.log(err);
        &#125;
    &#125;);
&#125;);



htmlobj_coupons = $.ajax(&#123;
    url: $get_info_links+&quot;/wp-json/wc/v2/coupons?consumer_key=&quot;+outh_info.consumer_key+&quot;&amp;consumer_secret=&quot;+outh_info.consumer_secret,
    type: &quot;get&quot;,
    dataType: &quot;json&quot;,
    contentType: &quot;application/json&quot;,
    success: function (res) &#123;
        // console.log(res);
        $(&quot;#page_list .coupons_list .badge&quot;).append(res.length);
    &#125;,
    error: function (xhr, err, exception) &#123;
        console.log(err);
    &#125;
&#125;);

// 优惠券列表
$(document).on(&quot;click&quot;,&quot;#page_list .coupons_list&quot;,function()&#123;

    htmlobj_category = $.ajax(&#123;
        url: $get_info_links+&quot;/wp-json/wc/v2/coupons?consumer_key=&quot;+outh_info.consumer_key+&quot;&amp;consumer_secret=&quot;+outh_info.consumer_secret,
        type: &quot;get&quot;,
        dataType: &quot;json&quot;,
        contentType: &quot;application/json&quot;,
        success: function (res) &#123;
            // console.log(res);
            var html = &#39;&lt;h4&gt;优惠券列表&lt;/h4&gt;&#39;;
            html += &#39;&lt;table class=&quot;table&quot;&gt;&#39;;
            html += &#39;&lt;tr&gt;&#39;;
            html += &#39;&lt;th&gt;ID&lt;/th&gt;&#39;;
            html += &#39;&lt;th&gt;优惠码&lt;/th&gt;&#39;;
            html += &#39;&lt;th&gt;折扣类型&lt;/th&gt;&#39;;
            html += &#39;&lt;th&gt;使用限制&lt;/th&gt;&#39;;
            html += &#39;&lt;th&gt;&lt;p&gt;&lt;span class=&quot;chaoz&quot;&gt;操作&lt;/span&gt; &lt;span class=&quot;chjian&quot;&gt;&lt;button type=&quot;button&quot; class=&quot;btn btn-success chuangjian&quot;&gt;创建&lt;/button&gt;&lt;/span&gt;&lt;/p&gt;&lt;/th&gt;&#39;;
            html += &#39;&lt;/tr&gt;&#39;;
            for (var i = res.length - 1; i &gt;= 0; i--) &#123;
                html += &#39;&lt;tr&gt;&#39;;
                  html += &#39;&lt;td class=&quot;coupon_id&quot;&gt;&#39;+res[i][&quot;id&quot;]+&#39;&lt;/td&gt;&#39;;
                  html += &#39;&lt;td class=&quot;coupon_code&quot;&gt;&#39;+res[i][&quot;code&quot;]+&#39;&lt;/td&gt;&#39;;
                  html += &#39;&lt;td&gt;&#39;+res[i][&quot;discount_type&quot;]+&#39;&lt;/td&gt;&#39;;
                  if (res[i][&quot;usage_limit_per_user&quot;] === null) &#123;
                      html += &#39;&lt;td class=&quot;limited_time&quot;&gt;无限制&lt;/td&gt;&#39;;
                  &#125;else&#123;
                      html += &#39;&lt;td class=&quot;limited_time&quot;&gt;&#39;+res[i][&quot;usage_limit_per_user&quot;]+&#39;&lt;/td&gt;&#39;;
                  &#125;
                  html += &#39;&lt;td class=&quot;actions&quot;&gt;&lt;button type=&quot;button&quot; class=&quot;btn btn-primary&quot;&gt;编辑&lt;/button&gt;&lt;button type=&quot;button&quot; class=&quot;btn btn-danger&quot;&gt;删除&lt;/button&gt;&lt;/td&gt;&#39;;
                  html += &#39;&lt;/tr&gt;&#39;;
            &#125;
            html += &#39;&lt;/table&gt;&#39;;
            $(&quot;.woocommerce-MyAccount-content&quot;).empty();
            $(&quot;.woocommerce-MyAccount-content&quot;).append(html).siblings(&quot;#create_form&quot;).children(&#39;&#39;).css(&#123;&quot;display&quot;:&quot;none&quot;&#125;);
        &#125;,
        error: function (xhr, err, exception) &#123;
            console.log(err);
        &#125;
    &#125;);
&#125;);

// 删除优惠券
$(document).on(&quot;click&quot;,&quot;.actions .btn-danger&quot;,function()&#123;
    var current_coupon = $(this).parent().siblings(&#39;.coupon_id&#39;).text();
    var settings = &#123;
      &quot;async&quot;: true,
      &quot;crossDomain&quot;: true,
      &quot;url&quot;: $get_info_links+&quot;/wp-json/wc/v2/coupons/&quot;+current_coupon+&quot;?force=true&amp;consumer_key=&quot;+outh_info.consumer_key+&quot;&amp;consumer_secret=&quot;+outh_info.consumer_secret,
      &quot;method&quot;: &quot;DELETE&quot;,
      dataType: &quot;json&quot;,
      contentType: &quot;application/json&quot;,
    &#125;
    var r=confirm(&quot;确认删除？&quot;);

    if (r)&#123;
        $.ajax(settings).done(function (response) &#123;
          console.log(response);
          alert(&quot;删除成功！&quot;);
          location.reload(true);
        &#125;);
    &#125;

&#125;);

// 点击更新
$(document).on(&quot;click&quot;,&quot;.actions .btn-primary&quot;,function()&#123;
    var current_coupon = $(this).parent().siblings(&#39;.coupon_id&#39;).text();
    var coupon = $(this).parent().siblings(&#39;.coupon_code&#39;).text();
    var limited_time = $(this).parent().siblings(&#39;.limited_time&#39;).text();
    var r=confirm(&quot;确认编辑吗？&quot;);

    if (r)&#123;
        $(&quot;.woocommerce-MyAccount-content&quot;).empty();
        $(&quot;#coupon_update&quot;).css(&#123;&quot;display&quot;:&quot;block&quot;&#125;).siblings().css(&#123;&quot;display&quot;:&quot;none&quot;&#125;);
        $(&quot;#coupon_update #youhuiquan&quot;).val(coupon);
        $(&quot;#coupon_update #xianzhi&quot;).val(limited_time);
        $(&quot;#coupon_update #youhuiquan&quot;).after(&quot;&lt;input type=&#39;hidden&#39; value=&#39;&quot;+current_coupon+&quot;&#39;&gt;&quot;);
    &#125;

&#125;);

// 更新优惠券
$(document).on(&quot;click&quot;,&quot;#coupon_update .update&quot;,function()&#123;
    var current_coupon_id = $(this).siblings(&quot;input[type=&#39;hidden&#39;]&quot;).val();
    var user_limited_times = $(this).siblings(&#39;#xianzhi&#39;).val();
    var coupon = $(this).siblings(&#39;#youhuiquan&#39;).val();
    jsonstr = &#123;&quot;code&quot;:coupon,&quot;usage_limit_per_user&quot;:user_limited_times&#125;;
    var settings = &#123;
      &quot;async&quot;: true,
      &quot;crossDomain&quot;: true,
      &quot;url&quot;: $get_info_links+&quot;/wp-json/wc/v2/coupons/&quot;+current_coupon_id+&quot;?consumer_key=&quot;+outh_info.consumer_key+&quot;&amp;consumer_secret=&quot;+outh_info.consumer_secret,
      &quot;method&quot;: &quot;PUT&quot;,
      data: JSON.stringify(jsonstr),
      dataType: &quot;json&quot;,
      contentType: &quot;application/json&quot;,
    &#125;
    var r=confirm(&quot;确认提交更新吗？&quot;);

    if (r)&#123;
        $.ajax(settings).done(function (response) &#123;
          console.log(response);
          alert(&quot;更新成功！&quot;);
          location.reload(true);
        &#125;);
    &#125;

&#125;);


// 点击创建
$(document).on(&quot;click&quot;,&quot;.chuangjian&quot;,function()&#123;
    var r=confirm(&quot;确认创建吗？&quot;);

    if (r)&#123;
        $(&quot;.woocommerce-MyAccount-content&quot;).empty();
        $(&quot;#create_coupon&quot;).css(&#123;&quot;display&quot;:&quot;block&quot;&#125;).siblings(&#39;#coupon_update&#39;).css(&#123;&quot;display&quot;:&quot;none&quot;&#125;);
    &#125;

&#125;);

// 创建优惠券

$(document).on(&quot;click&quot;,&quot;#create_coupon .create&quot;,function()&#123;

    var code = $(&quot;#create_coupon #code&quot;).val();
    var jine = $(&quot;#create_coupon #jine&quot;).val();
    var minimum_amount = $(&quot;#minimum_amount&quot;).text();
    data_inter = &#123;
      &quot;code&quot;: code,
      &quot;amount&quot;: jine,
      &quot;individual_use&quot;: true,
      &quot;exclude_sale_items&quot;: true,
      &quot;minimum_amount&quot;: minimum_amount
    &#125;;
    var settings = &#123;
      &quot;async&quot;: true,
      &quot;crossDomain&quot;: true,
      &quot;url&quot;: $get_info_links+&quot;/wp-json/wc/v2/coupons/?consumer_key=&quot;+outh_info.consumer_key+&quot;&amp;consumer_secret=&quot;+outh_info.consumer_secret,
      &quot;method&quot;: &quot;POST&quot;,
      data: JSON.stringify(data_inter),
      dataType: &quot;json&quot;,
      contentType: &quot;application/json&quot;,
    &#125;
    var r=confirm(&quot;确认提交吗？&quot;);

    if (r)&#123;
        $.ajax(settings).done(function (response) &#123;
          console.log(response);
          alert(&quot;创建成功！&quot;);
          location.reload(true);
        &#125;);
    &#125;

&#125;);</code></pre>
<p>你可以对比一下前面的get_info.js这个文件的内容，就可以知道inter_myaccount.js这个文件多添加了如下代码：</p>
<pre><code>$(document).ready(function()&#123;
    var obj = &#39;&lt;ul id=&quot;page_list&quot; class=&quot;list-group&quot;&gt;&#39;;
        obj += &#39;&lt;h4 class=&quot;dashbord&quot;&gt;控制台&lt;/h4&gt;&#39;;
        obj += &#39;&lt;li class=&quot;list-group-item useritem&quot;&gt;&lt;i class=&quot;fa fa-user&quot;&gt;&lt;/i&gt; 个人信息&lt;/li&gt;&#39;;
        obj += &#39;&lt;li class=&quot;list-group-item public_post&quot;&gt;&lt;i class=&quot;fa fa-pencil&quot;&gt;&lt;/i&gt; 发布文章&lt;/li&gt;&#39;;
        obj += &#39;&lt;li class=&quot;list-group-item create_page&quot;&gt;&lt;i class=&quot;fa fa-pencil&quot;&gt;&lt;/i&gt; 创建页面&lt;/li&gt;&#39;;
        obj += &#39;&lt;li class=&quot;list-group-item product_list&quot;&gt;&lt;i class=&quot;fa fa-list&quot;&gt;&lt;/i&gt; 产品列表&lt;/li&gt;&#39;;
        obj += &#39;&lt;li class=&quot;list-group-item order_list&quot;&gt;&lt;i class=&quot;glyphicon glyphicon-shopping-cart&quot;&gt;&lt;/i&gt; 订单列表 &lt;span class=&quot;badge&quot;&gt;&lt;/span&gt;&lt;/li&gt;&#39;;
        obj += &#39;&lt;li class=&quot;list-group-item order_address&quot;&gt;&lt;i class=&quot;fa fa-map-marker&quot;&gt;&lt;/i&gt; 收件地址&lt;/li&gt;&#39;;
        obj += &#39;&lt;li class=&quot;list-group-item coupons_list&quot;&gt;&lt;i class=&quot;fa fa-ticket&quot;&gt;&lt;/i&gt; 优惠券 &lt;span class=&quot;badge&quot;&gt;&lt;/span&gt;&lt;/li&gt;&#39;;
        obj += &#39;&lt;/ul&gt;&#39;;
    $(&quot;.woocommerce-MyAccount-navigation ul&quot;).after(obj);

    var adddom = &#39;&lt;div id=&quot;create_form&quot; class=&quot;woocommerce-MyAccount-navigation&quot;&gt;&#39;;
        adddom += &#39;&lt;div class=&quot;form-group&quot; id=&quot;coupon_update&quot;&gt;&#39;;
        adddom += &#39;    &lt;label&gt;优惠券&lt;/label&gt;&#39;;
        adddom += &#39;    &lt;input type=&quot;text&quot; class=&quot;form-control&quot; id=&quot;xianzhi&quot; value=&quot;&quot;&gt;&#39;;
        adddom += &#39;    &lt;input type=&quot;text&quot; class=&quot;form-control&quot; id=&quot;youhuiquan&quot; value=&quot;&quot;&gt;&#39;;
        adddom += &#39;    &lt;button type=&quot;button&quot; class=&quot;btn btn-info update&quot;&gt;更新&lt;/button&gt;&#39;;
        adddom += &#39;&lt;/div&gt;&#39;;
        adddom += &#39;&lt;div id=&quot;create_coupon&quot;&gt;&#39;;
        adddom += &#39;    &lt;div class=&quot;form-group&quot;&gt;&#39;;
        adddom += &#39;        &lt;label for=&quot;youhuiquan&quot;&gt;优惠码&lt;/label&gt;&#39;;
        adddom += &#39;        &lt;input type=&quot;text&quot; class=&quot;form-control&quot; id=&quot;code&quot; value=&quot;&quot; placeholder=&quot;优惠码&quot;&gt;&#39;;
        adddom += &#39;    &lt;/div&gt;&#39;;
        adddom += &#39;    &lt;div class=&quot;form-group&quot;&gt;&#39;;
        adddom += &#39;        &lt;label for=&quot;youhuiquan&quot;&gt;优惠券金额&lt;/label&gt;&#39;;
        adddom += &#39;        &lt;input type=&quot;text&quot; class=&quot;form-control&quot; id=&quot;jine&quot; value=&quot;&quot; placeholder=&quot;输入优惠券金额&quot;&gt;&#39;;
        adddom += &#39;    &lt;/div&gt;&#39;;
        adddom += &#39;    &lt;div class=&quot;form-group&quot;&gt;&#39;;
        adddom += &#39;        &lt;label for=&quot;youhuiquan&quot;&gt;购买的最低金额&lt;/label&gt;&#39;;
        adddom += &#39;        &lt;input type=&quot;number&quot; class=&quot;form-control&quot; id=&quot;minimum_amount&quot; value=&quot;&quot; placeholder=&quot;输入购买的最低金额&quot;&gt;&#39;;
        adddom += &#39;    &lt;/div&gt;&#39;;
        adddom += &#39;    &lt;div class=&quot;form-group&quot;&gt;&#39;;
        adddom += &#39;      &lt;button type=&quot;button&quot; class=&quot;btn btn-info create&quot;&gt;创建&lt;/button&gt;&#39;;
        adddom += &#39;    &lt;/div&gt;&#39;;
        adddom += &#39;&lt;/div&gt;&#39;;
        adddom += &#39;&lt;/div&gt;&#39;;
    $(&quot;.woocommerce-MyAccount-content&quot;).after(adddom);

    // 默认情况隐藏添加和更新优惠券的输入框
    $(&quot;#create_coupon&quot;).css(&#123;&quot;display&quot;:&quot;none&quot;&#125;);
    $(&quot;#coupon_update&quot;).css(&#123;&quot;display&quot;:&quot;none&quot;&#125;);

&#125;);</code></pre>
<p>而这里面的dom节点代码正是前面更新部分的HTML代码的左边列表和控制右边内容显示的dom.然后还有一个变化就是笔者前面一个步骤的通过开发者工具定位的dom.</p>
<p>由原来的**<code>#contentarea</code><strong>变成了</strong><code>.woocommerce-MyAccount-content</code>**</p>
<p>原来的，</p>
<pre><code>&lt;div id=&quot;create_form&quot;&gt;
...
&lt;/div&gt;</code></pre>
<p>修改成了，</p>
<pre><code>&lt;div id=&quot;create_form&quot; class=&quot;woocommerce-MyAccount-navigation&quot;&gt;
...
&lt;/div&gt;</code></pre>
<p>也就是添加了一个class而已，方便处理点击显示的问题，这个不要紧，并不会影响功能性问题。</p>
<p>因为myaccount是已经存在的页面，笔者就不重写了，这里笔者直接在header.php这个文件里面调用js文件即可。</p>
<pre><code>&lt;script src=&quot;/wp-content/themes/nocti/rest/woocommerce_api/inter_myaccount.js&quot;&gt;&lt;/script&gt;</code></pre>
<p>为了样式代码方便管理，笔者也把css代码单独放在了一个文件里面，也在header.php文件里面引用，</p>
<pre><code>&lt;link href=&quot;&lt;?php bloginfo(&#39;template_url&#39;); ?&gt;/rest/usercenter.css&quot; rel=&quot;stylesheet&quot;&gt;</code></pre>
<p><strong>usercenter.css代码如下：</strong></p>
<pre><code>#page_list span,#page_list li&#123;
    cursor: pointer;
&#125;
ul&#123;margin-left:0px !important&#125;
.entry-content-wrapper li &#123;
    margin-left: 0px !important;
    padding: 15px;
&#125;
.personal_post_list li&#123;
       cursor:pointer;
&#125;
.dashbord&#123;margin-top:0px !important&#125;
.contentarea&#123;
    border: 1px solid #d6d6d6;
    padding:20px 15px;
&#125;
.btn&#123;padding:3px 12px !important&#125;
#page_list h4&#123;
    margin: 20px auto;
&#125;
.glyphicon-trash&#123;
    float: right !important;
    color:#719430 !important;
    cursor: pointer;
&#125;
.media-left, .media-right &#123;
width: 100px !important;
&#125;
.media-body, .media-left, .media-right &#123;
display: initial !important;
&#125;
.media-left img&#123;
width: 100px !important;
float: left;
margin-right: 20px;
border: 1px solid #eee;
&#125;
.media&#123;   
border-bottom: 1px solid #ccc;
padding-bottom: 8px;
&#125;
.date_created&#123;
float: right;
font-size: 14px;
&#125;
.row &#123;
margin-right: 0px !important;
margin-left: 0px !important;
&#125;
.orderItems&#123;
 margin: 20px auto !important;
 font-size:12px !important;
&#125;
.totals,.payments&#123;
color: #8BC34A;
&#125;
.orderNumber&#123;
color: #FF9800;
&#125;
.times&#123;color: #009688;&#125;
.status&#123;color: #FF5722;&#125;
.order_product_list&#123;
background: #f7f7f7;
padding: 20px 15px 10px 15px;
&#125;
.table&gt;tbody&gt;tr&gt;td, .table&gt;tbody&gt;tr&gt;th, .table&gt;tfoot&gt;tr&gt;td, .table&gt;tfoot&gt;tr&gt;th, .table&gt;thead&gt;tr&gt;td, .table&gt;thead&gt;tr&gt;th &#123;
vertical-align: middle !important;
text-align:left !important;
&#125;
.table&gt;tbody&gt;tr&gt;th&#123;
line-height:45px !important;
&#125;
.list-group-item-text&#123;padding:8px 0px&#125;
.actions .btn&#123;margin: 0px 5px;&#125;
#create_coupon,#coupon_update&#123;display:none&#125;
.chjian&#123;float:right&#125;
.chaoz&#123;float:left&#125;
#page_list .list-group-item&#123;
    padding:10px 15px !important;
&#125;</code></pre>
<p>完成了这些之后，我们基本就算完成了，所有的工作，现在就剩下看效果了，点击左边，内容会显示在右边，这个是达到预期的。这个时候假如笔者没有把</p>
<pre><code>&lt;div id=&quot;create_form&quot;&gt;
...
&lt;/div&gt;</code></pre>
<p>修改成，</p>
<pre><code>&lt;div id=&quot;create_form&quot; class=&quot;woocommerce-MyAccount-navigation&quot;&gt;
...
&lt;/div&gt;</code></pre>
<p>那么当笔者点击更新优惠券的时候，布局如下：</p>
<p><img src="https://i.imgur.com/ZEo5TlO.png"></p>
<p>这样内容就不在右边既定的区域了，当然通过css我们是可以修正的，但是我们为何不利用原生的东西呢？好的，我们把这个改成，</p>
<pre><code>&lt;div id=&quot;create_form&quot; class=&quot;woocommerce-MyAccount-navigation&quot;&gt;
...
&lt;/div&gt;</code></pre>
<p>这个<code>class=&quot;woocommerce-MyAccount-navigation&quot;</code>其实就是通过开发者工具定位的控制右边内容显示区域的class。</p>
<p>完成之后，我们再看下效果：</p>
<p><img src="https://i.imgur.com/a92ZZ0b.png"></p>
<p>这样就在那个盒子中显示了，虽然样式有点丑，但这个已经不重要了，修改下即可。</p>
<p>好的，笔者这里有点啰嗦了，希望你们能够保持耐心阅读完成，本文到此结束，希望读者能够支持笔者的原创之路。</p>

    </div>

    
    
    

      <footer class="post-footer">
          <div class="post-tags">
              <a href="/tags/wordpress-woocommerce-rest-api-postman-%E8%8E%B7%E5%8F%96%E4%BA%A7%E5%93%81-%E7%BC%96%E8%BE%91-%E5%88%A0%E9%99%A4-%E5%88%9B%E5%BB%BA-%E6%9B%B4%E6%96%B0/" rel="tag"># wordpress,woocommerce,rest api,postman,获取产品,编辑,删除,创建,更新</a>
          </div>

        


        
    <div class="post-nav">
      <div class="post-nav-item">
    <a href="/2018/11/21/jquery%E5%AE%9E%E7%8E%B026%E4%B8%AA%E5%AD%97%E6%AF%8D%E6%90%9C%E7%B4%A2%E8%BF%87%E6%BB%A4%E5%92%8C0%E5%88%B09%E7%9A%84%E6%90%9C%E7%B4%A2%E8%BF%87%E6%BB%A4%E6%96%B9%E6%A1%88/" rel="prev" title="jquery实现26个字母(A-Z)搜索过滤和0到9的搜索过滤方案">
      <i class="fa fa-chevron-left"></i> jquery实现26个字母(A-Z)搜索过滤和0到9的搜索过滤方案
    </a></div>
      <div class="post-nav-item">
    <a href="/2018/11/26/%E6%97%A0%E7%97%9B%E5%AE%89%E8%A3%85magento2%E7%9A%84%E5%90%84%E7%A7%8D%E6%8A%A5%E9%94%99%E6%8A%98%E8%85%BE%E6%97%A5%E8%AE%B0/" rel="next" title="无痛安装magento2的各种报错折腾日记">
      无痛安装magento2的各种报错折腾日记 <i class="fa fa-chevron-right"></i>
    </a></div>
    </div>
      </footer>
    
  </article>
  
  
  



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%88%A0%E9%99%A4%E4%BC%98%E6%83%A0%E5%88%B8"><span class="nav-number">1.</span> <span class="nav-text">删除优惠券</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%9B%B4%E6%96%B0%E4%BC%98%E6%83%A0%E5%88%B8"><span class="nav-number">2.</span> <span class="nav-text">更新优惠券</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%88%9B%E5%BB%BA%E4%BC%98%E6%83%A0%E5%88%B8"><span class="nav-number">3.</span> <span class="nav-text">创建优惠券</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%99%BB%E5%BD%95%E4%B8%80%E4%B8%8B"><span class="nav-number">4.</span> <span class="nav-text">登录一下</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%84%B6%E5%90%8E%E7%94%A8js%E5%8A%A8%E6%80%81%E5%B5%8C%E5%85%A5%E5%89%8D%E9%9D%A2%E8%AF%B4%E7%9A%84html%E7%9A%84dom%E5%85%83%E7%B4%A0%E8%8A%82%E7%82%B9"><span class="nav-number">5.</span> <span class="nav-text">然后用js动态嵌入前面说的html的dom元素节点</span></a></li></ol></div>
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">John Doe</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">424</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
        <span class="site-state-item-count">25</span>
        <span class="site-state-item-name">categories</span>
      </div>
      <div class="site-state-item site-state-tags">
        <span class="site-state-item-count">400</span>
        <span class="site-state-item-name">tags</span>
      </div>
  </nav>
</div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2020</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">John Doe</span>
</div>
  <div class="powered-by">Powered by <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Gemini</a>
  </div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/pisces.js"></script>


<script src="/js/next-boot.js"></script>




  















  

  

</body>
</html>
